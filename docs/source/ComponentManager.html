<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/*global define */
define( [
	'require',
	'jqGui/Component'  // loaded via require() call in the code below, as it is a circular dependency
], function( require ) {
	
<span id='jqGui-ComponentManager'>	/**
</span>	 * @class jqGui.ComponentManager
	 * @singleton
	 *
	 * Object used to manage {@link jqGui.Component} &quot;types&quot;, and handles instantiating them based on the string that is specified
	 * for them in the manifest.
	 */
	var ComponentManager = {
		
<span id='jqGui-ComponentManager-property-componentClasses'>		/**
</span>		 * @private
		 * @property {Object} componentClasses
		 * 
		 * An Object (map) of the {@link jqGui.Component} classes which have been {@link #registerType registered}, 
		 * keyed by their type name. 
		 */
		componentClasses : {},
	   
	   
<span id='jqGui-ComponentManager-method-registerType'>		/**
</span>		 * Registers a given class with a `type` name. This is used to map the type names specified in Bit manifests
		 * to the class that should be instantiated.  Note that type names are case-insensitive.
		 * 
		 * This method will throw an error if a type name is already registered, to assist in making sure that we don't get
		 * unexpected behavior from a type name being overwritten.
		 * 
		 * @param {String} type The type name of registered class.
		 * @param {Function} jsClass The class (constructor function) to register.
		 */
		registerType : function( type, jsClass ) {
			type = type.toLowerCase();
			
			if( !this.componentClasses[ type ] ) { 
				this.componentClasses[ type ] = jsClass;
			// &lt;debug&gt;
			} else {
				throw new Error( &quot;Error: jqGui.ComponentManager already has a type '&quot; + type + &quot;'&quot; );
			// &lt;/debug&gt;
			}
		},
		
		
<span id='jqGui-ComponentManager-method-getType'>		/**
</span>		 * Retrieves the Component class (constructor function) that has been registered by the supplied `type` name. 
		 * 
		 * @param {String} type The type name of the registered class.
		 * @return {Function} The class (constructor function) that has been registered under the given `type` name.
		 */
		getType : function( type ) {
			type = type.toLowerCase();
			
			// Note: special case for 'component', added to get around the RequireJS circular dependency issue where 
			// jqGui.Component can't register itself with the ComponentManager
			var jsClass = ( type === 'component' ) ? require( 'jqGui/Component' ) : this.componentClasses[ type ];
			
			// &lt;debug&gt;
			if( !jsClass ) 
				throw new Error( &quot;The class with type name '&quot; + type + &quot;' has not been registered. Make sure that the component &quot; +
				                 &quot;exists, and has been 'required' by a RequireJS require() or define() call&quot; );
			// &lt;/debug&gt;
			
			return jsClass;
		},
		
		
<span id='jqGui-ComponentManager-method-hasType'>		/**
</span>		 * Determines if the ComponentManager has (i.e. can instantiate) a given `type`.
		 * 
		 * @param {String} type The type name to check for.
		 * @return {Boolean} `true` if the ComponentManager has the given type, `false` otherwise.
		 */
		hasType : function( type ) {
			if( !type ) {  // any falsy type value given, return false
				return false;
			} else {
				type = type.toLowerCase();
				
				// Note: special case for 'component', added to get around the RequireJS circular dependency issue where 
				// Component can't register itself with the ComponentManager
				return ( type === 'component' ) ? true : !!this.componentClasses[ type ];
			}
		},
		
		
<span id='jqGui-ComponentManager-method-create'>		/**
</span>		 * Creates (instantiates) a {@link jqGui.Component Component} based on its type name, given
		 * a configuration object that has a `type` property. If an already-instantiated 
		 * {@link jqGui.Component Component} is provided, it will simply be returned unchanged.
		 * 
		 * @param {Object} config The configuration object for the Component. Config objects should have the property `type`, 
		 *   which determines which type of {@link jqGui.Component Component} will be instantiated. If the object does not
		 *   have a `type` property, it will default to &quot;container&quot;, which makes it simple to create things like tab containers. 
		 *   Note that already-instantiated {@link jqGui.Component Components} will simply be returned unchanged. 
		 * @return {jqGui.Component} The instantiated Component.
		 */
		create : function( config ) {
			var type = config.type ? config.type.toLowerCase() : undefined,
			    Component = require( 'jqGui/Component' );  // need to require here, as otherwise we'd have an unresolved circular dependency (jqGui.Component depends on jqGui.ComponentManager)
			
			if( config instanceof Component ) {
				// Already a Component instance, return it
				return config;
				
			} else if( type === 'component' ) {  // special case, added to get around the RequireJS circular dependency issue where Component can't register itself with the ComponentManager
				return new Component( config );
				
			} else if( this.hasType( type || &quot;container&quot; ) ) {
				return new this.componentClasses[ type || &quot;container&quot; ]( config );
				
			} else {
				// No registered type with the given type, throw an error
				throw new Error( &quot;ComponentManager.create(): Unknown type: '&quot; + type + &quot;'&quot; );
			}
		}
		
	};
	
	return ComponentManager;
	
} );</pre>
</body>
</html>
