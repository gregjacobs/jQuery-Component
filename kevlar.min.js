/*!
 * Kevlar JS Library
 * Copyright(c) 2011 Gregory Jacobs.
 * MIT Licensed. http://www.opensource.org/licenses/mit-license.php
 */
/*
 * Copyright(c) 2006-2009, Ext JS, LLC.
 * 
 * Parts of this library are from Ext-Core.
 * 
 * MIT Licensed - http://extjs.com/license/mit.txt
 */
var Kevlar=function(){this.uA=window.navigator.userAgent.toLowerCase();this.browserVersion=parseFloat(this.uA.match(/.+(?:rv|it|ml|ra|ie)[\/: ]([\d.]+)/)[1]);this.isSafari=/webkit/.test(this.uA);this.isOpera=/opera/.test(this.uA);this.isIE=/msie/.test(this.uA)&&!(/opera/.test(this.uA));this.isMoz=/mozilla/.test(this.uA)&&!(/(compatible|webkit)/.test(this.uA));this.isWebKit=/applewebkit/.test(this.uA);this.isGecko=/gecko/.test(this.uA)&&(/khtml/.test(this.uA)===false);this.isKHTML=/khtml/.test(this.uA);this.isMobileSafari=!!this.uA.match(/apple.*mobile.*safari/);this.isMac=/mac/.test(this.uA);this.isWindows=/win/.test(this.uA);this.isLinux=/linux/.test(this.uA);this.isUnix=/x11/.test(this.uA)};Kevlar.prototype={constructor:Kevlar,emptyFn:function(){},abstractFn:function(){throw new Error("method must be implemented in subclass")},newId:(function(){var a=0;return function(){return ++a}})(),apply:function(d,e,b){if(b){Kevlar.apply(d,b)}if(d&&e&&typeof e=="object"){for(var a in e){d[a]=e[a]}}return d},applyIf:function(b,d){if(b){for(var a in d){if(!Kevlar.isDefined(b[a])){b[a]=d[a]}}}return b},copyTo:function(a,b,c){if(typeof c=="string"){c=c.split(/[,;\s]/)}Kevlar.each(c,function(d){if(b.hasOwnProperty(d)){a[d]=b[d]}},this);return a},extend:(function(){var b=0,a=Object.prototype.constructor;var c=function(e){for(var d in e){this[d]=e[d]}};return function(n,k,l){if(!Kevlar.isArray(k)){l=k;k=[]}var h=l.constructor!=a?l.constructor:function(){n.apply(this,arguments)},o=function(){},g,f=n.prototype;o.prototype=f;g=h.prototype=new o();g.constructor=h;h.superclass=f;if(f.constructor==a){f.constructor=n}h.override=function(i){Kevlar.override(h,i)};g.superclass=g.supr=(function(){return f});g.override=c;Kevlar.override(h,l);h.extend=function(i,p){return Kevlar.extend(h,i,p)};h.constructor=g.constructor;for(var j=k.length-1;j>=0;j--){var m=k[j].prototype;for(var e in m){if(typeof g[e]==="undefined"){g[e]=m[e]}}}h.mixins=k;var d={};h.hasMixin=g.hasMixin=function(w,v){var u=w._classId;if(!u){u=w._classId=++b}if(typeof d[u]!=="undefined"){return d[u]}else{var t=v||h,q=t.mixins;if(!q){d[u]=false;return false}for(var r=0,p=q.length;r<p;r++){if(q[r]===w){d[u]=true;return true}}if(t.superclass&&t.superclass.constructor&&t.superclass.constructor!==Object){var s=arguments.callee(w,t.superclass.constructor);d[u]=s;return s}else{d[u]=false;return false}}};return h}})(),isInstanceOf:function(b,a){if(typeof a!=="function"){throw new Error("jsClass argument of isInstanceOf method expected a Function (constructor function) for a JavaScript class")}if(!Kevlar.isObject(b)){return false}else{if(b instanceof a){return true}else{if(b.hasMixin&&b.hasMixin(a)){return true}else{return false}}}},override:function(a,c){if(c){var b=a.prototype;Kevlar.apply(b,c);if(Kevlar.isIE&&c.hasOwnProperty("toString")){b.toString=c.toString}}},namespace:function(){var b,a;Kevlar.each(arguments,function(c){a=c.split(".");b=window[a[0]]=window[a[0]]||{};Kevlar.each(a.slice(1),function(d){b=b[d]=b[d]||{}})});return b},toArray:function(d,g,e,f){if(Kevlar.isIE){f=[];for(var c=0,b=d.length;c<b;c++){f.push(d[c])}return f.slice(g||0,e||f.length)}else{return Array.prototype.slice.call(d,g||0,e||d.length)}},each:function(e,d,c){if(Kevlar.isEmpty(e,true)){return}if(typeof e.length==="undefined"||Kevlar.isPrimitive(e)){e=[e]}for(var b=0,a=e.length;b<a;b++){if(d.call(c||e[b],e[b],b,e)===false){return b}}},isArray:function(a){return !!a&&Object.prototype.toString.apply(a)==="[object Array]"},isObject:function(a){return !!a&&Object.prototype.toString.call(a)==="[object Object]"},isFunction:function(a){return !!a&&a.constructor===Function},isDate:function(a){return Object.prototype.toString.apply(a)==="[object Date]"},isString:function(a){return typeof a==="string"},isNumber:function(a){return typeof a==="number"&&isFinite(a)},isBoolean:function(a){return typeof a==="boolean"},isRegExp:function(a){return !!a&&a.constructor===RegExp},isElement:function(a){return a?a.nodeType===1:false},isJQuery:function(a){return a instanceof jQuery},isDefined:function(a){return typeof a!=="undefined"},isUndefined:function(a){return typeof a==="undefined"},isPrimitive:function(a){return Kevlar.isString(a)||Kevlar.isNumber(a)||Kevlar.isBoolean(a)},isEmpty:function(b,a){return b===null||b===undefined||((Kevlar.isArray(b)&&!b.length))||(!a?b==="":false)},escapeRe:function(a){return a.replace(/([\-.*+?\^$\{\}\(\)|\[\]\/\\])/g,"\\$1")}};Kevlar=new Kevlar();Kevlar.namespace("Kevlar.data","Kevlar.util");(function(){var a=Kevlar.util,k=Kevlar.toArray,j=Kevlar.each,b=Kevlar.isObject,h=true,i=false;a.Observable=function(){var l=this,m=l.events;l.events=m||{};if(l.listeners){l.on(l.listeners);delete l.listeners}};a.Observable.prototype={filterOptRe:/^(?:scope|delay|buffer|single)$/,fireEvent:function(){var s=k(arguments),p=s[0].toLowerCase(),u=this,r=h,n=u.events[p],l,o;if(u.eventsSuspended===h){l=u.eventQueue;if(l){l.push(s)}}else{if(b(n)&&n.bubble){if(n.fire.apply(n,s.slice(1))===false){return i}var m=n.bubbleFn,t=n.bubbleFnScope;if(m&&m.call(t,this)===false){return false}o=u.getBubbleTarget&&u.getBubbleTarget();if(o&&o.enableBubble){if(!o.events[p]||!Kevlar.isObject(o.events[p])||!o.events[p].bubble||(!o.events[p].bubbleFn&&m)){o.enableBubble({eventName:p,bubbleFn:m,scope:t})}return o.fireEvent.apply(o,s)}}else{if(b(n)){s.shift();r=n.fire.apply(n,s)}}}return r},addListener:function(n,r,t,m){var q=this,p,u,s,l;if(b(n)){m=n;for(p in m){u=m[p];if(!q.filterOptRe.test(p)){q.addListener(p,u.fn||u,u.scope||m.scope,u.fn?u:m)}}}else{n=n.toLowerCase();l=q.events[n]||h;if(Kevlar.isBoolean(l)){q.events[n]=l=new a.Event(q,n)}l.addListener(r,t,b(m)?m:{})}},removeListener:function(l,n,m){var o=this.events[l.toLowerCase()];if(b(o)){o.removeListener(n,m)}},purgeListeners:function(){var n=this.events,l,m;for(m in n){l=n[m];if(b(l)){l.clearListeners()}}},addEvents:function(p){var n=this;n.events=n.events||{};if(Kevlar.isString(p)){var l=arguments,m=l.length;while(m--){n.events[l[m]]=n.events[l[m]]||h}}else{Kevlar.applyIf(n.events,p)}},hasListener:function(l){var m=this.events[l];return b(m)&&m.listeners.length>0},suspendEvents:function(l){this.eventsSuspended=h;if(l&&!this.eventQueue){this.eventQueue=[]}},resumeEvents:function(){var l=this,m=l.eventQueue||[];l.eventsSuspended=i;delete l.eventQueue;j(m,function(n){l.fireEvent.apply(l,n)})},relayEvents:function(s,p){var r=this;function q(o){return function(){return r.fireEvent.apply(r,[o].concat(Array.prototype.slice.call(arguments,0)))}}for(var n=0,l=p.length;n<l;n++){var m=p[n];r.events[m]=r.events[m]||true;s.on(m,q(m),r)}},enableBubble:function(l){var m=this;if(!Kevlar.isEmpty(l)){l=Kevlar.isArray(l)?l:Kevlar.toArray(arguments);Kevlar.each(l,function(r){var n,q,o;if(typeof r==="object"){n=r.eventName;q=r.bubbleFn;o=r.scope}else{n=r}n=n.toLowerCase();var p=m.events[n]||true;if(Kevlar.isBoolean(p)){p=new a.Event(m,n);m.events[n]=p}p.bubble=true;if(typeof q==="function"){p.bubbleFn=q;p.bubbleFnScope=o||m}})}},getBubbleTarget:function(){return null}};var f=a.Observable.prototype;f.on=f.addListener;f.un=f.removeListener;a.Observable.releaseCapture=function(l){l.fireEvent=f.fireEvent};function g(m,n,l){return function(){if(n.target==arguments[0]){m.apply(l,k(arguments))}}}function d(p,q,m,n){m.task=new a.DelayedTask();return function(){m.task.delay(q.buffer,p,n,k(arguments))}}function e(n,o,m,l){return function(){o.removeListener(m,l);return n.apply(l,arguments)}}function c(p,q,m,n){return function(){var l=new a.DelayedTask();if(!m.tasks){m.tasks=[]}m.tasks.push(l);l.delay(q.delay||10,p,n,k(arguments))}}a.Event=function(m,l){this.name=l;this.obj=m;this.listeners=[]};a.Event.prototype={addListener:function(p,o,n){var q=this,m;o=o||q.obj;if(!q.isListening(p,o)){m=q.createListener(p,o,n);if(q.firing){q.listeners=q.listeners.slice(0)}q.listeners.push(m)}},createListener:function(q,p,r){r=r||{};p=p||this.obj;var m={fn:q,scope:p,options:r},n=q;if(r.target){n=g(n,r,p)}if(r.delay){n=c(n,r,m,p)}if(r.single){n=e(n,this,q,p)}if(r.buffer){n=d(n,r,m,p)}m.fireFn=n;return m},findListener:function(q,p){var r=this.listeners,n=r.length,m,o;while(n--){m=r[n];if(m){o=m.scope;if(m.fn==q&&(o==p||o==this.obj)){return n}}}return -1},isListening:function(m,l){return this.findListener(m,l)!=-1},removeListener:function(r,q){var p,m,n,s=this,o=i;if((p=s.findListener(r,q))!=-1){if(s.firing){s.listeners=s.listeners.slice(0)}m=s.listeners[p];if(m.task){m.task.cancel();delete m.task}n=m.tasks&&m.tasks.length;if(n){while(n--){m.tasks[n].cancel()}delete m.tasks}s.listeners.splice(p,1);o=h}return o},clearListeners:function(){var o=this,m=o.listeners,n=m.length;while(n--){o.removeListener(m[n].fn,m[n].scope)}},fire:function(){var r=this,o=k(arguments),q=r.listeners,m=q.length,p=0,n,s=false;if(m>0){r.firing=h;for(;p<m;p++){n=q[p];if(n&&n.fireFn.apply(n.scope||r.obj||window,o)===i){s=true}}}r.firing=i;return(s)?false:true}}})();Kevlar.data.AbstractProxy=Kevlar.extend(Kevlar.util.Observable,{constructor:function(a){Kevlar.apply(this,a)},create:Kevlar.abstractFn,read:Kevlar.abstractFn,update:Kevlar.abstractFn,destroy:Kevlar.abstractFn,supportsIncrementalUpdates:Kevlar.abstractFn});Kevlar.namespace("ui","ui.anim","ui.bits","ui.layouts","ui.containers","ui.formFields","ui.toolButtons","ui.plugins","ui.utils");ui.ComponentManager={componentClasses:{},registerType:function(b,a){b=b.toLowerCase();if(!this.componentClasses[b]){this.componentClasses[b]=a}else{throw new Error("Error: ui.ComponentManager already has a type '"+b+"'")}},getType:function(a){return this.componentClasses[a.toLowerCase()]},hasType:function(a){if(!a){return false}else{return !!this.componentClasses[a.toLowerCase()]}},create:function(a){var b=a.type?a.type.toLowerCase():undefined;if(a instanceof ui.Component){return a}else{if(this.hasType(b||"container")){return new this.componentClasses[b||"container"](a)}else{throw new Error("ComponentManager.create(): Unknown type: '"+b+"'")}}}};ui.Component=Kevlar.extend(Kevlar.util.Observable,{elType:"div",hidden:false,cls:"",masked:false,parentContainer:null,rendered:false,deferMaskShow:false,destroyed:false,constructor:function(a){Kevlar.apply(this,a);this.initialConfig=Kevlar.apply({},a);ui.Component.superclass.constructor.call(this);this.addEvents("render","show","hide","beforedestroy","destroy");if(this.hasOwnProperty("onRender")){var b=this.onRender;this.addListener({render:function(c){b.call(this,c)},scope:this});delete this.onRender}this.id=this.id||"ui-cmp-"+Kevlar.newId();this.elId=this.elId||"ui-cmp-"+Kevlar.newId();this.plugins=this.plugins||[];if(Kevlar.isObject(this.plugins)){this.plugins=[this.plugins]}this.initComponent();if(this.plugins.length>0){this.initPlugins(this.plugins)}if(this.renderTo){this.render(this.renderTo);delete this.renderTo}},initComponent:function(){},initPlugins:function(c){if(Kevlar.isArray(c)){for(var b=0,a=c.length;b<a;b++){this.initPlugins(c[b])}return}if(!(c instanceof ui.plugins.AbstractPlugin)){throw new Error("error: a plugin provided to this Component was not of type ui.plugins.AbstractPlugin")}c.initPlugin(this)},render:function(e){var b=jQuery(e);if(this.rendered){this.$el.appendTo(b)}else{var g=[],a=this.attr;if(a){for(var d in a){if(a.hasOwnProperty(d)){g.push(d+'="'+a[d]+'"')}}}var c="";if(this.style){c=Kevlar.CSS.hashToString(this.style)}this.$el=jQuery("<"+this.elType+' id="'+this.elId+'" class="'+this.cls+'" style="'+c+'" '+g.join(" ")+" />");b.append(this.$el);this.rendered=true;this.onRender(b);var f=this.getContentTarget();if(this.html){f.append(this.html)}if(this.contentEl){f.append(this.contentEl)}if(typeof this.height!=="undefined"){this.$el.height(this.height)}if(typeof this.width!=="undefined"){this.$el.width(this.width)}if(typeof this.minHeight!=="undefined"){this.$el.css({minHeight:this.minHeight})}if(typeof this.minWidth!=="undefined"){this.$el.css({minWidth:this.minWidth})}if(typeof this.maxHeight!=="undefined"){this.$el.css({maxHeight:this.maxHeight})}if(typeof this.maxWidth!=="undefined"){this.$el.css({maxWidth:this.maxWidth})}if(this.hidden){this.$el.hide()}if(this.masked){this.mask(this.deferredMaskConfig)}this.afterRender(b);this.fireEvent("render",this)}},onRender:function(a){},afterRender:function(a){},update:function(a){if(!this.rendered){delete this.contentEl;this.html=a}else{this.getContentTarget().empty().append(a)}},getContentTarget:function(){return this.getEl()},getId:function(){return this.id},getEl:function(){return this.$el},getInitialConfig:function(){return this.initialConfig},show:function(a){this.hidden=false;if(this.rendered){if(typeof a==="object"){a.target=this;this.currentAnimation=new ui.anim.Animation(a);this.currentAnimation.start()}else{this.$el.show()}this.onShow();this.fireEvent("show",this)}},onShow:function(){if(this.deferMaskShow){this.mask(this.deferredMaskConfig)}},hide:function(a){this.hidden=true;if(this.rendered){if(typeof a==="object"){a.target=this;this.currentAnimation=new ui.anim.Animation(a);this.currentAnimation.start()}else{this.$el.hide()}this.onHide();this.fireEvent("hide",this)}},onHide:Kevlar.emptyFn,isHidden:function(){if(!this.rendered){return this.hidden}else{if(this.$el.css("display")==="none"){return true}else{var b=this.$el.parents(),c=b.length;if(c===0||b[c-1].tagName.toLowerCase()!=="html"){return true}for(var d=0,a=b.length;d<a;d++){if(jQuery(b[d]).css("display")==="none"){return true}}}return false}},mask:function(a){a=a||this.maskConfig;this.masked=true;if(!this.rendered){this.deferredMaskConfig=a}else{if(this.isHidden()){this.deferMaskShow=true;this.deferredMaskConfig=a}else{if(!this._mask){this._mask=new ui.Mask(this.getMaskTarget(),a)}else{this._mask.updateConfig(a)}this._mask.show();this.deferMaskShow=false;delete this.deferredMaskConfig}}},unMask:function(){this.masked=false;this.deferMaskShow=false;delete this.deferredMaskConfig;if(this.rendered&&this._mask){this._mask.hide()}},isMasked:function(){return this.masked},getMaskTarget:function(){return this.getEl()},setParentContainer:function(a){this.parentContainer=a},getParentContainer:function(){return this.parentContainer},bubble:function(c,b,a){var d=this;while(d){if(c.apply(b||d,a||[d])===false){break}d=d.parentContainer}},findParentBy:function(a){for(var b=this.parentContainer;(b!==null)&&!a(b,this);b=b.parentContainer){}return b||null},findParentById:function(b){for(var a=this.parentContainer;a&&a.id!==b;a=a.parentContainer){}return a||null},findParentByType:function(a){if(typeof a==="string"){a=ui.ComponentManager.getType(a);if(!a){return null}}for(var b=this.parentContainer;b&&!(b instanceof a);b=b.parentContainer){}return b||null},getBubbleTarget:function(){return this.parentContainer},destroy:function(){if(!this.destroyed){if(this.fireEvent("beforedestroy",this)!==false){this.onDestroy();if(this._mask instanceof ui.Mask){this._mask.destroy()}for(var b in this){if(this.hasOwnProperty(b)){var a=this[b];if(Kevlar.isElement(a)){jQuery(a).remove();delete this[b]}else{if(Kevlar.isJQuery(a)){a.remove();delete this[b]}}}}this.rendered=false;this.destroyed=true;this.fireEvent("destroy",this);this.purgeListeners()}}},onDestroy:function(){}});ui.ComponentManager.registerType("Component",ui.Component);ui.Container=Kevlar.extend(ui.Component,{defaultType:"Container",destroyRemoved:true,deferLayout:false,initComponent:function(){if(this.items){this.html=undefined;this.contentEl=undefined}this.addEvents("beforeadd","add","reorder","beforeremove","remove","afterlayout");this.enableBubble("add","remove");ui.Container.superclass.initComponent.call(this);this.childComponents=[];if(this.items){this.add(this.items);delete this.items}if(this.layout){this.setLayout(this.layout)}if(this.data){this.setData(this.data)}},createComponent:function(a){a=Kevlar.apply({},a,{parentContainer:this,type:this.defaultType});return ui.ComponentManager.create(a)},add:function(d){var c;if(Kevlar.isArray(d)){c=[];for(var b=0,a=d.length;b<a;b++){c.push(this.doInsert(d[b]))}}else{c=this.doInsert(d)}this.doLayout();return c},insert:function(b,a){b=this.doInsert(b,a);this.doLayout();return b},doInsert:function(d,b){if(typeof b!=="number"){b=this.childComponents.length}else{if(b<0){b=0}else{if(b>this.childComponents.length){b=this.childComponents.length}}}var c=(d instanceof ui.Component),h=c&&this.has(d);if(h){var g=this.childComponents;for(var f=0,a=g.length;f<a;f++){if(g[f]===d){this.childComponents.splice(f,1);break}}this.childComponents.splice(b,0,d);this.onReorder(d,b,f);this.fireEvent("reorder",this,d,b,f);return d}else{if(!c){d=this.createComponent(d)}if(this.fireEvent("beforeadd",this,d)!==false){var e=d.getParentContainer();if(e!==null){e.remove(d,false)}d.setParentContainer(this);this.childComponents.splice(b,0,d);this.onAdd(d,b);this.fireEvent("add",this,d,b);return d}else{return null}}},onAdd:Kevlar.emptyFn,onReorder:Kevlar.emptyFn,remove:function(e,f){var d;if(Kevlar.isArray(e)){d=[];for(var c=0,b=e.length;c<b;c++){var a=this.doRemove(e[c],f);if(a){d.push(a)}}}else{d=this.doRemove(e,f)}this.doLayout();return d},removeAll:function(c){var b=this.childComponents;for(var a=b.length-1;a>=0;a--){this.doRemove(b[a],c)}this.doLayout()},doRemove:function(e,f){var d,b;if(Kevlar.isArray(e)){for(d=0,b=e.length;d<b;d++){this.remove(e[d],f)}return}var c=this.childComponents,a=-1;f=(typeof f==="undefined")?this.destroyRemoved:f;for(d=0,b=c.length;d<b;d++){if(c[d]===e){a=d;break}}if(a!==-1){if(this.fireEvent("beforeremove",this,e)!==false){e.setParentContainer(null);if(e.rendered){e.getEl().detach()}c.splice(a,1);this.onRemove(e,a);this.fireEvent("remove",this,e,a);if(f){e.destroy()}return e}}return null},onRemove:Kevlar.emptyFn,getItems:function(){return this.childComponents},getItemAt:function(a){return this.childComponents[a]||null},getItemIndex:function(d){var c=this.childComponents;for(var b=0,a=c.length;b<a;b++){if(c[b]===d){return b}}return -1},has:function(a){return this.getItemIndex(a)!==-1},afterRender:function(a){ui.Container.superclass.afterRender.apply(this,arguments);this.doLayout()},onShow:function(){ui.Container.superclass.onShow.apply(this,arguments);if(this.deferLayout){this.doLayout()}var d=this.childComponents;for(var c=0,b=d.length;c<b;c++){var a=d[c];if(!a.hidden){d[c].onShow()}}},doLayout:function(){if(!this.canLayout()){this.deferLayout=true}else{this.deferLayout=false;this.getLayout().doLayout();this.onLayout();this.fireEvent("afterlayout",this)}},onLayout:Kevlar.emptyFn,canLayout:function(){return this.rendered&&!this.isHidden()},getLayout:function(){if(!this.layout){this.setLayout(new ui.layouts.ContainerLayout())}return this.layout},setLayout:function(b){if(this.layout instanceof ui.layouts.AbstractLayout&&this.layout!==b){this.layout.setContainer(null)}if(b instanceof ui.layouts.AbstractLayout){this.layout=b;b.setContainer(this)}else{var a,c={container:this};if(typeof b==="string"){a=b}else{if(typeof b==="object"){a=b.type||"container";c=Kevlar.apply({},c,b);delete c.type}else{throw new Error("Invalid layout argument provided to setLayout. See method description in docs.")}}a=a.toLowerCase();if(!ui.Container.LAYOUTS[a]){throw new Error("layout type '"+a+"' is not a registered layout type.")}this.layout=new ui.Container.LAYOUTS[a](c)}},setData:function(e){var f=this.getDataControls();for(var d=0,a=f.length;d<a;d++){var c=f[d],b=c.getKey();if(typeof e[b]!=="undefined"){c.setData(e[b])}}},getData:function(){var e={},f=this.getDataControls();for(var d=0,a=f.length;d<a;d++){var c=f[d],b=c.getKey();if(b){e[b]=c.getData()}}return e},getDataControls:function(){var b=[];this.cascade(function a(c){if(Kevlar.isInstanceOf(c,ui.DataControl)){b.push(c);return false}},this);return b},cascade:function(f,e,b){if(f.apply(e||this,b||[this])!==false){var d=this.childComponents;if(d.length>0){for(var c=0,a=d.length;c<a;c++){if(d[c].cascade){d[c].cascade(f,e,b)}else{f.apply(e||d[c],b||[d[c]])}}}}},findById:function(c){var b=null,a=this;this.cascade(function(d){if(d!==a&&d.id===c){b=d;return false}});return b},findByKey:function(d){if(!d){return null}var e=null,c=this,a=Kevlar.isInstanceOf,b=ui.DataControl;this.cascade(function(f){if(f!==c&&a(f,b)){if(f.getKey()===d){e=f}return false}});return e},findBy:function(d,c){var b=[],a=this;this.cascade(function(e){if(e!=a&&d.call(c||e,e,a)===true){b.push(e)}});return b},onDestroy:function(){var c=this.childComponents;for(var b=0,a=c.length;b<a;b++){c[b].destroy()}if(this.layout instanceof ui.layouts.AbstractLayout){this.layout.destroy()}ui.Container.superclass.onDestroy.apply(this,arguments)}});ui.Container.LAYOUTS={};ui.Container.registerLayout=function(a,b){ui.Container.LAYOUTS[a.toLowerCase()]=b};ui.ComponentManager.registerType("Container",ui.Container);ui.DataControl=Kevlar.extend(Kevlar.util.Observable,{key:null,constructor:function(){ui.DataControl.superclass.constructor.call(this);this.addEvents("datachange")},getKey:function(){return this.key},getData:function(){throw new Error("ui.DataControl::getData() must be implemented in subclass.")},setData:function(a){throw new Error("ui.DataControl::setData() must be implemented in subclass.")},onDataChange:function(){this.fireEvent("datachange",this)}});ui.AbstractOverlay=Kevlar.extend(ui.Container,{autoDestroy:true,autoOpen:false,closeOnEscape:true,opened:false,opening:false,closing:false,currentAnimation:null,initComponent:function(){ui.AbstractOverlay.superclass.initComponent.call(this);this.addEvents("beforeopen","open","openbegin","opencomplete","beforeblurclose","beforeclose","closebegin","close","closecomplete");if(this.autoOpen){this.open()}},onRender:function(){ui.AbstractOverlay.superclass.onRender.apply(this,arguments);this.$contentContainer=jQuery('<div class="ui-overlay-content" />').appendTo(this.$el);if(this.closeOnEscape){this.$el.keydown(function(b){if(b.keyCode===jQuery.ui.keyCode.ESCAPE){this.close()}}.createDelegate(this))}var a=new Kevlar.util.DelayedTask(function(){this.onWindowResize()},this);this.windowResizeHandler=function(){a.delay(150)};jQuery(window).bind("resize",this.windowResizeHandler)},getContentTarget:function(){return this.$contentContainer},open:function(b){b=b||{};if(typeof b.animate==="undefined"){b.animate=true}if(this.closing){this.currentAnimation.end()}if(!this.opened&&this.fireEvent("beforeopen",this)!==false){this.opened=true;this.opening=true;if(!this.rendered){this.render(document.body)}this.show();this.onBeforeOpen(b);if(b.anchor){this.setAnchor(b.anchor)}else{if(b.hasOwnProperty("x")||b.hasOwnProperty("y")){var a=(typeof b.x!=="undefined")?b.x:this.x;var d=(typeof b.y!=="undefined")?b.y:this.y;this.setPosition(a,d)}else{this.updatePosition()}}this.onOpen();this.fireEvent("openbegin",this);this.fireEvent("open",this);if(this.openAnim&&b.animate){var c=Kevlar.apply({},{target:this},this.openAnim);this.currentAnimation=new ui.anim.Animation(c);this.currentAnimation.addListener("afteranimate",this.openComplete,this);this.currentAnimation.start()}else{this.openComplete()}}},onBeforeOpen:Kevlar.emptyFn,openComplete:function(){this.opening=false;this.currentAnimation=null;this.fireEvent("opencomplete",this)},onOpen:Kevlar.emptyFn,isOpen:function(){return this.opened},getHeight:function(){if(this.isOpen()){return this.$el.outerHeight()}else{return 0}},getWidth:function(){if(this.isOpen()){return this.$el.outerWidth()}else{return 0}},setPosition:function(a,b){this.x=a;this.y=b;this.anchor=null;this.updatePosition()},setAnchor:function(a){this.anchor=a;this.updatePosition()},updatePosition:function(){if(this.isOpen()){var g,a,h,b,f,i=this.$el;if(this.anchor){var c=this.anchor;g=c.my||"left top";a=c.at||"left bottom";h=c.element||c.of;b=c.offset;f=c.collision||"flip";if(h instanceof ui.Component){h=h.getEl()}}else{var e=(this.x>0)?"left":"right";var d=(this.y>0)?"top":"bottom";g=a=e+" "+d;h=document.body;b=this.x+" "+this.y}i.position({my:g,at:a,of:h,offset:b,collision:f});this.checkCollision()}},checkCollision:function(){var b=this.anchor;if(b){var c=b.collision||"flip";if(c.indexOf("flip")>-1){var a=this.$el.attr("class");if(/(^| )ui-flipped-(top|bottom|left|right)( |$)/.test(a)){this.onCollision("flip",{top:/(^| )ui-flipped-bottom( |$)/.test(a),bottom:/(^| )ui-flipped-top( |$)/.test(a),left:/(^| )ui-flipped-right( |$)/.test(a),right:/(^| )ui-flipped-left( |$)/.test(a)})}}}},onCollision:function(b,a){},onWindowResize:function(){this.updatePosition()},close:function(a){a=a||{};if(typeof a.animate==="undefined"){a.animate=true}if(this.opening){this.currentAnimation.end()}if(this.opened&&!this.closing&&this.fireEvent("beforeclose",this)!==false){this.opened=false;this.closing=true;this.onBeforeClose(a);this.fireEvent("closebegin",this);if(this.closeAnim&&a.animate){var b=Kevlar.apply({},{target:this},this.closeAnim);this.currentAnimation=new ui.anim.Animation(b);this.currentAnimation.addListener("afteranimate",this.closeComplete,this);this.currentAnimation.start()}else{this.closeComplete()}}},onBeforeClose:Kevlar.emptyFn,closeComplete:function(){this.closing=false;this.currentAnimation=null;this.hide();this.onClose();this.fireEvent("close",this);this.fireEvent("closecomplete",this);if(this.autoDestroy){this.destroy()}},onClose:Kevlar.emptyFn,onDestroy:function(){if(this.isOpen()){this.close({animate:false})}jQuery(window).unbind("resize",this.windowResizeHandler);this.windowResizeHandler=null;ui.AbstractOverlay.superclass.onDestroy.apply(this,arguments)}});ui.Button=Kevlar.extend(ui.Component,{iconSrc:"",text:"",tooltip:"",priority:"normal",disabled:false,removeHoverStateOnClick:false,elType:"button",initComponent:function(){ui.Button.superclass.initComponent.call(this);this.addEvents("click","mouseenter","mouseleave");if(this.label){this.text=this.label;delete this.label}if(this.hasOwnProperty("onClick")){this.handler=this.onClick;delete this.onClick}},onRender:function(b){ui.Button.superclass.onRender.apply(this,arguments);if(this.text){this.$el.append(this.text)}if(this.tooltip){this.$el.attr("title",this.tooltip)}var a={icons:{primary:null,secondary:null},text:(this.text!=="")?true:false,disabled:this.disabled};if(this.primaryIcon){a.icons.primary=this.primaryIcon}if(this.secondaryIcon){a.icons.secondary=this.secondaryIcon}this.$el.button(a);if(this.priority==="primary"){this.$el.addClass("ui-priority-primary")}else{if(this.priority==="secondary"){this.$el.addClass("ui-priority-secondary")}}if(this.iconSrc){var c=jQuery('<img src="'+this.iconSrc+'" style="margin-right: 5px; vertical-align: middle;" />');this.$el.find("span").prepend(c)}this.$el.bind({mouseenter:this.onMouseEnter.createDelegate(this),mouseleave:this.onMouseLeave.createDelegate(this),click:this.onClick.createDelegate(this)})},setText:function(a){if(!this.rendered){this.text=a}else{this.$el.find("span").empty().append(a)}},disable:function(){if(!this.rendered){this.disabled=true}else{this.$el.button("disable")}},enable:function(){if(!this.rendered){this.disabled=false}else{this.$el.button("enable")}},onClick:function(){if(this.removeHoverStateOnClick){this.$el.removeClass("ui-state-hover")}if(typeof this.handler==="function"){this.handler.call(this.scope||this,this)}this.fireEvent("click",this)},onMouseEnter:function(){this.fireEvent("mouseenter",this)},onMouseLeave:function(){this.fireEvent("mouseleave",this)}});ui.ComponentManager.registerType("Button",ui.Button);ui.ComponentManager.registerType("ChoiceButton",ui.Button);ui.formFields.AbstractField=Kevlar.extend(ui.Component,[ui.DataControl],{label:"",labelPosition:"left",labelWidth:"19%",help:"",initComponent:function(){this.addEvents("change","focus","blur");this.cls+=" dialog-formField";if(typeof this.value==="function"){this.value=this.value()}this.labelPosition=this.labelPosition.toLowerCase();if(this.label===""){this.cls+=" dialog-formField-noLabel"}else{this.cls+=" dialog-formField-"+this.labelPosition+"Label"}this.inputId=this.inputId||"ui-cmp-input-"+Kevlar.newId();this.inputName=(typeof this.inputName!=="undefined")?this.inputName:this.inputId;ui.formFields.AbstractField.superclass.initComponent.call(this);ui.DataControl.constructor.call(this)},onRender:function(){ui.formFields.AbstractField.superclass.onRender.apply(this,arguments);var d=this.$el,f=ui.formFields.AbstractField.renderTpl,c="",e="",g="";if(this.label!==""&&this.labelPosition==="left"){var a=parseInt(this.labelWidth,10);c+="width: "+a+"%;";e+="width: "+(100-a)+"%;";g+="padding-left: "+a+"%;"}var b=Kevlar.util.tmpl(f,{inputId:this.inputId,label:this.label||"",help:this.help||"",labelWrapStyles:c,inputContainerWrapStyles:e,helpStyles:g});d.append(b);this.$labelEl=d.find("label.dialog-formField-label");this.$inputContainerEl=d.find("div.dialog-formField-inputContainer");this.$helpEl=d.find("div.dialog-formField-help")},setLabel:function(a){if(!this.rendered){this.label=a}else{if(a!==""){this.$el.removeClass("dialog-formField-noLabel")}else{this.$el.addClass("dialog-formField-noLabel")}this.$labelEl.empty().append(a)}},setHelp:function(a){if(!this.rendered){this.help=a}else{this.$helpEl.html(a)}},getLabelEl:function(){return this.$labelEl},getInputContainerEl:function(){return this.$inputContainerEl},getHelpEl:function(){return this.$helpEl},setValue:function(a){throw new Error("setValue() must be implemented in AbstractField subclass")},getValue:function(){throw new Error("getValue() must be implemented in AbstractField subclass")},onChange:function(a){this.fireEvent("change",this,a);if(this.lastDataChangeValue!==a){this.lastDataChangeValue=a;this.onDataChange()}},focus:function(){this.onFocus()},onFocus:function(){this.fireEvent("focus",this)},blur:function(){this.onBlur()},onBlur:function(){this.fireEvent("blur",this)},setData:function(){this.setValue.apply(this,arguments)},getData:function(){return this.getValue()}});Kevlar.apply(ui.formFields.AbstractField,{renderTpl:['<div class="dialog-formField-labelWrap" style="<%= labelWrapStyles %>">','<label for="<%= inputId %>" class="dialog-formField-label"><%= label %></label>',"</div>",'<div class="dialog-formField-inputContainerWrap" style="<%= inputContainerWrapStyles %>">','<div class="dialog-formField-inputContainer" style="position: relative;" />',"</div>",'<div class="dialog-formField-help" style="<%= helpStyles %>"><%= help %></div>'].join("")});ui.formFields.WrappedInputField=Kevlar.extend(ui.formFields.AbstractField,{onRender:function(a){ui.formFields.WrappedInputField.superclass.onRender.apply(this,arguments);this.$inputContainerEl.addClass("dialog-formField-wrappedInputField")},onFocus:function(){this.$inputContainerEl.addClass("dialog-formField-wrappedInputField-focus");ui.formFields.WrappedInputField.superclass.onFocus.apply(this,arguments)},onBlur:function(){this.$inputContainerEl.removeClass("dialog-formField-wrappedInputField-focus");ui.formFields.WrappedInputField.superclass.onBlur.apply(this,arguments)}});ui.formFields.TextField=Kevlar.extend(ui.formFields.WrappedInputField,{selectOnFocus:false,restoreEmptyText:true,initComponent:function(){ui.formFields.TextField.superclass.initComponent.call(this);this.addEvents("keydown","keyup","keypress");if(this.labelPosition==="infield"){this.behaviorState=new ui.formFields.TextField.InfieldLabelBehavior()}else{this.behaviorState=new ui.formFields.TextField.EmptyTextBehavior()}this.value=this.normalizeValue(this.value);if(this.value===""&&this.emptyText){this.value=this.emptyText}},onRender:function(a){ui.formFields.TextField.superclass.onRender.apply(this,arguments);this.$inputEl=this.createInputEl().appendTo(this.$inputContainerEl);this.$inputEl.bind({change:function(b){this.onChange(this.getValue())}.createDelegate(this),focus:this.onFocus.createDelegate(this),blur:this.onBlur.createDelegate(this),keydown:this.onKeyDown.createDelegate(this),keyup:this.onKeyUp.createDelegate(this),keypress:this.onKeyPress.createDelegate(this)});this.behaviorState.onRender(this)},createInputEl:function(){var a=(this.value)?Kevlar.util.Html.encode(this.value):"";return jQuery('<input type="text" class="text" id="'+this.inputId+'" name="'+this.inputName+'" value="'+a+'" />')},getInputEl:function(){return this.$inputEl||null},normalizeValue:function(a){if(typeof a==="undefined"||a===null){return""}else{if(typeof a!=="string"){return a.toString()}else{return a}}},setValue:function(a){a=this.normalizeValue(a);if(!this.rendered){this.value=a}else{this.$inputEl.val(a);this.behaviorState.onSetValue(this,a)}this.onChange(a)},getValue:function(){if(!this.rendered){return this.value}else{return this.$inputEl.val()}},setEmptyText:function(a){this.emptyText=a},getEmptyText:function(){return this.emptyText},select:function(){this.$inputEl.select()},onChange:function(){this.behaviorState.onChange(this);ui.formFields.TextField.superclass.onChange.apply(this,arguments)},focus:function(){this.$inputEl.focus();ui.formFields.TextField.superclass.focus.apply(this,arguments)},blur:function(){this.$inputEl.blur();ui.formFields.TextField.superclass.blur.apply(this,arguments)},onFocus:function(){this.behaviorState.onFocus(this);if(this.selectOnFocus){this.select()}ui.formFields.TextField.superclass.onFocus.apply(this,arguments)},onBlur:function(){this.behaviorState.onBlur(this);ui.formFields.TextField.superclass.onBlur.apply(this,arguments)},onKeyDown:function(a){this.behaviorState.onKeyDown(this,a);this.fireEvent("keydown",this,a)},onKeyUp:function(a){this.behaviorState.onKeyUp(this,a);this.fireEvent("keyup",this,a);var b=this.getValue();if(this.lastDataChangeValue!==b){this.lastDataChangeValue=b;this.onDataChange()}},onKeyPress:function(a){this.behaviorState.onKeyPress(this,a);this.fireEvent("keypress",this,a)}});ui.ComponentManager.registerType("Text",ui.formFields.TextField);ui.layouts.AbstractLayout=Kevlar.extend(Kevlar.util.Observable,{container:null,constructor:function(a){this.addEvents("destroy");Kevlar.apply(this,a);ui.layouts.AbstractLayout.superclass.constructor.call(this);this.initLayout()},initLayout:function(){},setContainer:function(a){this.container=a},getContainer:function(){return this.container},doLayout:function(){var a=this.container,d=this.container.getItems(),c=d.length,e=a.getContentTarget();for(var b=0;b<c;b++){if(d[b].rendered){d[b].getEl().detach()}}this.onLayout(d,e)},onLayout:function(a,b){},destroy:function(){this.onDestroy();this.fireEvent("destroy",this);this.purgeListeners()},onDestroy:function(){}});ui.layouts.CardsLayout=Kevlar.extend(ui.layouts.AbstractLayout,{activeItem:0,initLayout:function(){this.addEvents("cardchange");if(!this.transition){this.transition=new ui.layouts.CardsLayout.SwitchTransition()}ui.layouts.CardsLayout.superclass.initLayout.call(this)},onLayout:function(c,d){ui.layouts.CardsLayout.superclass.onLayout.apply(this,arguments);if(typeof this.activeItem==="number"){this.activeItem=this.getContainer().getItemAt(this.activeItem)}for(var b=0,a=c.length;b<a;b++){c[b].render(d);if(this.activeItem!==c[b]){c[b].hide()}}},setActiveItem:function(b,a){if(typeof b==="number"){b=this.container.getItemAt(b)}else{if(b instanceof ui.Component&&!this.container.has(b)){b=null}}if(!this.getContainer().rendered){this.activeItem=b}else{if(!b||this.activeItem!==b||b.isHidden()){var c=this.activeItem;if(!(c instanceof ui.Component)){c=null}this.transition.setActiveItem(this,c,b,a);this.activeItem=b;this.fireEvent("cardchange",b)}}},getActiveItem:function(){var a=this.activeItem;if(a instanceof ui.Component||a===null){return a}else{return this.container.getItemAt(a)}},getActiveItemIndex:function(){var a=this.activeItem;if(a===null){return -1}else{if(a instanceof ui.Component){return this.container.getItemIndex(a)}else{return a}}},onDestroy:function(){this.transition.destroy();ui.layouts.CardsLayout.superclass.onDestroy.apply(this,arguments)}});ui.Container.registerLayout("cards",ui.layouts.CardsLayout);ui.plugins.AbstractPlugin=Kevlar.extend(Kevlar.util.Observable,{constructor:function(a){Kevlar.apply(this,a);ui.plugins.AbstractPlugin.superclass.constructor.call(this)},initPlugin:function(a){}});ui.toolButtons.ToolButton=Kevlar.extend(ui.Button,{size:"large",initComponent:function(){this.cls+=" ui-toolButton ui-toolButton-"+this.size;ui.toolButtons.ToolButton.superclass.initComponent.call(this)}});ui.ComponentManager.registerType("ToolButton",ui.toolButtons.ToolButton);Kevlar.CSS={hashToString:function(c){var a=/([A-Z])/g,d="",b;for(var e in c){if(c.hasOwnProperty(e)){b=e.replace(a,"-$1").toLowerCase();d+=b+":"+c[e]+";"}}return d}};Kevlar.data.Field=Kevlar.extend(Object,{name:"",persist:true,constructor:function(b){if(typeof b!=="object"){b={name:b}}Kevlar.apply(this,b);var a=this.name;if(a===undefined||a===null||a===""){throw new Error("no 'name' property provided to Kevlar.data.Field constructor")}else{if(typeof this.name==="number"){this.name=a.toString()}}if(this["default"]){this.defaultValue=this["default"]}if(typeof this.defaultValue==="function"){this.defaultValue=this.defaultValue()}if(typeof this.defaultValue==="object"){(function c(d){for(var e in d){if(d.hasOwnProperty(e)){if(typeof d[e]==="function"){d[e]=d[e]()}else{if(typeof d[e]==="object"){c(d[e])}}}}})(this.defaultValue)}},getName:function(){return this.name}});Kevlar.data.Model=Kevlar.extend(Kevlar.util.Observable,{dirty:false,initialized:false,fields:[],constructor:function(c){Kevlar.apply(this,c);Kevlar.data.Model.superclass.constructor.call(this);this.addEvents("datachange");this.initFields();var d=this.data||{};var a=this.fields;for(var b in a){if(d[b]===undefined){d[b]=a[b].defaultValue}}this.data={};this.modifiedData={};this.set(d);this.commit();this.initialized=true},initFields:function(){this.fields={};var c=[],d=this.constructor,b=d.prototype;do{if(b.hasOwnProperty("fields")&&Kevlar.isArray(b.fields)){c=c.concat(b.fields)}}while(d=(b=d.superclass)&&b.constructor);for(var a=c.length;a--;){var e=new Kevlar.data.Field(c[a]);this.fields[e.getName()]=e}},get:function(a){if(!(a in this.data)){throw new Error("Kevlar.data.Model::get() error: provided key '"+a+"' was not found in the Model.")}return this.data[a]},getAll:function(){return Kevlar.Object.clone(this.data,false)},set:function(j,f){var c=this.fields,b=[];if(typeof j==="object"){var h=j;for(j in h){if(h.hasOwnProperty(j)&&(j in c)){if(typeof c[j].convert==="function"){b.push(j)}else{this.set(j,h[j])}}}for(var a=0,d=b.length;a<d;a++){j=b[a];this.set(j,h[j])}}else{var e=c[j];if(!e){throw new Error("Kevlar.data.Model.set(): A field with the fieldName '"+j+"' was not found.")}var g=this.data[j];if(typeof e.convert==="function"){f=e.convert.call(e.scope||window,f,this)}if(!(j in this.modifiedData)){this.modifiedData[j]=g}this.data[j]=f;this.dirty=true;if(this.initialized){this.fireEvent("datachange",this,j,f)}}},getDefault:function(a){return this.fields[a].defaultValue},has:function(a){return !!this.fields[a]},isDirty:function(){return this.dirty},isModified:function(a){return this.modifiedData.hasOwnProperty(a)},getChanges:function(){var b=this.modifiedData,a={};for(var c in b){if(b.hasOwnProperty(c)){a[c]=this.get(c)}}return a},commit:function(){this.modifiedData={};this.dirty=false},rollback:function(){var a=this.modifiedData;for(var b in a){if(a.hasOwnProperty(b)){this.data[b]=a[b]}}this.modifiedData={};this.dirty=false},setProxy:function(a){this.proxy=a},save:function(k){k=k||{};if(!this.proxy){throw new Error("Kevlar.data.Model::save() error: Cannot save. No configured proxy.")}var a=this.getChanges(),c=this.getAll();var f;if(this.proxy.supportsIncrementalUpdates()){f=a}else{f=c}var g=this.fields;for(var j in g){if(g.hasOwnProperty(j)&&g[j].persist===false){delete f[j];delete a[j]}}if(Kevlar.Object.isEmpty(a,true)){if(typeof k.success==="function"){k.success.call(k.scope||window)}if(typeof k.complete==="function"){k.complete.call(k.scope||window)}return}var e=Kevlar.Object.clone(this.data);var d=function(){this.commit();var l=this.getAll();for(var m in e){if(e.hasOwnProperty(m)&&!Kevlar.Object.isEqual(e[m],l[m])){this.modifiedData[m]=e[m];this.dirty=true}}if(typeof k.success==="function"){k.success.call(k.scope||window)}};var b=function(){if(typeof k.failure==="function"){k.failure.call(k.scope||window)}};var i=function(){if(typeof k.complete==="function"){k.complete.call(k.scope||window)}};var h={async:(typeof k.async==="undefined")?true:k.async,success:d,failure:b,complete:i,scope:this};this.proxy.update(f,h)}});Kevlar.data.RestProxy=Kevlar.extend(Kevlar.data.AbstractProxy,{url:"",create:function(){throw new Error("create() not yet implemented")},read:function(){throw new Error("read() not yet implemented")},update:function(c,b){b=b||{};var a;if(this.wrapperProperty){a={};a[this.wrapperProperty]=c}else{a=c}jQuery.ajax({async:(typeof b.async==="undefined")?true:b.async,url:this.url,type:"PUT",headers:{},contentType:"application/json",data:JSON.stringify(a),success:b.success||Kevlar.emptyFn,error:b.failure||Kevlar.emptyFn,complete:b.complete||Kevlar.emptyFn,context:b.scope||window})},destroy:function(){throw new Error("destroy() not yet implemented")},supportsIncrementalUpdates:function(){return true}});Kevlar.Object={clone:function(d,a){if(typeof a==="undefined"){a=true}var e;if(typeof d!=="object"||d===null){return d}e=new d.constructor();for(var b in d){if(d.hasOwnProperty(b)){e[b]=a?Kevlar.Object.clone(d[b],true):d[b]}}return e},isEqual:function(e,c,d){if(typeof d==="undefined"){d=true}if(typeof e!==typeof c){return false}if(typeof e!=="object"){if(e!==c){return false}}else{if(e===null&&e!==c){return false}var f=Kevlar.Object.objLength;if(f(e)!==f(c)){return false}for(var g in e){if(typeof(e[g])!==typeof(c[g])){return false}if((e[g]===null)!==(c[g]===null)){return false}switch(typeof(e[g])){case"undefined":if(typeof(c[g])!="undefined"){return false}break;case"object":if(e[g]!==null&&c[g]!==null&&(e[g].constructor.toString()!==c[g].constructor.toString()||(d?!Kevlar.Object.isEqual(e[g],c[g]):false))){return false}break;case"function":if(e[g].toString()!=c[g].toString()){return false}break;default:if(e[g]!==c[g]){return false}}}}return true},objLength:function(c){var a=0;for(var b in c){if(c.hasOwnProperty(b)){a++}}return a},isEmpty:function(b){for(var a in b){if(b.hasOwnProperty(a)){return false}}return true}};ui.anim.Animation=Kevlar.extend(Kevlar.util.Observable,{duration:250,easing:"linear",running:false,complete:false,constructor:function(a){Kevlar.apply(this,a);ui.anim.Animation.superclass.constructor.call(this);this.addEvents("beforeanimate","afteranimate");if(!this.target){throw new Error("ui.anim.Animation: Error. No 'target' config provided")}else{if(this.target instanceof ui.Component){this.$target=jQuery(this.target.getEl())}else{this.$target=jQuery(this.target)}}delete this.target;if(!this.to&&!this.effect){throw new Error("ui.anim.Animation: Error. No 'to' or 'effect' config provided")}},start:function(){if(!this.running&&!this.complete&&this.fireEvent("beforeanimate",this)!==false){this.running=true;if(this.from){this.$target.css(this.from)}if(this.effect){var b,a;if(typeof this.effect==="object"){b=this.effect.type;a=this.effect}else{b=this.effect;a={}}this.$target.effect(b,a,this.duration,this.onLastFrame.createDelegate(this))}else{this.$target.animate(this.to,{duration:this.duration,easing:this.easing,complete:this.onLastFrame.createDelegate(this)})}}},isRunning:function(){return this.running},isComplete:function(){return this.complete},end:function(){if(this.running){this.$target.stop(false,true);this.onLastFrame()}},onLastFrame:function(){if(this.running){this.running=false;this.complete=true;if(typeof this.callback==="function"){this.callback.call(this.scope||window,this)}this.fireEvent("afteranimate",this);delete this.$target}}});ui.ButtonSet=Kevlar.extend(ui.Component,[ui.DataControl],{buttonSetTpl:'<input type="radio" id="<%=id%>_<%=num%>" name="buttonSet_<%=id%>" value="<%=value%>" title="<%=text%>" <% if( checked ) { %>checked<% } %>><label for="<%=id%>_<%=num%>"><%=text%></label>',initComponent:function(){this.addEvents("change");this.optionsStore=new ui.utils.OptionsStore(this.options);if(this.optionsStore.getOptions().length===0){throw new Error("Error: The ButtonSet's 'options' was not configured.")}if(typeof this.value==="undefined"){this.value=this.optionsStore.getOptions()[0].value}else{if(this.optionsStore.getByValue(this.value)===null){this.value=this.optionsStore.getOptions()[0].value}}ui.ButtonSet.superclass.initComponent.call(this);ui.DataControl.constructor.call(this)},onRender:function(){ui.ButtonSet.superclass.onRender.apply(this,arguments);this.$el.change(this.onChange.createDelegate(this));this.redrawOptions()},onChange:function(a){this.fireEvent("change",this,this.getValue());this.onDataChange()},setOptions:function(a){this.optionsStore.setOptions(a);this.redrawOptions()},getOptions:function(){return this.optionsStore.getOptions()},redrawOptions:function(){if(this.rendered){var j=this.getOptions(),f=this.buttonSetTpl,h=this.$el,b,d;h.buttonset("destroy");h.empty();var g="";for(b=0,d=j.length;b<d;b++){var c=j[b],e={id:this.id,num:b,text:c.text,value:"radio"+b,checked:(c.value===this.value)};g+=Kevlar.util.tmpl(f,e)}h.append(g);var a=h.find("input");for(b=0,d=a.length;b<d;b++){jQuery(a[b]).data("value",j[b].value)}h.buttonset()}},setValue:function(f){if(typeof f==="undefined"||f===null){return}var e=this.optionsStore.getByValue(f);if(e!==null){this.value=f;if(!this.rendered){this.onChange()}else{var c=this.$el.find(":radio");c.prop("checked",false);for(var d=0,b=c.length;d<b;d++){var a=jQuery(c[d]);if(a.data("value")===f){a.prop("checked",true);a.change();break}}}}},getValue:function(){if(!this.rendered){return this.value}else{return this.$el.find(":radio:checked").data("value")}},setData:function(){this.setValue.apply(this,arguments)},getData:function(){return this.getValue()}});ui.ComponentManager.registerType("ButtonSet",ui.ButtonSet);ui.ColorPicker=Kevlar.extend(ui.Component,[ui.DataControl],{color:"#0000FF",initComponent:function(){this.addEvents("change");this.cls+=" ui-colorPicker";if(this.color){this.color=this.normalizeColorValue(this.color)}ui.ColorPicker.superclass.initComponent.call(this);ui.DataControl.constructor.call(this)},onRender:function(){ui.ColorPicker.superclass.onRender.apply(this,arguments);var a=this.$el;this.$selectedColorEl=jQuery('<div class="ui-colorPicker-selectedColor" style="background-color: '+this.color+'" />').appendTo(a);a.ColorPicker({color:this.color,onShow:function(b){jQuery(b).fadeIn(500);return false},onHide:function(b){jQuery(b).fadeOut(500);return false},onChange:this.onChange.createDelegate(this)})},onChange:function(a,c,b){this.updateStoredColorValue("#"+c)},normalizeColorValue:function(a){if(a.charAt(0)!=="#"){a="#"+a}if(a.length===4){var d=a.substr(1);a="#";for(var b=0;b<3;b++){var c=d[b].toString();a+=c+c}}return a},updateStoredColorValue:function(a){this.color=a;if(this.rendered){this.$selectedColorEl.css("background-color",a)}this.fireEvent("change",this,a);this.onDataChange()},setColor:function(a){a=this.normalizeColorValue(a);if(this.rendered){this.$el.ColorPickerSetColor(a)}this.updateStoredColorValue(a)},getColor:function(){return this.color},onDestroy:function(){if(this.rendered){this.$el.ColorPickerDestroy()}ui.ColorPicker.superclass.onDestroy.apply(this,arguments)},setData:function(){this.setColor.apply(this,arguments)},getData:function(){return this.getColor()}});ui.ComponentManager.registerType("ColorPicker",ui.ColorPicker);ui.containers.AccordionContainer=Kevlar.extend(ui.Container,{activeItem:0,initComponent:function(){this.addEvents("itemchange");this.layout=new ui.layouts.AccordionLayout({activeItem:this.activeItem,icons:this.icons,iconPosition:this.iconPosition,listeners:{itemchange:function(a){this.fireEvent("itemchange",this,a)},scope:this}});ui.containers.AccordionContainer.superclass.initComponent.call(this)},setActiveItem:function(a){this.getLayout().setActiveItem(a)},getActiveItem:function(){return this.getLayout().getActiveItem()},getActiveItemIndex:function(){return this.getLayout().getActiveItemIndex()}});ui.ComponentManager.registerType("Accordion",ui.containers.AccordionContainer);ui.containers.CardsContainer=Kevlar.extend(ui.Container,{activeItem:0,initComponent:function(){this.addEvents("cardchange");this.layout=new ui.layouts.CardsLayout({activeItem:this.activeItem,listeners:{cardchange:function(a){this.fireEvent("cardchange",this,a)},scope:this}});ui.containers.CardsContainer.superclass.initComponent.call(this)},setActiveItem:function(a){this.getLayout().setActiveItem(a)},getActiveItem:function(){return this.getLayout().getActiveItem()},getActiveItemIndex:function(){return this.getLayout().getActiveItemIndex()}});ui.ComponentManager.registerType("Cards",ui.containers.CardsContainer);ui.containers.ColumnsContainer=Kevlar.extend(ui.Container,{initComponent:function(){this.layout=new ui.layouts.ColumnsLayout();ui.containers.ColumnsContainer.superclass.initComponent.call(this)}});ui.ComponentManager.registerType("Columns",ui.containers.ColumnsContainer);ui.containers.SectionContainer=Kevlar.extend(ui.Container,{title:"",initComponent:function(){this.cls+=" dialog-section";ui.containers.SectionContainer.superclass.initComponent.call(this)},onRender:function(){ui.containers.SectionContainer.superclass.onRender.apply(this,arguments);var b=jQuery('<div class="dialog-section-inner" />');if(this.title){var a=jQuery('<div class="dialog-section-title">'+this.title+"</div>").prependTo(b);if(this.titleStyle){a.css(this.titleStyle)}}this.$contentEl=jQuery('<div class="dialog-section-content" />').appendTo(b);b.appendTo(this.$el)},getContentTarget:function(){return this.$contentEl}});ui.ComponentManager.registerType("Section",ui.containers.SectionContainer);ui.containers.TabsContainer=Kevlar.extend(ui.Container,{initComponent:function(){this.addEvents("tabchange");this.layout=new ui.layouts.TabsLayout({activeTab:this.activeTab,listeners:{tabchange:this.onTabChange,scope:this}});ui.containers.TabsContainer.superclass.initComponent.call(this)},setActiveTab:function(a){this.getLayout().setActiveTab(a)},getActiveTab:function(){this.getLayout().getActiveTab()},getActiveTabIndex:function(){this.getLayout().getActiveTabIndex()},onTabChange:function(a,b,c){this.fireEvent("tabchange",this,b,c)}});ui.ComponentManager.registerType("Tabs",ui.containers.TabsContainer);ui.Dialog=Kevlar.extend(ui.Container,{autoDestroy:true,autoOpen:false,modal:false,overlay:true,x:"center",y:"center",height:"auto",width:"auto",minHeight:10,minWidth:"auto",title:"",closeButton:true,closeOnEscape:true,buttons:[],initComponent:function(){this.dialogHeight=this.height;this.height=undefined;this.dialogWidth=this.width;this.width=undefined;this.dialogMinHeight=this.minHeight;this.minHeight=undefined;this.dialogMinWidth=this.minWidth;this.minWidth=undefined;this.dialogMaxHeight=this.maxHeight;this.maxHeight=undefined;this.dialogMaxWidth=this.maxWidth;this.maxWidth=undefined;this.addEvents("beforeopen","open","beforeclose","close","keypress");this.cls+=" dialog-content";this.setTitle(this.title);var a=false,b=this.footer;if(Kevlar.isString(b)||Kevlar.isElement(b)||Kevlar.isJQuery(b)){a=true}this.footerContainer=new ui.Container({cls:"dialog-bottom-content-left",style:{display:"inline-block"},contentEl:(a)?b:undefined,items:(a)?undefined:b});this.buttonsContainer=new ui.Container({defaultType:"Button",cls:"dialog-bottom-content-right",style:{display:"inline-block"},items:this.buttons});this.bottomBarContainer=new ui.Container({cls:"dialog-bottom-content ui-corner-all",hidden:true,items:[this.footerContainer,this.buttonsContainer]});ui.Dialog.superclass.initComponent.call(this);if(this.autoOpen){this.open()}},onRender:function(){ui.Dialog.superclass.onRender.apply(this,arguments);this.$dialog=jQuery("<div />");this.$contentContainer=this.$el.appendTo(this.$dialog);if(typeof this.dialogMinWidth!=="undefined"){this.$contentContainer.css("min-width",this.dialogMinWidth)}if(typeof this.dialogMinHeight!=="undefined"){this.$contentContainer.css("min-height",this.dialogMinHeight)}this.bottomBarContainer.render(this.$dialog);this.$dialog.dialog({dialogClass:"jux-dialog jux "+this.cls,title:this.title,modal:this.modal,draggable:true,autoOpen:false,resizable:false,closeOnEscape:false,minWidth:0,minHeight:0,width:this.dialogWidth,height:this.dialogHeight,dragStop:this.onDragStop.createDelegate(this)});var a=this.$dialogOuter=this.$dialog.dialog("widget");a.wrapInner('<div class="dialog-innerWrap" />');this.$dialogInner=a.find(".dialog-innerWrap");var d=a.find("div.ui-dialog-titlebar");var c=d.find("a.ui-dialog-titlebar-close");c.remove();if(this.closeButton===true){this.closeButton=new ui.toolButtons.CloseButton({handler:function(){this.close()},scope:this})}if(this.closeButton instanceof ui.Button){this.closeButton.render(d);this.closeButton.getEl().addClass("ui-dialog-titlebar-close")}this.$contentContainer.bind("keypress",this.onKeyPress.createDelegate(this));var b=new Kevlar.util.DelayedTask(function(){this.onWindowResize()},this);this.windowResizeHandler=function(){b.delay(150)};jQuery(window).bind("resize",this.windowResizeHandler)},open:function(){if(this.fireEvent("beforeopen",this)!==false){if(!this.rendered){this.render(document.body)}this.$dialog.dialog("open");if(this.modal===true){this.$overlayEl=jQuery("body div.ui-widget-overlay:last");if(this.overlay===false){this.$overlayEl.css("opacity",0)}}this.show();if(this.footer||this.buttons.length>0){this.bottomBarContainer.show()}this.resizeContentContainer();this.setPosition(this.x,this.y);this.onOpen();this.fireEvent("open",this)}},onOpen:Kevlar.emptyFn,isOpen:function(){return this.rendered&&this.$dialog.dialog("isOpen")},getHeight:function(){if(this.isOpen()){return this.$dialog.dialog("widget").outerHeight()}else{return 0}},getWidth:function(){if(this.isOpen()){return this.$dialog.dialog("widget").outerWidth()}else{return 0}},setTitle:function(b){if(b instanceof ui.Component){var a=document.createDocumentFragment();b.render(a);b=b.getEl()}this.title=b;if(this.$dialog){this.$dialog.dialog("option","title",b)}},setFooter:function(a){if(this.bottomBarContainer.isHidden()){this.bottomBarContainer.show()}this.footerContainer.removeAll();this.footerContainer.getEl().empty();if(a instanceof ui.Component){this.footerContainer.add(a)}else{this.footerContainer.getEl().append(a)}},setButtons:function(a){if(this.bottomBarContainer.isHidden()){this.bottomBarContainer.show()}this.buttonsContainer.removeAll();this.buttonsContainer.add(a)},setPosition:function(a,c){this.x=a;this.y=c;if(this.isOpen()){if(a<0||c<0){var b=jQuery(window);if(a<0){a=b.width()-this.getWidth()-(-a)}if(c<0){c=b.height()-this.getHeight()-(-c)}}this.$dialog.dialog("option","position",[a,c])}},getPosition:function(){if(!this.isOpen()){return{x:0,y:0,left:0,top:0,right:0,bottom:0}}else{var f=jQuery(window),a=this.$dialog.dialog("widget").position(),e=a.left,d=a.top,c=f.width()-(a.left+this.getWidth()),b=f.height()-(a.top+this.getHeight());return{x:e,y:d,left:e,top:d,right:c,bottom:b}}},resizeContentContainer:function(){if(this.isOpen()){var e=jQuery(window),b=this.$dialog.dialog("widget"),c=this.$dialogInner,m=this.$dialog,d=b.find("div.ui-dialog-titlebar"),f=this.bottomBarContainer.getEl(),a=this.$contentContainer;var j=function(r){return{height:parseInt(r.css("marginTop"),10)+parseInt(r.css("borderTopWidth"),10)+parseInt(r.css("paddingTop"),10)+parseInt(r.css("marginBottom"),10)+parseInt(r.css("borderBottomWidth"),10)+parseInt(r.css("paddingBottom"),10),width:parseInt(r.css("marginLeft"),10)+parseInt(r.css("borderLeftWidth"),10)+parseInt(r.css("paddingLeft"),10)+parseInt(r.css("marginRight"),10)+parseInt(r.css("borderRightWidth"),10)+parseInt(r.css("paddingRight"),10)}};var i=j(b),p=j(c),l=j(m),q=i.height+p.height+l.height+d.outerHeight(true)+f.outerHeight(true),h=i.width+p.width+l.width,g=Math.min(+this.dialogMaxHeight||Number.POSITIVE_INFINITY,e.height()-20),k=Math.min(+this.dialogMaxWidth||Number.POSITIVE_INFINITY,e.width()-20),n=g-q,o=k-h;b.css("maxHeight",Math.max(g-i.height,0));b.css("maxWidth",Math.max(k-i.width,0));c.css("maxHeight",Math.max(g-i.height-p.height,0));c.css("maxWidth",Math.max(k-i.width-p.width,0));a.css("maxHeight",Math.max(n,0));a.css("maxWidth",Math.max(o,0));if(this.masked){this.mask()}}},onWindowResize:function(){this.resizeContentContainer();this.setPosition(this.x,this.y)},onDragStop:function(b,c){var a=c.position;this.x=a.left;this.y=a.top},onKeyPress:function(a){this.fireEvent("keypress",this,a);if(this.closeOnEscape&&a.keyCode===jQuery.ui.keyCode.ESCAPE){this.close()}},close:function(){if(this.rendered&&this.fireEvent("beforeclose",this)!==false){this.onBeforeClose();if(this.modal&&this.overlay===false){this.$overlayEl.css("opacity","")}this.$overlayEl=null;this.$dialog.dialog("close");this.onClose();this.fireEvent("close",this);if(this.autoDestroy){this.destroy()}}},onBeforeClose:Kevlar.emptyFn,onClose:Kevlar.emptyFn,onDestroy:function(){if(this.isOpen()){this.close()}this.bottomBarContainer.destroy();if(this.rendered){jQuery(window).unbind("resize",this.windowResizeHandler);this.$dialog.dialog("destroy");this.$dialog.unbind()}ui.Dialog.superclass.onDestroy.apply(this,arguments)},getMaskTarget:function(){return this.$dialogInner},cascade:function(){ui.Dialog.superclass.cascade.apply(this,arguments);this.bottomBarContainer.cascade.apply(this.bottomBarContainer,arguments)}});ui.Dialog=Kevlar.extend(ui.AbstractOverlay,{modal:true,overlay:true,x:"center",y:"center",title:"",closeButton:true,initComponent:function(){this.addEvents("keypress");this.cls+=" ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable";this.setTitle(this.title);var a=false,b=this.footer;if(Kevlar.isString(b)||Kevlar.isElement(b)||Kevlar.isJQuery(b)){a=true}this.footerContainer=new ui.Container({cls:"dialog-bottom-content-left",style:{display:"inline-block"},contentEl:(a)?b:undefined,items:(a)?undefined:b});this.buttonsContainer=new ui.Container({defaultType:"Button",cls:"dialog-bottom-content-right",style:{display:"inline-block"},items:this.buttons});this.bottomBarContainer=new ui.Container({cls:"dialog-bottom-content ui-corner-all",hidden:true,items:[this.footerContainer,this.buttonsContainer]});ui.Dialog.superclass.initComponent.call(this)},onRender:function(){ui.Dialog.superclass.onRender.apply(this,arguments);var a=this.$el;a.append(ui.Dialog.renderTpl);this.$dialogInnerEl=a.find("div.dialog-innerWrap");var b=this.$dialogInnerEl.find("div.ui-dialog-titlebar");this.$titleEl=b.find("span.ui-dialog-title");this.$contentEl=a.find("div.ui-dialog-content");if(this.closeButton===true){this.closeButton=new ui.toolButtons.CloseButton({handler:function(){this.close()},scope:this})}if(this.closeButton instanceof ui.Button){this.closeButton.render(b);this.closeButton.getEl().addClass("ui-dialog-titlebar-close")}this.bottomBarContainer.render(this.$el);this.$contentEl.bind("keypress",this.onKeyPress.createDelegate(this))},open:function(){if(this.fireEvent("beforeopen",this)!==false){if(!this.rendered){this.render(document.body)}this.$dialog.dialog("open");if(this.modal===true){this.$overlayEl=jQuery("body div.ui-widget-overlay:last");if(this.overlay===false){this.$overlayEl.css("opacity",0)}}this.show();if(this.footer||this.buttons.length>0){this.bottomBarContainer.show()}this.resizeContentContainer();this.setPosition(this.x,this.y);this.onOpen();this.fireEvent("open",this)}},getHeight:function(){if(this.isOpen()){return this.$el.outerHeight()}else{return 0}},getWidth:function(){if(this.isOpen()){return this.$el.outerWidth()}else{return 0}},setTitle:function(b){if(b instanceof ui.Component){var a=document.createDocumentFragment();b.render(a);b=b.getEl()}this.title=b;if(this.rendered){this.$titleEl.empty().append(b)}},setFooter:function(a){if(this.bottomBarContainer.isHidden()){this.bottomBarContainer.show()}this.footerContainer.removeAll();this.footerContainer.getEl().empty();if(a instanceof ui.Component){this.footerContainer.add(a)}else{this.footerContainer.getEl().append(a)}},setButtons:function(a){if(this.bottomBarContainer.isHidden()){this.bottomBarContainer.show()}this.buttonsContainer.removeAll();this.buttonsContainer.add(a)},getPosition:function(){if(!this.isOpen()){return{x:0,y:0,left:0,top:0,right:0,bottom:0}}else{var f=jQuery(window),a=this.$dialog.dialog("widget").position(),e=a.left,d=a.top,c=f.width()-(a.left+this.getWidth()),b=f.height()-(a.top+this.getHeight());return{x:e,y:d,left:e,top:d,right:c,bottom:b}}},resizeContentContainer:function(){if(this.isOpen()){var d=jQuery(window),a=this.$dialog.dialog("widget"),b=this.$dialogInnerEl,l=this.$dialog,c=a.find("div.ui-dialog-titlebar"),e=this.bottomBarContainer.getEl(),q=this.$contentEl;var i=function(r){return{height:parseInt(r.css("marginTop"),10)+parseInt(r.css("borderTopWidth"),10)+parseInt(r.css("paddingTop"),10)+parseInt(r.css("marginBottom"),10)+parseInt(r.css("borderBottomWidth"),10)+parseInt(r.css("paddingBottom"),10),width:parseInt(r.css("marginLeft"),10)+parseInt(r.css("borderLeftWidth"),10)+parseInt(r.css("paddingLeft"),10)+parseInt(r.css("marginRight"),10)+parseInt(r.css("borderRightWidth"),10)+parseInt(r.css("paddingRight"),10)}};var h=i(a),o=i(b),k=i(l),p=h.height+o.height+k.height+c.outerHeight(true)+e.outerHeight(true),g=h.width+o.width+k.width,f=Math.min(+this.dialogMaxHeight||Number.POSITIVE_INFINITY,d.height()-20),j=Math.min(+this.dialogMaxWidth||Number.POSITIVE_INFINITY,d.width()-20),m=f-p,n=j-g;a.css("maxHeight",Math.max(f-h.height,0));a.css("maxWidth",Math.max(j-h.width,0));b.css("maxHeight",Math.max(f-h.height-o.height,0));b.css("maxWidth",Math.max(j-h.width-o.width,0));q.css("maxHeight",Math.max(m,0));q.css("maxWidth",Math.max(n,0));if(this.masked){this.mask()}}},onWindowResize:function(){this.resizeContentContainer();ui.Dialog.superclass.onWindowResize.apply(this,arguments)},onDragStop:function(b,c){var a=c.position;this.x=a.left;this.y=a.top},onKeyPress:function(a){this.fireEvent("keypress",this,a);if(this.closeOnEscape&&a.keyCode===jQuery.ui.keyCode.ESCAPE){this.close()}},close:function(){if(this.fireEvent("beforeclose",this)!==false){this.onBeforeClose();if(this.modal&&this.overlay===false){this.$overlayEl.css("opacity","")}this.$overlayEl=null}},onBeforeClose:Kevlar.emptyFn,onClose:Kevlar.emptyFn,onDestroy:function(){if(this.isOpen()){this.close()}this.bottomBarContainer.destroy();if(this.rendered){jQuery(window).unbind("resize",this.windowResizeHandler);this.$dialog.dialog("destroy");this.$dialog.unbind()}ui.Dialog.superclass.onDestroy.apply(this,arguments)},getMaskTarget:function(){return this.$dialogInnerEl},cascade:function(){ui.Dialog.superclass.cascade.apply(this,arguments);this.bottomBarContainer.cascade.apply(this.bottomBarContainer,arguments)}});Kevlar.apply(ui.Dialog,{renderTpl:['<div class="dialog-innerWrap">','<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">','<span class="ui-dialog-title"></span>',"</div>",'<div class="ui-dialog-content ui-widget-content" scrolltop="0" scrollleft="0" />',"</div>"].join("")});ui.FieldSet=Kevlar.extend(ui.Container,{title:"",elType:"fieldset",initComponent:function(){this.cls+=" dialog-fieldSet";ui.FieldSet.superclass.initComponent.call(this)},onRender:function(){ui.FieldSet.superclass.onRender.apply(this,arguments);this.$legendEl=jQuery("<legend>"+this.title+"</legend>").appendTo(this.$el)},setTitle:function(a){if(!this.rendered){this.title=a}else{this.$legendEl.empty().append(a)}}});ui.ComponentManager.registerType("FieldSet",ui.FieldSet);ui.formFields.CheckboxField=Kevlar.extend(ui.formFields.AbstractField,{checkboxLabel:"",onRender:function(){ui.formFields.CheckboxField.superclass.onRender.apply(this,arguments);this.$inputEl=jQuery('<input type="checkbox" class="checkbox" id="'+this.inputId+'" name="'+this.inputName+'"'+(this.value?" checked":"")+" />").appendTo(this.$inputContainerEl);this.$checkboxLabelEl=jQuery('<label for="'+this.inputId+'" class="dialog-formField-label" />&nbsp;'+(this.checkboxLabel||"")).appendTo(this.$inputContainerEl);this.$inputEl.bind({change:function(){this.onChange(this.getValue())}.createDelegate(this)})},setValue:function(a){if(!this.rendered){this.value=a}else{this.$inputEl.prop("checked",!!a)}},getValue:function(){if(!this.rendered){return !!this.value}else{return this.$inputEl.prop("checked")}}});ui.ComponentManager.registerType("Checkbox",ui.formFields.CheckboxField);ui.ComponentManager.registerType("Boolean",ui.formFields.CheckboxField);ui.formFields.DateField=Kevlar.extend(ui.formFields.TextField,{initComponent:function(){ui.formFields.DateField.superclass.initComponent.apply(this,arguments);this.emptyText=this.handleDateValue(this.emptyText);this.value=this.handleDateValue(this.value)},onRender:function(a){ui.formFields.DateField.superclass.onRender.apply(this,arguments);this.$inputEl.datepicker({dateFormat:"mm/dd/yy"})},setValue:function(a){a=this.handleDateValue(a);ui.formFields.DateField.superclass.setValue.call(this,a)},setEmptyText:function(a){a=this.handleDateValue(a);ui.formFields.DateField.superclass.setEmptyText.call(this,a)},handleDateValue:function(a){return(a==="now")?jQuery.datepicker.formatDate("mm/dd/yy",new Date()):a},onDestroy:function(){if(this.rendered){this.$inputEl.datepicker("destroy")}ui.formFields.DateField.superclass.onDestroy.apply(this,arguments)}});ui.ComponentManager.registerType("Date",ui.formFields.DateField);ui.formFields.DateTimeField=Kevlar.extend(ui.formFields.TextField,{initComponent:function(){ui.formFields.DateTimeField.superclass.initComponent.apply(this,arguments);this.emptyText=this.handleDateValue(this.emptyText);this.value=this.handleDateValue(this.value)},onRender:function(a){ui.formFields.DateTimeField.superclass.onRender.apply(this,arguments);this.$inputEl.datetimeEntry({datetimeFormat:"Y/O/D H:M"})},setValue:function(a){a=this.handleDateValue(a);ui.formFields.DateTimeField.superclass.setValue.call(this,a)},setEmptyText:function(a){a=this.handleDateValue(a);ui.formFields.DateTimeField.superclass.setEmptyText.call(this,a)},handleDateValue:function(a){return(a==="now")?new Date():a},onDestroy:function(){if(this.rendered){this.$inputEl.datetimeEntry("destroy")}ui.formFields.DateTimeField.superclass.onDestroy.apply(this,arguments)}});ui.ComponentManager.registerType("DateTime",ui.formFields.DateTimeField);ui.formFields.DropdownField=Kevlar.extend(ui.formFields.WrappedInputField,{menuCls:"",menuCollisionStrategy:"flip",optionsMenuOpen:false,initComponent:function(){ui.formFields.DropdownField.superclass.initComponent.call(this);this.optionsStore=new ui.utils.OptionsStore(this.options);if(this.optionsStore.getOptions().length===0){throw new Error("Error: 'options' not provided to DropdownField configuration, or a generating 'options' function didn't return any options.")}this.initValue()},initValue:function(){if(typeof this.value==="undefined"){this.value=this.optionsStore.getOptions()[0].value}else{if(this.optionsStore.getByValue(this.value)===null){this.value=this.optionsStore.getOptions()[0].value}}},onRender:function(a){ui.formFields.DropdownField.superclass.onRender.apply(this,arguments);var c=this.$inputContainerEl,b=ui.formFields.DropdownField.dropdownRenderTpl,f=this.getValue(),d=this.optionsStore.getByValue(f);var e=Kevlar.util.tmpl(b,{inputName:this.inputName,initialValue:f,optionText:d.text,optionClass:(d.cls)?d.cls:"",optionStyles:(d.style)?Kevlar.CSS.hashToString(d.style):""});c.append(e);this.$inputEl=c.find('input[name="'+this.inputName+'"]');this.$dropdownContainer=c.find("div.ui-dropdownField");this.$selectText=this.$dropdownContainer.find("div.ui-dropdownField-selectText");this.$openButton=this.$dropdownContainer.find("div.ui-dropdownField-openButton");this.$selectText.click(this.onDropdownClick.createDelegate(this));this.$openButton.click(this.onDropdownClick.createDelegate(this));this.$optionsMenu=jQuery('<ul class="ui-dropdownField-menu '+this.menuCls+'" />').hide().appendTo(document.body);this.redrawOptions();this.documentClickHandler=this.onDocumentClick.createDelegate(this);jQuery(document).bind("mousedown",this.documentClickHandler)},onDocumentClick:function(b){if(this.optionsMenuOpen){var c=jQuery(b.target).parents().andSelf(),g=this.$dropdownContainer[0],f=this.$optionsMenu[0],e=false;for(var d=0,a=c.length;d<a;d++){if(c[d]===g||c[d]===f){e=true;break}}if(!e){this.hideOptionsMenu()}}},onDropdownClick:function(a){a.preventDefault();this.toggleOptionsMenu();var c=this.$optionsMenu,b=jQuery("a.selected",c).offset().top-c.offset().top;c.animate({scrollTop:b})},onOptionClick:function(a){a.preventDefault();var c=jQuery(a.target),b=this.getValue(),d=c.data("value");if(b!==d){this.setValue(d);this.onChange(this.getValue())}this.hideOptionsMenu()},setOptions:function(a){this.optionsStore.setOptions(a);this.redrawOptions()},getOptions:function(){return this.optionsStore.getOptions()},redrawOptions:function(){if(this.rendered){var j=this.getOptions(),h=j.length,f=this.$optionsMenu,e=ui.formFields.DropdownField.optionsMenuRenderTpl,b=this.getValue(),a,c;f.empty();var g="";for(a=0;a<h;a++){c=j[a];g+=Kevlar.util.tmpl(e,{anchorClass:(c.cls||"")+((c.value===b)?" selected":""),anchorStyle:(c.style)?Kevlar.CSS.hashToString(c.style):"",text:c.text})}f.append(g);var d=f.find("a");for(a=0;a<h;a++){jQuery(d[a]).data("value",j[a].value)}f.find("a").click(this.onOptionClick.createDelegate(this))}},showOptionsMenu:function(){this.optionsMenuOpen=true;this.$optionsMenu.show();this.$optionsMenu.width(this.$selectText.width());this.$optionsMenu.position({my:"left top",at:"left bottom",of:this.$selectText,collision:this.menuCollisionStrategy})},hideOptionsMenu:function(a){this.optionsMenuOpen=false;this.$optionsMenu.hide()},toggleOptionsMenu:function(){if(this.optionsMenuOpen){this.hideOptionsMenu()}else{this.showOptionsMenu()}},setValue:function(h){if(typeof h==="undefined"||h===null){return}var e=this.optionsStore.getByValue(h);if(e!==null){this.value=h;if(this.rendered){var b=jQuery('<div class="'+e.cls+'" style="'+(e.style?Kevlar.CSS.hashToString(e.style):"")+'">'+e.text+"</div>");this.$selectText.empty().append(b);var g=this.$optionsMenu;g.find("a.selected").removeClass("selected");var c=g.find("a");for(var d=0,a=c.length;d<a;d++){var f=jQuery(c[d]);if(f.data("value")===h){f.addClass("selected");break}}this.$inputEl.val(h)}}},getValue:function(){return this.value},setText:function(b){var a=this.optionsStore.getByText(b);if(a){this.setValue(a.value)}},getText:function(){var a=this.optionsStore.getByValue(this.getValue());return a.text},onDestroy:function(){if(this.rendered){jQuery(document).unbind("mousedown",this.documentClickHandler);this.$optionsMenu.remove()}ui.formFields.DropdownField.superclass.onDestroy.call(this)}});Kevlar.apply(ui.formFields.DropdownField,{dropdownRenderTpl:['<input type="hidden" name="<%= inputName %>" value="<%= initialValue %>" />','<div class="ui-dropdownField">','<div class="ui-dropdownField-selectText">','<div class="<%= optionClass %>" style="<%= optionStyles %>"><%= optionText %></div>',"</div>",'<div class="ui-dropdownField-openButton" />',"</div>"].join(" "),optionsMenuRenderTpl:["<li>",'<a href="#" class="<%= anchorClass %>" style="<%= anchorStyle %>"><%= text %></a>',"</li>"].join(" ")});ui.ComponentManager.registerType("Dropdown",ui.formFields.DropdownField);ui.formFields.HiddenField=Kevlar.extend(ui.formFields.AbstractField,{initComponent:function(){this.label="";this.help="";this.hidden=true;ui.formFields.HiddenField.superclass.initComponent.call(this)},onRender:function(a){ui.formFields.HiddenField.superclass.onRender.apply(this,arguments);this.$inputEl=jQuery('<input type="hidden" id="'+this.inputId+'" name="'+this.inputName+'" value="'+(this.value||"")+'" />').appendTo(this.$inputContainerEl)},setValue:function(a){if(!this.rendered){this.value=a}else{this.$inputEl.val(a)}},getValue:function(){if(!this.rendered){return this.value}else{return this.$inputEl.val()}}});ui.ComponentManager.registerType("Hidden",ui.formFields.HiddenField);ui.formFields.LinkTextField=Kevlar.extend(ui.formFields.TextField,{initComponent:function(){this.cls+=" linkTextField";this.linkPickerOverlay=new ui.components.LinkPickerOverlay();ui.formFields.LinkTextField.superclass.initComponent.call(this)},onRender:function(a){ui.formFields.LinkTextField.superclass.onRender.apply(this,arguments);this.linkPickerOverlay.setAnchor({element:this.$inputEl,offset:"0 10"});this.$linkButton=jQuery('<button class="linkTextField-linkButton">Link</button>').button();this.$linkButton.appendTo(this.$inputContainerEl);this.$linkButton.bind({click:function(){this.linkPickerOverlay.open()}.createDelegate(this)})},setValue:function(c){if(typeof c==="string"){c={text:c}}if(!this.rendered){this.value=c}else{var b=c||{},d=b.text||"";this.$inputEl.val(d);var a=this.getDefaultValue();if(typeof a==="object"&&d===a.text){this.$inputEl.addClass("ui-hint-text")}else{this.$inputEl.removeClass("ui-hint-text")}this.linkPickerOverlay.setState({url:b.url,pageid:b.pageid})}},getValue:function(){var a={};if(!this.rendered){Kevlar.apply(a,typeof this.value==="string"?{text:this.value}:this.value)}else{var b=this.linkPickerOverlay.getState();a.url=b.url;a.pageid=b.pageid;a.target=b.target;a.text=this.$inputEl.val()}return a},onDestroy:function(){this.linkPickerOverlay.destroy();ui.formFields.LinkTextField.superclass.onDestroy.apply(this,arguments)}});ui.ComponentManager.registerType("Link",ui.formFields.LinkTextField);ui.ComponentManager.registerType("LinkTextField",ui.formFields.LinkTextField);ui.formFields.RadioField=Kevlar.extend(ui.formFields.AbstractField,{stacked:false,radioTpl:['<input type="radio" id="<%= name %>-<%= num %>" name="<%= name %>" class="radio" value="<%= inputValue %>" <% if( checked ) { %>checked<% } %>>','<label for="<%= name %>-<%= num %>" ><%= text %></label>'].join(""),initComponent:function(){this.optionsStore=new ui.utils.OptionsStore(this.options);if(this.optionsStore.getOptions().length===0){throw new Error("Error: The ButtonSet's 'options' was not configured.")}if(typeof this.value==="undefined"){this.value=this.optionsStore.getOptions()[0].value}else{if(this.optionsStore.getByValue(this.value)===null){this.value=this.optionsStore.getOptions()[0].value}}ui.formFields.RadioField.superclass.initComponent.call(this);if(!this.inputName){throw new Error("Error: RadioField must have a valid inputName. Make sure that the inputName and inputId configs have not been set to an empty string or other falsy value.")}},onRender:function(a){ui.formFields.RadioField.superclass.onRender.apply(this,arguments);var l=this.optionsStore.getOptions(),c=this.radioTpl,h=this.inputName,j=this.$inputContainerEl,g=this.stacked,b=this.value;var k="";for(var d=0,f=l.length;d<f;d++){var e=l[d];k+=Kevlar.util.tmpl(c,{name:h,num:d,inputValue:e.value,text:e.text,checked:(b===e.value)})+(g?"<br />":"")}j.append(k);j.bind({change:function(){this.onChange(this.getValue())}.createDelegate(this)})},setValue:function(b){var a=this.optionsStore.getByValue(b);if(a!==null){if(!this.rendered){this.value=b}else{this.$inputContainerEl.find(":radio[value="+b+"]").prop("checked",true)}}},getValue:function(){if(!this.rendered){return this.value}else{return this.$inputContainerEl.find(":radio:checked").val()}}});ui.ComponentManager.registerType("Radio",ui.formFields.RadioField);ui.formFields.TextAreaField=Kevlar.extend(ui.formFields.TextField,{autoGrow:false,autoGrowMimicStyles:["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight"],onRender:function(){ui.formFields.TextAreaField.superclass.onRender.apply(this,arguments);if(this.autoGrow){var a=this.autoGrowMimicStyles,g=this.$inputEl,f=jQuery("<div />").css({position:"absolute",display:"none","word-wrap":"break-word"}),c=parseInt(g.css("line-height"),10)||parseInt(g.css("font-size"),10),e=parseInt(g.css("height"),10)||c*3,d=parseInt(g.css("max-height"),10)||Number.MAX_VALUE;if(d<0){d=Number.MAX_VALUE}g.css("resize","none");this.autoGrowComputedStyles={lineHeight:c,minHeight:e,maxHeight:d};f.appendTo(g.parent());var b=a.length;while(b--){f.css(a[b],g.css(a[b]))}g.css("minHeight",e);g.css("overflow","hidden");g.bind("cut paste",function(){this.updateAutoGrowHeight()}.createDelegate(this));this.autoGrowPasteHandler=function(){this.updateAutoGrowHeight.defer(250,this)}.createDelegate(this);g.live("input",this.autoGrowPasteHandler);g.live("paste",this.autoGrowPasteHandler);this.$autoGrowTwinDiv=f;this.updateAutoGrowHeight()}},createInputEl:function(){return jQuery('<textarea id="'+this.inputId+'" name="'+this.inputName+'">'+(this.value||"")+"</textarea>")},setHeightAndOverflow:function(a,d){var c=this.$inputEl,b=Math.floor(parseInt(a,10));if(c.height()!=b){c.css({height:b+"px",overflow:d})}},updateAutoGrowHeight:function(){if(this.rendered){var f=this.$inputEl,e=this.$autoGrowTwinDiv,d=this.autoGrowComputedStyles;var c=f.val().replace(/&/g,"&amp;").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />");var b=e.html().replace(/<br>/ig,"<br />");if(c+"&nbsp;"!=b){e.html(c+"&nbsp;");if(Math.abs(e.height()+d.lineHeight-f.height())>3){var a=e.height()+d.lineHeight;if(a>=d.maxHeight){this.setHeightAndOverflow(d.maxHeight,"auto")}else{if(a<=d.minHeight){this.setHeightAndOverflow(d.minHeight,"hidden")}else{this.setHeightAndOverflow(a,"hidden")}}}}}},setValue:function(){ui.formFields.TextAreaField.superclass.setValue.apply(this,arguments);if(this.autoGrow){this.updateAutoGrowHeight()}},onChange:function(){ui.formFields.TextAreaField.superclass.onChange.apply(this,arguments);if(this.autoGrow){this.updateAutoGrowHeight()}},onKeyUp:function(a){ui.formFields.TextAreaField.superclass.onKeyUp.apply(this,arguments);if(this.autoGrow){this.updateAutoGrowHeight()}},onBlur:function(){ui.formFields.TextAreaField.superclass.onBlur.apply(this,arguments);if(this.autoGrow){var c=this.$inputEl,b=this.$autoGrowTwinDiv,a=this.autoGrowComputedStyles;if(b.height()<a.maxHeight){if(b.height()>a.minHeight){c.height(b.height())}else{c.height(a.minHeight)}}}},onDestroy:function(){if(this.autoGrow&&this.rendered){var a=this.$inputEl;a.die("input",this.autoGrowPasteHandler);a.die("paste",this.autoGrowPasteHandler);this.$autoGrowTwinDiv.remove()}ui.formFields.TextAreaField.superclass.onDestroy.apply(this,arguments)}});ui.ComponentManager.registerType("TextArea",ui.formFields.TextAreaField);ui.formFields.TextField.AbstractBehavior=Kevlar.extend(Object,{onRender:Kevlar.emptyFn,onSetValue:Kevlar.emptyFn,onChange:Kevlar.emptyFn,onFocus:Kevlar.emptyFn,onBlur:Kevlar.emptyFn,onKeyDown:Kevlar.emptyFn,onKeyUp:Kevlar.emptyFn,onKeyPress:Kevlar.emptyFn});ui.formFields.TextField.EmptyTextBehavior=Kevlar.extend(ui.formFields.TextField.AbstractBehavior,{emptyTextCls:"ui-hint-text",onSetValue:function(a,b){if(b===a.getEmptyText()){a.getInputEl().addClass(this.emptyTextCls)}else{a.getInputEl().removeClass(this.emptyTextCls)}},onFocus:function(a){a.getInputEl().removeClass(this.emptyTextCls);if(a.getValue()===a.getEmptyText()){a.setValue("")}},onBlur:function(a){if(a.restoreEmptyText&&a.getValue()===""){a.setValue(a.getEmptyText()||"")}}});ui.formFields.TextField.InfieldLabelBehavior=Kevlar.extend(ui.formFields.TextField.AbstractBehavior,{fadeOpacity:0.5,fadeDuration:300,labelShown:true,onRender:function(a){a.getInputContainerEl().append(a.getLabelEl());a.getInputEl().attr("autocomplete","false");this.checkForEmpty(a)},onSetValue:function(a,b){if(a.rendered){this.checkForEmpty(a)}},onChange:function(a){if(a.rendered){this.checkForEmpty(a)}},onFocus:function(a){if(a.rendered&&this.labelShown){this.setLabelOpacity(a.getLabelEl(),this.fadeOpacity)}},onBlur:function(a){if(a.rendered){this.checkForEmpty(a)}},onKeyDown:function(b,a){if(b.rendered){if(a.keyCode===16||a.keyCode===9){return}if(this.labelShown){b.getLabelEl().hide();this.labelShown=false}}},setLabelOpacity:function(a,b){a.stop().animate({opacity:b},this.fadeDuration);this.labelShown=(b>0)},prepLabelForShow:function(a){if(!this.labelShown){a.css({opacity:0}).show()}},checkForEmpty:function(a){var b=a.getLabelEl();if(a.getValue()===""){this.prepLabelForShow(b);this.setLabelOpacity(b,1)}else{this.setLabelOpacity(b,0)}}});ui.Label=Kevlar.extend(ui.Component,{text:"",initComponent:function(){this.cls+=" ui-label";ui.Label.superclass.initComponent.call(this);if(this.help){this.text=this.help}if(this.label){this.text=this.label}},onRender:function(){ui.Label.superclass.onRender.apply(this,arguments);this.$el.append(this.text||"")},setText:function(a){if(!this.rendered){this.text=a}else{this.$el.empty().append(a)}},getText:function(){if(!this.rendered){return this.text||""}else{return this.$el.html()}}});ui.ComponentManager.registerType("Label",ui.Label);ui.ComponentManager.registerType("Introduction",ui.Label);ui.layouts.AccordionLayout=Kevlar.extend(ui.layouts.AbstractLayout,{activeItem:0,icons:false,iconPosition:"left",initLayout:function(){this.addEvents("itemchange");ui.layouts.AccordionLayout.superclass.initLayout.call(this)},onLayout:function(e,f){ui.layouts.AccordionLayout.superclass.onLayout.apply(this,arguments);f.empty().addClass("ui-accordion ui-widget");var a="",d=e.length,c;for(c=0;c<d;c++){var g=e[c].title||"(No title property set on child item)";a+='<h3 class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-top"><a href="#">'+g+"</a></h3>";a+='<div class="ui-accordion-content ui-widget-content ui-helper-reset ui-corner-bottom ui-accordion-content-active" style="display: block;" />'}f.append(a);var b=f.find("div");for(c=0;c<d;c++){e[c].render(b[c]);jQuery(b[c]).css("display","")}f.accordion({active:this.activeItem,fillSpace:true,autoHeight:false,icons:this.icons,change:this.onActiveItemChange.createDelegate(this)});if(this.icons){if(this.iconPosition==="right"){f.addClass("ui-accordion-iconsRight")}else{f.addClass("ui-accordion-iconsLeft")}}},setActiveItem:function(a){if(a instanceof ui.Component){a=this.container.getItemIndex(a)}a=parseInt(a,10);if(!isNaN(a)&&a!==-1){if(!this.container.rendered){this.activeItem=a}else{this.container.getContentTarget().accordion("activate",a)}}},getActiveItem:function(){if(!this.container.rendered){return this.container.getItemAt(this.activeItem)}else{return this.container.getItemAt(this.container.getContentTarget().accordion("option","active"))}},getActiveItemIndex:function(){if(!this.container.rendered){return this.activeItem}else{return this.container.getContentTarget().accordion("option","active")}},onActiveItemChange:function(){var a=this.getActiveItem();a.onShow();this.fireEvent("itemchange",a)}});ui.Container.registerLayout("accordion",ui.layouts.AccordionLayout);ui.layouts.CardsLayout.AbstractTransition=Kevlar.extend(Object,{setActiveItem:function(d,c,b,a){},destroy:function(){this.onDestroy()},onDestroy:function(){}});ui.layouts.CardsLayout.SlideTransition=Kevlar.extend(ui.layouts.CardsLayout.AbstractTransition,{animRunning:false,setActiveItem:function(j,o,k,q){ui.layouts.CardsLayout.SlideTransition.superclass.setActiveItem.apply(this,arguments);if(this.animRunning){this.endAnimation()}if(!o&&k){k.show();return}else{if(o&&!k){o.hide();return}else{if(!o&&!k){return}}}q=q||{};q.direction=q.direction||"right";q.duration=(typeof q.duration!=="undefined")?q.duration:600;if(!this.$viewportEl){this.$viewportEl=jQuery('<div style="margin: 0; padding: 0; border: 0; white-space: nowrap;" />');this.$slideEl=jQuery('<div style="margin: 0; padding: 0; border: 0; white-space: nowrap;" />').appendTo(this.$viewportEl)}var i=this.$viewportEl;var d=this.$slideEl;var b=j.getContainer(),h=b.getEl();var p={height:0,width:0,outerHeight:0,outerWidth:0};var g={height:0,width:0,outerHeight:0,outerWidth:0};var c=o.getEl();p.height=c.height();p.width=c.width();p.outerHeight=c.outerHeight(true);p.outerWidth=c.outerWidth(true);var n=k.getEl(),e=n[0].style.position;n.css("position","absolute");g.height=n.height();g.width=n.width();g.outerHeight=n.outerHeight(true);g.outerWidth=n.outerWidth(true);n.css("position",e);i.css({height:p.outerHeight+"px",width:p.outerWidth+"px",overflow:"visible"}).appendTo(h);d.css({"margin-left":(q.direction==="left")?-g.outerWidth:0});d.append(c);var a=c[0].style;var f={display:a.display,width:a.width,height:a.height,verticalAlign:a.verticalAlign,overflow:a.overflow};c.css("display","inline-block");c.css({width:p.width+"px",height:p.height+"px","vertical-align":"top",overflow:"visible"});if(q.direction==="left"){d.prepend(n)}else{d.append(n)}k.show();var l=n[0].style;var m={display:l.display,width:l.width,height:l.height,verticalAlign:l.verticalAlign,overflow:l.overflow};n.css("display","inline-block");n.css({width:g.width,height:g.height,"vertical-align":"top"});this.animRunning=true;i.animate({height:g.outerHeight+"px",width:g.outerWidth+"px"},{duration:q.duration,step:function(r,s){if(s.prop==="width"){if(q.direction==="left"){d.css("margin-left",-g.outerWidth*(1-s.pos))}else{d.css("margin-left",-p.outerWidth*s.pos)}}if(typeof q.onStep==="function"){q.onStep.call(q.scope||window,s)}},complete:function(){i.detach();c.appendTo(h);c.css({display:f.display,width:f.width,height:f.height,"vertical-align":f.verticalAlign,overflow:f.overflow});o.hide();n.css({display:m.display,width:m.width,height:m.height,"vertical-align":m.verticalAlign,overflow:m.overflow});n.appendTo(h);this.animRunning=false;if(typeof q.onComplete==="function"){q.onComplete.call(q.scope||window)}}.createDelegate(this)})},endAnimation:function(){if(this.$viewportEl){this.$viewportEl.stop(true,true);this.animRunning=false}},onDestroy:function(){if(this.animRunning){this.endAnimation()}if(this.$viewportEl){this.$viewportEl.remove();this.$slideEl.remove()}ui.layouts.CardsLayout.superclass.onDestroy.apply(this,arguments)}});ui.layouts.CardsLayout.SwitchTransition=Kevlar.extend(ui.layouts.CardsLayout.AbstractTransition,{setActiveItem:function(d,c,b,a){ui.layouts.CardsLayout.SwitchTransition.superclass.setActiveItem.apply(this,arguments);if(c){c.hide()}if(b){b.show()}}});ui.layouts.ColumnsLayout=Kevlar.extend(ui.layouts.AbstractLayout,{onLayout:function(e,g){ui.layouts.CardsLayout.superclass.onLayout.apply(this,arguments);g.empty();var b="",d=e.length,c;for(c=0;c<d;c++){var f=e[c].columnWidth;if(typeof f!=="undefined"){if(String(f).lastIndexOf("%")===-1){f+="px"}}else{f="auto"}b+='<div style="float: left; width: '+f+'" />'}b+='<div style="clear: both;" />';g.append(b);var a=g.find("div");for(c=0;c<d;c++){e[c].render(a[c])}}});ui.Container.registerLayout("columns",ui.layouts.ColumnsLayout);ui.layouts.ContainerLayout=Kevlar.extend(ui.layouts.AbstractLayout,{onLayout:function(c,d){ui.layouts.CardsLayout.superclass.onLayout.apply(this,arguments);for(var b=0,a=c.length;b<a;b++){c[b].render(d)}}});ui.Container.registerLayout("container",ui.layouts.ContainerLayout);ui.layouts.TabsLayout=Kevlar.extend(ui.layouts.AbstractLayout,{activeTab:0,initLayout:function(){ui.layouts.TabsLayout.superclass.initLayout.call(this);this.addEvents("tabchange")},onLayout:function(b,p){ui.layouts.TabsLayout.superclass.onLayout.apply(this,arguments);var c=this.activeTab=this.normalizeTabIndex(this.activeTab);p.empty();var j=this.container,h=j.elId,k=j.height,f=(k)?k-40-5:0,g=[],n=[],m,d=b.length;g.push("<ul>");for(m=0;m<d;m++){var e=b[m],s=e.title||"(No title property set on child item)",q=(m!==c)?"ui-tabs-hide":"",a=(f>0)?"height: "+f+"px; overflow-y: auto;":"",r=h+"-tab-"+m;g.push('<li><a href="#',r,'">',s,"</a></li>");n.push('<div id="',r,'" class="',q,'" style="',a,'">','<div class="ui-tabs-panel-inner" />',"</div>")}g.push("</ul>");var o=g.concat(n);p.append(o.join(""));var l=p.find("div.ui-tabs-panel-inner");for(m=0;m<d;m++){b[m].render(l[m])}p.tabs({selected:c,show:this.onTabChange.createDelegate(this)})},normalizeTabIndex:function(c){var a=this.container,b=a.getItems().length;if(typeof c==="string"){c=parseInt(c,10)||-1}if(b===0){c=-1}else{if(typeof c==="number"){c=Math.floor(c);if(c<0){c=0}else{if(c>b-1){c=b-1}}}else{if(c instanceof ui.Component){c=a.getItemIndex(c);if(c===-1){c=0}}else{c=0}}}return c},setActiveTab:function(c){var a=this.container,b=this.activeTab,d=this.activeTab=this.normalizeTabIndex(c);if(!a.rendered){this.fireEvent("tabchange",this,a.getItemAt(d),a.getItemAt(b))}else{a.getContentTarget().tabs("option","selected",d)}},getActiveTab:function(){return this.container.getItemAt(this.getActiveTabIndex())},getActiveTabIndex:function(){return this.normalizeTabIndex(this.activeTab)},onTabChange:function(){var a=this.container,c=this.container.getItemAt(this.activeTab),b=this.activeTab=a.getContentTarget().tabs("option","selected"),d=a.getItemAt(b);d.onShow();this.fireEvent("tabchange",this,d,c)}});ui.Container.registerLayout("tabs",ui.layouts.TabsLayout);ui.Mask=Kevlar.extend(Object,{spinner:true,msg:"",spinnerURL:"assets/spinner2e2d2d.gif",rendered:false,shown:false,constructor:function(b,a){if(Kevlar.isElement(b)){this.$targetEl=jQuery(b)}else{if(Kevlar.isJQuery(b)){if(b.length!==1){throw new Error("If the 'targetEl' argument to the ui.Mask constructor is a jQuery wrapped set, it must contain exactly one element.")}this.$targetEl=b}else{throw new Error("ui.Mask requires the first argument to its constructor to be an HTMLElement, or a jQuery wrapped set")}}this.updateConfig(a)},updateConfig:function(a){delete this.spinner;delete this.msg;Kevlar.apply(this,a);if(this.rendered){this.updateMaskElements()}},initMaskElements:function(){if(!this.rendered){var a=this.$targetEl;this.$maskEl=jQuery('<div class="ui-mask" />').click(function(b){b.stopPropagation()}).appendTo(a);this.$contentEl=jQuery('<div class="ui-mask-content" />').append('<img class="ui-mask-content-spinner" src="'+this.spinnerURL+'" />').click(function(b){b.stopPropagation()}).appendTo(a);this.$msgEl=jQuery('<div class="ui-mask-msg" />').appendTo(this.$contentEl);this.rendered=true;this.updateMaskElements()}},updateMaskElements:function(){if(this.rendered){if(this.spinner){this.$contentEl.addClass("ui-mask-spinnerEnabled")}else{this.$contentEl.removeClass("ui-mask-spinnerEnabled")}this.$msgEl.empty();if(this.msg){this.$contentEl.addClass("ui-mask-contentBox");this.$msgEl.append(this.msg)}else{this.$contentEl.removeClass("ui-mask-contentBox")}}},show:function(){this.initMaskElements();var c=this.$targetEl,d=this.$maskEl,a=this.$contentEl;c.addClass("ui-masked");if(c.css("position")==="static"&&!c.is("body")){c.addClass("ui-masked-relative")}d.show();d.height(c.outerHeight());a.show();this.shown=true;this.repositionContentEl();var b=setInterval(function(){if(this.isShown()){this.repositionContentEl()}else{clearInterval(b)}}.createDelegate(this),100)},repositionContentEl:function(){this.$contentEl.position({my:"center center",at:"center center",of:this.$targetEl})},hide:function(){if(this.isShown()){this.$maskEl.hide();this.$contentEl.hide();this.$targetEl.removeClass("ui-masked").removeClass("ui-masked-relative");this.shown=false}},isShown:function(){return this.shown},destroy:function(){this.hide();if(this.rendered){this.$msgEl.remove();this.$contentEl.remove();this.$maskEl.remove()}}});ui.Overlay=Kevlar.extend(ui.AbstractOverlay,{arrow:null,initComponent:function(){this.cls+=" ui-overlay";this.hidden=true;if(this.value){this.setArrow(this.arrow)}ui.Overlay.superclass.initComponent.call(this)},onRender:function(){ui.Overlay.superclass.onRender.apply(this,arguments);if(this.arrow){this.renderArrow(this.arrow)}},renderArrow:function(b){if(this.$arrow){this.$arrow.remove();this.$arrow=null}if(b){var a=b.offset,c=(a<0?"right: ":"left: ")+Math.abs(a)+"px";this.$arrow=jQuery('<div class="ui-overlay-arrow ui-overlay-arrow-'+b.side+'" style="'+c+'"></div>').prependTo(this.$el)}},open:function(a){a=a||{};if(a.dontCloseOn){this.dontCloseOn=a.dontCloseOn}ui.Overlay.superclass.open.call(this,a);this.docBodyClickHandler=function(b){this.onDocBodyClick(b)}.createDelegate(this);window.setTimeout(function(){jQuery(document.body).bind("mousedown touchend",this.docBodyClickHandler)}.createDelegate(this),10)},setArrow:function(a){this.arrow=a;if(a&&typeof a.offset==="undefined"){a.offset=10}if(this.rendered){this.renderArrow(a)}},setDontCloseOn:function(a){this.dontCloseOn=a},onCollision:function(c,a){ui.Overlay.superclass.onCollision.apply(this,arguments);var d=Kevlar.Object.clone(this.arrow);if(d&&c==="flip"){var b=d.side;if(a.top||a.bottom){if(b==="top"||b==="bottom"){d.side=(b==="top")?"bottom":"top"}if(b==="left"||b==="right"){d.offset*=-1}}if(a.left||a.right){if(b==="left"||b==="right"){d.side=(b==="left")?"right":"top"}if(b==="top"||b==="bottom"){d.offset*=-1}}this.renderArrow(d)}},onDocBodyClick:function(b){var a=jQuery(b.target).parents().andSelf();if(!a.is(this.$el)&&!a.is(this.dontCloseOn)){if(this.fireEvent("beforeblurclose",this,b)!==false){this.close()}}},onBeforeClose:function(){jQuery(document.body).unbind("mousedown",this.docBodyClickHandler).unbind("touchend",this.docBodyClickHandler);this.docBodyClickHandler=null}});ui.plugins.DragAndDropSort=Kevlar.extend(ui.plugins.AbstractPlugin,{itemsSelector:"> *",draggedItem:null,initPlugin:function(a){if(!(a instanceof ui.Container)){throw new Error("error: DragAndDropSort plugin can only be added as a plugin to a ui.Container, or ui.Container subclass")}this.container=a;a.onRender=a.onRender.createSequence(this.onRender,this)},onRender:function(){var a=this.container,b=a.getContentTarget();b.addClass("juxUI-draggable");b.sortable({containment:"parent",tolerance:"pointer",items:this.itemsSelector,start:function(d,e){var c=b.children().index(e.item);this.draggedItem=a.getItems()[c]}.createDelegate(this),beforeStop:function(d,e){var c=b.children().index(e.item);a.insert(this.draggedItem,c);this.draggedItem=null}.createDelegate(this)})}});ui.Slider=Kevlar.extend(ui.Component,[ui.DataControl],{min:0,max:100,step:1,initComponent:function(){this.addEvents("change");this.cls+=" ui-sliderComponent";if(!this.handlePositions){this.handlePositions=[this.min]}else{if(!Kevlar.isArray(this.handlePositions)){this.handlePositions=[this.handlePositions]}}ui.Slider.superclass.initComponent.call(this);ui.DataControl.constructor.call(this)},onRender:function(){ui.Slider.superclass.onRender.apply(this,arguments);var a=this.$el,b=jQuery("<div />").appendTo(a);b.slider({min:this.min,max:this.max,step:this.step,values:this.handlePositions,slide:this.onSlideChange.createDelegate(this)});b.wrapInner('<div class="ui-slider-handleHelper" />');this.$handleHelper=b.find(".ui-slider-handleHelper");this.$handles=b.find(".ui-slider-handle");this.$handles.bind({mousedown:function(){b.width(this.$handleHelper.width())}.createDelegate(this)});b.bind("slidestop",function(){b.width("100%")});this.$sliderEl=b;window.setTimeout(function(){this.sizeHandleHelper()}.createDelegate(this),10)},onShow:function(){ui.Slider.superclass.onShow.apply(this,arguments);this.sizeHandleHelper()},sizeHandleHelper:function(){if(!this.destroyed){var c=this.$sliderEl,d=this.$handleHelper,b=this.$handles,a=b.outerWidth();b.css("margin-left",-a/2);d.width("").width(c.innerWidth()-a)}},onSlideChange:function(a,b){this.handlePositions=b.values;this.notifyOfChange()},notifyOfChange:function(){this.fireEvent("change",this,this.getHandlePositions());this.onDataChange()},setHandlePositions:function(a){if(!Kevlar.isArray(a)){a=[a]}this.handlePositions=a;if(this.rendered){this.$sliderEl.slider("values",a)}this.notifyOfChange()},getHandlePositions:function(){return this.handlePositions},setData:function(){this.setHandlePositions.apply(this,arguments)},getData:function(){return this.getHandlePositions()}});ui.ComponentManager.registerType("Slider",ui.Slider);ui.toolButtons.CloseButton=Kevlar.extend(ui.toolButtons.ToolButton,{tooltip:"Close",initComponent:function(){if(this.size==="tiny"){this.primaryIcon="jux-icon-x-dkgray-sm"}else{if(this.size==="small"){this.primaryIcon="ui-icon-delete"}else{this.primaryIcon="jux-icon-close"}}ui.toolButtons.CloseButton.superclass.initComponent.call(this)}});ui.ComponentManager.registerType("CloseButton",ui.toolButtons.CloseButton);ui.toolButtons.DeleteButton=Kevlar.extend(ui.toolButtons.ToolButton,{tooltip:"Delete",initComponent:function(){if(this.size==="tiny"){this.primaryIcon="jux-icon-x-ltgray-sm"}else{if(this.size==="small"){this.primaryIcon="ui-icon-delete"}else{this.primaryIcon="jux-icon-x-circle-lg"}}ui.toolButtons.DeleteButton.superclass.initComponent.call(this)}});ui.ComponentManager.registerType("DeleteButton",ui.toolButtons.DeleteButton);ui.toolButtons.DownButton=Kevlar.extend(ui.toolButtons.ToolButton,{tooltip:"Move Down",initComponent:function(){if(this.size==="small"){this.primaryIcon="ui-icon-arrowthick-1-s"}else{this.primaryIcon="jux-icon-arrow-circle-s-lg"}ui.toolButtons.DownButton.superclass.initComponent.call(this)}});ui.ComponentManager.registerType("DownButton",ui.toolButtons.DownButton);ui.toolButtons.EditButton=Kevlar.extend(ui.toolButtons.ToolButton,{tooltip:"Edit",initComponent:function(){if(this.size==="small"){this.primaryIcon="ui-icon-pencil"}else{this.primaryIcon="ui-icon-pencil-lg"}ui.toolButtons.EditButton.superclass.initComponent.call(this)}});ui.ComponentManager.registerType("EditButton",ui.toolButtons.EditButton);ui.toolButtons.HideButton=Kevlar.extend(ui.toolButtons.ToolButton,{buttonState:"visible",visibleTooltip:"Hide",hiddenTooltip:"Show",initComponent:function(){if(this.buttonState!=="visible"&&this.buttonState!=="hidden"){throw new Error("Invalid buttonState config. Must be either 'visible' or 'hidden'.")}if(this.size==="small"){this.visibleIconCls="ui-icon-eyeopen";this.hiddenIconCls="ui-icon-eyeclosed"}else{this.visibleIconCls="jux-icon-show-lg";this.hiddenIconCls="jux-icon-hide-lg"}if(this.buttonState==="visible"){this.primaryIcon=this.visibleIconCls;this.tooltip=this.visibleTooltip}else{this.primaryIcon=this.hiddenIconCls;this.tooltip=this.hiddenTooltip}ui.toolButtons.HideButton.superclass.initComponent.call(this)},onClick:function(){this.toggleButtonState();ui.toolButtons.HideButton.superclass.onClick.apply(this,arguments)},toggleButtonState:function(){if(this.buttonState==="visible"){this.setButtonState("hidden")}else{this.setButtonState("visible")}},setButtonState:function(a){if(a!=="visible"&&a!=="hidden"){throw new Error("Invalid buttonState argument. Must be either 'visible' or 'hidden'.")}this.buttonState=a;if(a==="visible"){this.$el.button("option","icons",{primary:this.visibleIconCls,secondary:null});this.$el.attr("title",this.visibleTooltip)}else{this.$el.button("option","icons",{primary:this.hiddenIconCls,secondary:null});this.$el.attr("title",this.hiddenTooltip)}},getButtonState:function(){return this.buttonState}});ui.ComponentManager.registerType("HideButton",ui.toolButtons.HideButton);ui.toolButtons.UpButton=Kevlar.extend(ui.toolButtons.ToolButton,{tooltip:"Move Up",initComponent:function(){if(this.size==="small"){this.primaryIcon="ui-icon-arrowthick-1-n"}else{this.primaryIcon="jux-icon-arrow-circle-n-lg"}ui.toolButtons.UpButton.superclass.initComponent.call(this)}});ui.ComponentManager.registerType("UpButton",ui.toolButtons.UpButton);ui.utils.OptionsStore=Kevlar.extend(Object,{constructor:function(a){this.setOptions(a||[])},setOptions:function(c){if(typeof c==="function"){c=c()}var g=[];if(Kevlar.isObject(c)){for(var b in c){if(c.hasOwnProperty(b)){g.push({text:b,value:c[b]})}}}else{for(var d=0,a=c.length;d<a;d++){var f=c[d],e={};if(typeof f==="object"){e.value=(typeof f.value!=="undefined")?f.value:f.text;e.text=f.text;for(var h in f){if(h!=="text"&&h!=="value"&&f.hasOwnProperty(h)){e[h]=f[h]}}}else{e.value=f;e.text=f}g.push(e)}}this.options=g},getOptions:function(){return this.options},getAtIndex:function(a){return this.options[a]||null},getByValue:function(d){var b=this.options;for(var c=0,a=b.length;c<a;c++){if(b[c].value===d){return b[c]}}return null},getByText:function(d){var b=this.options;for(var c=0,a=b.length;c<a;c++){if(b[c].text===d){return b[c]}}return null}});Kevlar.util.DelayedTask=function(d,c,a){var e=this,f,b=function(){clearInterval(f);f=null;d.apply(c,a||[])};e.delay=function(h,j,i,g){e.cancel();d=j||d;c=i||c;a=g||a;f=setInterval(b,h)};e.cancel=function(){if(f){clearInterval(f);f=null}};e.isPending=function(){return !!f}};Kevlar.util.Html={encode:function(a){return !a?a:String(a).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},decode:function(a){return !a?a:String(a).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},stripTags:function(a){return !a?a:String(a).replace(/<\/?[^>]+>/gi,"")},nl2br:function(a){return a.replace(/\n/gim,"<br />")}};