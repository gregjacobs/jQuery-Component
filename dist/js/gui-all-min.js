/*!
 * jQuery-GUI
 * Version 0.4.0
 *
 * Copyright(c) 2013 Gregory Jacobs.
 * MIT Licensed. http://www.opensource.org/licenses/mit-license.php
 *
 * https://github.com/gregjacobs/jQuery-GUI
 */
/*!
 * jQuery-GUI
 * Copyright(c) 2013 Gregory Jacobs.
 * 
 * MIT Licensed. http://www.opensource.org/licenses/mit-license.php
 * https://github.com/gregjacobs/jQuery-GUI
 */
define("gui/Gui",["Class","jquery","lodash"],function(a,b,c){var d=a.extend(Object,{blankImgUrl:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",constructor:function(){var a=window.navigator.userAgent.toLowerCase();this.isIE=/msie/.test(a)&&!/opera/.test(a)},emptyFn:function(){},getBlankImgUrl:function(){return this.blankImgUrl},getScrollbarSizes:function(){var a;return function(){if(!a){var c=b('<div style="position:absolute;width:100px;height:100px;overflow:scroll;top:-9999px;" />'),d=c[0];c.appendTo("body"),a={width:d.offsetWidth-d.clientWidth,height:d.offsetHeight-d.clientHeight},c.remove()}return a}}(),getScrollbarWidth:function(){return this.getScrollbarSizes().width},getScrollbarHeight:function(){return this.getScrollbarSizes().height},loadImages:function(a,d,e){if(c.isArray(a))for(var f,g=0,h=a.length,i=function(){g++,g>=h&&d.call(e||window)},j=0;h>j;j++)f=new Image,b(f).on("load error",i),f.src=a[j]},loadImage:function(a,b,c){this.loadImages([a],b,c)}});return new d}),define("gui/util/Css",["jquery","lodash","gui/Gui"],function(a,b,c){var d=/\s+/g,e={SIDES_MAP:{t:"top",r:"right",b:"bottom",l:"left"},addCls:function(c,e){c=a.trim(c),e=a.trim(e);var f=c?c.split(d):[],g=e?e.split(d):[];return b.unique(f.concat(g)).join(" ")},removeCls:function(c,e){c=a.trim(c),e=a.trim(e);var f=c?c.split(d):[],g=e?e.split(d):[];return b.without.apply(null,[f].concat(g)).join(" ")},hasCls:function(b,c){if(b=a.trim(b),c=a.trim(c),b&&c){var d=new RegExp("(^| )"+c+"( |$)");return d.test(b)}return!1},mapToString:function(a){var c,d=/([A-Z])/g,e="";return b.forOwn(a,function(a,b){c=b.replace(d,"-$1").toLowerCase(),e+=c+":"+a+";"}),e},updateStyleEl:function(b,d){var e=a(b);if(c.isIE)for(var f=0,g=e.length;g>f;f++)e[f].styleSheet.cssText=d;else e.text(d)},normalizeSizeValue:function(a){return isNaN(+a)||(a+="px"),a},getPadding:function(a,b){return this.sumSides(a,"padding",b)},getMargin:function(a,b){return this.sumSides(a,"margin",b)},getBorderWidth:function(a,b){return this.sumSides(a,"border",b,"width")},getFrameSize:function(a,b){return this.getPadding(a,b)+this.getMargin(a,b)+this.getBorderWidth(a,b)},sumSides:function(b,c,d,e){var f=0,g=this.SIDES_MAP,h=a(b);e=e?"-"+e:"";for(var i=0,j=d.length;j>i;i++){var k=h.css(c+"-"+g[d.charAt(i)]+e),l=parseInt(k,10);isNaN(l)||(f+=l)}return f}};return e}),define("gui/util/Html",["lodash"],function(a){var b={encode:function(a){return a?String(a).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"):a},decode:function(a){return a?String(a).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&nbsp;/g," "):a},stripTags:function(a){return a?String(a).replace(/<[^>]+>/g,""):a},nl2br:function(a){return a.replace(/\n/g,"<br />")},attrMapToString:function(b){var c=[];return a.forOwn(b,function(a,b){c.push(b+'="'+a+'"')}),c.join(" ")}};return b}),define("gui/template/Template",["lodash","Class"],function(a,b){var c=b.extend(Object,{abstractClass:!0,apply:b.abstractMethod});return c}),define("gui/template/LoDash",["lodash","gui/template/Template"],function(a,b){var c=b.extend({compiled:!1,constructor:function(c,d){if(this._super(arguments),c instanceof b)return c;if(d=d||{},a.isString(c)||a.isArray(c))this.tplSource=[].concat(c).join(""),this.tplOptions=a.omit(d,"compiled"),d.compiled&&this.compile();else{if(!c||!c.source)throw new Error("Invalid `tpl` argument to LoDashTpl constructor");this.compiledTplFn=c}},compile:function(){this.compiledTplFn||(this.compiledTplFn=a.template(this.tplSource,null,this.tplOptions))},apply:function(a){return this.compiledTplFn||this.compile(),this.compiledTplFn(a||{})}});return c}),define("gui/Mask",["jquery","lodash","Class","gui/template/Template","gui/template/LoDash","jquery-ui/position"],function(a,b,c,d,e){var f=c.extend(Object,{spinner:!1,msg:"",maskTpl:new e(['<div data-elem="gui-mask-overlay" class="gui-mask-overlay" />','<div data-elem="gui-mask-content" class="gui-mask-content">','<span class="gui-mask-spinner" />','<div data-elem="gui-mask-msg" class="gui-mask-msg" />',"</div>"]),rendered:!1,spinnerVisibleCls:"gui-mask-spinner-visible",msgVisibleCls:"gui-mask-msg-visible",visible:!1,constructor:function(c,f){if(b.isElement(c))this.$targetEl=a(c);else{if(!(c instanceof a))throw new Error("gui.Mask requires the first argument to its constructor to be an HTMLElement, or a jQuery wrapped set");if(1!==c.length)throw new Error("If the 'targetEl' argument to the gui.Mask constructor is a jQuery wrapped set, it must contain exactly one element.");this.$targetEl=c}this.maskTpl instanceof d||(this.maskTpl=new e(this.maskTpl)),this.updateConfig(f)},updateConfig:function(a){delete this.spinner,delete this.msg,b.assign(this,a),this.rendered&&this.updateMaskElements()},initMaskElements:function(){if(!this.rendered){var a=this.$targetEl;a.append(this.maskTpl.apply({}));var c=b.bind(this.onMaskClick,this);this.$overlayEl=a.find('[data-elem="gui-mask-overlay"]').on("click",c),this.$contentEl=a.find('[data-elem="gui-mask-content"]').on("click",c),this.$msgEl=a.find('[data-elem="gui-mask-msg"]'),this.rendered=!0,this.updateMaskElements()}},updateMaskElements:function(){this.rendered&&(this.$contentEl.toggleClass(this.spinnerVisibleCls,this.spinner),this.setMsg(this.msg))},setMsg:function(a){this.msg=a,this.rendered&&(this.$contentEl.toggleClass(this.msgVisibleCls,!!a),this.$msgEl.html(a))},onMaskClick:function(a){a.stopPropagation()},show:function(){if(!this.isVisible()){this.initMaskElements();var a=this.$targetEl,b=this.$overlayEl;this.$contentEl,a.addClass("gui-masked"),"static"!==a.css("position")||a.is("body")||a.addClass("gui-masked-relative"),b.appendTo(a),b.height(a.outerHeight()),this.$contentEl.appendTo(a),this.repositionContentEl();var c=this,d=setInterval(function(){c.isVisible()?(b.height(a.outerHeight()),c.repositionContentEl()):clearInterval(d)},100);this.visible=!0}},repositionContentEl:function(){this.isContentElVisible()&&this.$contentEl.position({my:"center center",at:"center center",of:this.$targetEl})},hide:function(){this.isVisible()&&(this.$overlayEl.detach(),this.$contentEl.detach(),this.$targetEl.removeClass("gui-masked").removeClass("gui-masked-relative"),this.visible=!1)},isVisible:function(){return this.visible},isContentElVisible:function(){return this.spinner||!!this.msg},destroy:function(){this.hide(),this.rendered&&(this.$overlayEl.remove(),this.$contentEl.remove())}});return f}),define("gui/anim/Animation",["require","jquery","lodash","Class","Observable","gui/Component"],function(a,b,c,d,e){var f=d.extend(e,{duration:250,easing:"linear",running:!1,complete:!1,constructor:function(a){c.assign(this,a),this._super(arguments),this.addEvents("beforeanimate","afteranimate","complete")},setTarget:function(a){return this.$target=null,this.target=a,this},resolveTarget:function(){var c=this.$target||null;if(c)return c;var d=this.target;return d&&(c=d instanceof a("gui/Component")?b(d.getEl()):b(d)),delete this.target,this.$target=c},start:function(){var a=this.resolveTarget(),b=this.from,d=this.to,e=this.effect,f=this.duration,g=this.onLastFrame;if(!a)throw new Error("gui.anim.Animation.start(): Error. No `target` config provided");if(!d&&!e)throw new Error("gui.anim.Animation.start(): Error. No `to` or `effect` config provided");if(!this.running&&!this.complete&&this.fireEvent("beforeanimate",this)!==!1)if(this.running=!0,b&&a.css(b),e){var h,i;"object"==typeof e?(h=e.type,i=e):(h=e,i={}),a.effect(h,i,f,c.bind(g,this))}else a.animate(d,{duration:f,easing:this.easing,complete:c.bind(g,this)})},isRunning:function(){return this.running},isComplete:function(){return this.complete},end:function(){this.running&&(this.$target.stop(!1,!0),this.onLastFrame())},onLastFrame:function(){this.running&&(this.running=!1,this.complete=!0,"function"==typeof this.callback&&this.callback.call(this.scope||window,this),this.fireEvent("afteranimate",this),this.fireEvent("complete",this),delete this.$target)}});return f}),define("gui/plugin/Plugin",["lodash","Class","Observable"],function(a,b,c){var d=b.extend(c,{abstractClass:!0,constructor:function(b){a.assign(this,b),this._super(arguments)},init:b.abstractMethod});return d}),define("gui/Component",["require","jquery","lodash","Class","gui/Gui","Observable","gui/util/Css","gui/util/Html","gui/Mask","gui/anim/Animation","gui/plugin/Plugin","gui/template/Template","gui/template/LoDash","gui/ComponentManager"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=d.extend(f,{elType:"div",hidden:!1,baseCls:"gui-component",cls:"",masked:!1,parentContainer:null,rendered:!1,showing:!1,hiding:!1,currentAnimation:null,deferMaskShow:!1,destroying:!1,destroyed:!1,constructor:function(a){c.assign(this,a),this._super(arguments),this.addEvents("render","beforeshow","show","showbegin","aftershow","beforehide","hide","hidebegin","afterhide","beforedestroy","destroy"),this.uuid=this.elId="gui-cmp-"+c.uniqueId(),this.id=this.id||this.uuid,this.plugins=this.plugins||[],c.isArray(this.plugins)||(this.plugins=[this.plugins]),this.initComponent(),this.plugins.length>0&&this.initPlugins(this.plugins),this.renderTo&&(this.render(this.renderTo),delete this.renderTo)},initComponent:e.emptyFn,initPlugins:function(a){if(c.isArray(a))for(var b=0,d=a.length;d>b;b++)this.initPlugins(a[b]);else{if(!(a instanceof k))throw new Error("error: a plugin provided to this Component was not of type gui.plugin.Plugin");a.init(this)}},render:function(a,d){if(!this.destroyed){var e;c.isNumber(d)||c.isString(d)||c.isElement(d)||d instanceof b?(e=d,d={position:e}):(d=d||{},e=d.position);var f=b(a);if("undefined"!=typeof e&&(e="number"==typeof e?f.children().get(e):f.find(e)),this.rendered)e?e[0]!==this.$el[0]&&this.$el.insertBefore(e):this.$el.appendTo(f);else{var i=h.attrMapToString(this.getRenderAttributes());delete this.attr;var j=g.mapToString(this.getRenderStyle());delete this.style;var k=this.renderTpl,n="";k&&(k=k instanceof l?k:new m(k),n=k.apply(this.getRenderTplData()),delete this.renderTpl,delete this.renderTplData);var o=c.compact([this.baseCls,this.componentCls,this.cls]).join(" "),p=["<",this.elType,' id="',this.elId,'" class="',o,'" style="',j,'" ',i,">",n,"</",this.elType,">"].join("");this.$el=b(p),e?this.$el.insertBefore(e):this.$el.appendTo(f),this.rendered=!0,this.onRender(f,d),!this.tpl||this.tpl instanceof l||(this.tpl=new m(this.tpl));var q=this.getContentTarget();if(this.tpl&&!this.updateCalledWithContent){var r=c.assign({},this.getDefaultTplData(),this.tplData);q.append(this.tpl.apply(r))}else this.html&&q.append(this.html),this.contentEl&&q.append(this.contentEl);delete this.tplData,delete this.updateCalledWithContent,delete this.html,delete this.contentEl,this.hidden&&this.$el.hide(),this.masked&&this.mask(this.deferredMaskConfig),this.onAfterRender(f,d),this.fireEvent("render",this),d.deferLayout||this.doLayout()}}},getRenderAttributes:function(){return this.attr||{}},getRenderStyle:function(){var a,b=this.style||{},c=this.width,d=this.height,e=this.minWidth,f=this.minHeight,h=this.maxWidth,i=this.maxHeight,j=g.normalizeSizeValue;return c!==a&&(b.width=j(c)),d!==a&&(b.height=j(d)),e!==a&&(b.minWidth=j(e)),f!==a&&(b.minHeight=j(f)),h!==a&&(b.maxWidth=j(h)),i!==a&&(b.maxHeight=j(i)),b},getDefaultTplData:function(){return{component:this,elId:this.elId,baseCls:this.baseCls,componentCls:this.componentCls}},getRenderTplData:function(){return c.assign({},this.getDefaultTplData(),this.renderTplData||{})},isRendered:function(){return this.rendered},onRender:e.emptyFn,onAfterRender:e.emptyFn,update:function(a){var b=c.isPlainObject(a);if(this.rendered){var d=this.getContentTarget().empty();if(b){var e=c.assign({},this.getDefaultTplData(),a);d.append(this.tpl.apply(e))}else d.append(a)}else b?(this.tplData=a,this.updateCalledWithContent=!1):(delete this.contentEl,this.html=a,this.updateCalledWithContent=!0)},doLayout:function(){this.onComponentLayout()},onComponentLayout:e.emptyFn,updateLayout:function(){for(var a=this;a.parentContainer;)a=a.parentContainer;a.doLayout()},setAttr:function(a,b){return this.rendered?this.$el.attr(a,b):(this.attr=this.attr||{},"object"==typeof a?c.assign(this.attr,a):this.attr[a]=b),this},addCls:function(a){return this.rendered?this.$el.addClass(a):this.cls=g.addCls(this.cls,a),this},removeCls:function(a){return this.rendered?this.$el.removeClass(a):this.cls=g.removeCls(this.cls,a),this},toggleCls:function(a,b){return"undefined"==typeof b?this[this.hasCls(a)?"removeCls":"addCls"](a):this[b?"addCls":"removeCls"](a),this},hasCls:function(a){return this.rendered?this.$el.hasClass(a):g.hasCls(this.cls,a)},setStyle:function(a,b){return this.rendered?this.$el.css(a,b):(this.style=this.style||{},"object"==typeof a?c.assign(this.style,a):this.style[a]=b),this},getContentTarget:function(){return this.getEl()},getUuid:function(){return this.uuid},getId:function(){return this.id},getBaseCls:function(){return this.baseCls},getComponentCls:function(){return this.componentCls},getEl:function(){return this.$el},setSize:function(a,b){"undefined"!=typeof a&&(this.width=a,this.rendered&&this.$el.width(a)),"undefined"!=typeof b&&(this.height=b,this.rendered&&this.$el.height(b))},setWidth:function(a){this.setSize(a,void 0)},getWidth:function(){return this.$el.width()},getInnerWidth:function(){return this.$el.innerWidth()},getOuterWidth:function(a){return this.$el.outerWidth(a||!1)},setHeight:function(a){this.setSize(void 0,a)},getHeight:function(){return this.$el.height()},getInnerHeight:function(){return this.$el.innerHeight()},getOuterHeight:function(a){return this.$el.outerHeight(a||!1)},getConfiguredWidth:function(){return this.width},getConfiguredHeight:function(){return this.height},getPadding:function(a){return g.getPadding(this.$el,a)},getMargin:function(a){return g.getMargin(this.$el,a)},getBorderWidth:function(a){return g.getBorderWidth(this.$el,a)},getFrameSize:function(a){return g.getFrameSize(this.$el,a)},setVisible:function(a){return this[a?"show":"hide"]()},show:function(a){if(!this.hidden||this.fireEvent("beforeshow",this)===!1)return this;if(this.hidden=!1,this.rendered){a=a||{},this.hiding&&this.currentAnimation.end(),this.showing=!0,this.onBeforeShow(a),this.$el.show(),this.onShow(a),this.fireEvent("showbegin",this),this.fireEvent("show",this),this.deferMaskShow&&this.mask(this.deferredMaskConfig);var b=a.anim;if(b){b=c.assign({},b,{target:this});var d=this.currentAnimation=new j(b);d.on("complete",c.partial(this.onShowComplete,a),this),d.start()}else this.onShowComplete(a)}return this},onShowComplete:function(a){this.showing=!1,this.currentAnimation=null,this.onAfterShow(a),this.fireEvent("aftershow",this)},onBeforeShow:e.emptyFn,onShow:e.emptyFn,onAfterShow:e.emptyFn,hide:function(a){if(this.hidden||this.fireEvent("beforehide",this)===!1)return this;if(this.hidden=!0,this.rendered){a=a||{},this.showing&&this.currentAnimation.end(),this.hiding=!0,this.onBeforeHide(a),this.fireEvent("hidebegin",this);var b=a.anim;if(b){b=c.assign({},b,{target:this});var d=this.currentAnimation=new j(b);d.on("complete",c.partial(this.onHideComplete,a),this),d.start()}else this.onHideComplete(a)}return this},onHideComplete:function(a){this.hiding=!1,this.currentAnimation=null,this.$el.hide(),this.onHide(a),this.fireEvent("hide",this),this.onAfterHide(a),this.fireEvent("afterhide",this)},onBeforeHide:e.emptyFn,onHide:e.emptyFn,onAfterHide:e.emptyFn,isHidden:function(a){return this.hidden?!0:this.rendered?a?!this.isDomVisible():!1:a?!0:!1},isVisible:function(a){return!this.isHidden(a)},isDomVisible:function(){if(!this.isRendered())return!1;var a=this.$el;if("none"===a.css("display"))return!1;var b=a.parents(),c=b.length;if(0===c||"html"!==b[c-1].tagName.toLowerCase())return!1;for(var d=0,e=b.length;e>d;d++)if("none"===b.eq(d).css("display"))return!1;return!0},detach:function(){this.rendered&&this.$el.detach()},mask:function(a){a=a||this.maskConfig,this.masked=!0,this.rendered?this.isHidden()?(this.deferMaskShow=!0,this.deferredMaskConfig=a):(this._mask?this._mask.updateConfig(a):this._mask=new i(this.getMaskTarget(),a),this._mask.show(),this.deferMaskShow=!1,delete this.deferredMaskConfig):this.deferredMaskConfig=a},unMask:function(){this.masked=!1,this.deferMaskShow=!1,delete this.deferredMaskConfig,this.rendered&&this._mask&&this._mask.hide()},isMasked:function(){return this.masked},getMaskTarget:function(){return this.getEl()},setParentContainer:function(a){this.parentContainer=a},getParentContainer:function(){return this.parentContainer},bubble:function(a,b,c){for(var d=this;d&&a.apply(b||d,c||[d])!==!1;)d=d.parentContainer},findParentBy:function(a){for(var b=this.parentContainer;null!==b&&!a(b,this);b=b.parentContainer);return b||null},findParentById:function(a){for(var b=this.parentContainer;b&&b.id!==a;b=b.parentContainer);return b||null},findParentByType:function(b){if("string"==typeof b&&(b=a("gui/ComponentManager").getType(b),!b))return null;for(var c=this.parentContainer;c&&!(c instanceof b);c=c.parentContainer);return c||null},isDescendantOf:function(a){for(var b=this.parentContainer;b&&b!==a;b=b.parentContainer);return!!b},destroy:function(){if(!this.destroyed&&this.fireEvent("beforedestroy",this)!==!1){this.destroying=!0,this.onDestroy(),this.currentAnimation&&this.currentAnimation.end(),this._mask instanceof i&&this._mask.destroy();for(var a in this)if(this.hasOwnProperty(a)){var d=this[a];c.isElement(d)?(b(d).remove(),delete this[a]):d instanceof b&&(d.remove(),delete this[a])}this.rendered=!1,this.destroying=!1,this.destroyed=!0,this.fireEvent("destroy",this),this.purgeListeners()}},onDestroy:e.emptyFn,isDestroyed:function(){return this.destroyed}});return n}),define("gui/ComponentManager",["require","gui/Component"],function(a){var b={componentClasses:{},registerType:function(a,b){if(a=a.toLowerCase(),this.componentClasses[a])throw new Error("Error: gui.ComponentManager already has a type '"+a+"'");this.componentClasses[a]=b},getType:function(b){b=b.toLowerCase();var c="component"===b?a("gui/Component"):this.componentClasses[b];if(!c)throw new Error("The class with type name '"+b+"' has not been registered. Make sure that the component "+"exists, and has been 'required' by a RequireJS require() or define() call");return c},hasType:function(a){return a?(a=a.toLowerCase(),"component"===a?!0:!!this.componentClasses[a]):!1},create:function(b){var c=b.type?b.type.toLowerCase():void 0,d=a("gui/Component");if(b instanceof d)return b;if("component"===c)return new d(b);if(this.hasType(c||"container"))return new this.componentClasses[c||"container"](b);throw new Error("ComponentManager.create(): Unknown type: '"+c+"'")}};return b}),define("gui/Anchor",["jquery","lodash","gui/ComponentManager","gui/Component"],function(a,b,c,d){var e=d.extend({elType:"a",baseCls:"gui-anchor",initComponent:function(){this.addEvents("beforeclick","click"),this.setAttr("href",this.normalizeHref(this.href)),this.target&&this.setAttr("target",this.target),this.html=this.html||this.text,this._super(arguments)},onRender:function(){this._super(arguments),this.getEl().on("click",b.bind(this.onClick,this))},normalizeHref:function(b){return a.trim(b)||"javascript:;"},setHref:function(a){return this.setAttr("href",this.normalizeHref(a)),this},setText:function(a){return this.update(a),this},onClick:function(a){return this.fireEvent("beforeclick",this)===!1?(a.stopPropagation(),a.preventDefault(),!1):(this.fireEvent("click",this),void 0)}});return c.registerType("anchor",e),e}),define("gui/layout/Layout",["lodash","Observable","gui/Gui"],function(a,b,c){var d=b.extend({abstractClass:!0,container:null,destroyed:!1,constructor:function(b){this.addEvents("destroy"),a.assign(this,b),this._super(arguments),this.initLayout(),this.container&&this.setContainer(this.container)},initLayout:c.emptyFn,setContainer:function(a){this.container=a,this.onContainerSet(a)},getContainer:function(){return this.container},onContainerSet:c.emptyFn,doLayout:function(){if(!this.destroyed){var a,b,c=this.container,d=c.getItems(),e=d.length,f=c.getLayoutTarget(),g=this.needsLayoutMap={};for(b=0;e>b;b++)a=d[b],g[a.getUuid()]=!0,a.on("afterlayout",this.markLayoutComplete,this);for(this.onLayout(d,f),b=0;e>b;b++)a=d[b],a.un("afterlayout",this.markLayoutComplete,this),g[a.getUuid()]===!0&&a.doLayout();this.afterLayout(d,f)}},onLayout:c.emptyFn,afterLayout:c.emptyFn,markLayoutComplete:function(a){this.needsLayoutMap[a.getUuid()]=!1},renderComponent:function(b,c,d){d=d||{};var e=d.position,f=b.getEl();(!b.isRendered()||"undefined"==typeof e&&f.parent()[0]!==c[0]||"number"==typeof e&&c.children()[e]!==f[0]||("string"==typeof e||"object"==typeof e)&&c.find(e).prev()[0]!==f[0])&&(a.assign(d,{deferLayout:!0}),b.render(c,d))},sizeComponent:function(a,b,c){var d=b,e=c;isNaN(+b)||(d=b-a.getMargin("lr")-a.getPadding("lr")-a.getBorderWidth("lr")),isNaN(+c)||(e=c-a.getMargin("tb")-a.getPadding("tb")-a.getBorderWidth("tb")),a.setSize(d,e)},destroy:function(){this.destroyed||(this.onDestroy(),this.destroyed=!0,this.fireEvent("destroy",this),this.purgeListeners(),this.setContainer(null))},onDestroy:c.emptyFn});return d}),define("gui/layout/Auto",["require","gui/layout/Layout","gui/Container"],function(a,b){var c=b.extend({onLayout:function(a,b){this._super(arguments);for(var c=0,d=a.length;d>c;c++)this.renderComponent(a[c],b,{position:c})}});return c}),define("gui/Container",["require","lodash","Class","gui/Gui","gui/ComponentManager","gui/Component","gui/layout/Layout","gui/layout/Auto"],function(a,b,c,d,e,f){var g=c.extend(f,{statics:{layouts:{},registerLayout:function(a,b){g.layouts[a.toLowerCase()]=b},getLayoutType:function(b){if(b=b.toLowerCase(),"auto"!==b&&!g.layouts[b])throw new Error("Layout type '"+b+"' is not a registered layout type.");return"auto"===b?a("gui/layout/Auto"):g.layouts[b]}},defaultType:"container",acceptType:f,destroyRemoved:!0,baseCls:"gui-container",deferLayout:!1,initComponent:function(){this.items&&(this.html=void 0,this.contentEl=void 0),this.acceptType=this.resolveType(this.acceptType),this.addEvents("beforeadd","add","reorder","beforeremove","remove","afterlayout"),this._super(arguments),this.childComponents=[],this.items&&(this.add(this.items),delete this.items),this.layout&&this.setLayout(this.layout),this.data&&this.setData(this.data)},resolveType:function(a){if("string"==typeof a&&e.hasType(a)&&(a=e.getType(a)),!b.isFunction(a))throw new Error("The provided `type` did not resolve to a constructor function");return a},createComponent:function(a){return a=b.defaults(b.clone(a),{parentContainer:this,type:this.defaultType}),e.create(a)},add:function(a){var c;if(b.isArray(a)){c=[];for(var d=0,e=a.length;e>d;d++)c.push(this.doInsert(a[d]))}else c=this.doInsert(a);return this.doLayout(),c},insert:function(a,b){return a=this.doInsert(a,b),this.doLayout(),a},doInsert:function(a,b){"number"!=typeof b?b=this.childComponents.length:0>b?b=0:b>this.childComponents.length&&(b=this.childComponents.length);var c=a instanceof f,d=c&&this.has(a);if(d){for(var e=this.childComponents,g=0,h=e.length;h>g;g++)if(e[g]===a){this.childComponents.splice(g,1);break}return this.childComponents.splice(b,0,a),this.onReorder(a,b,g),this.fireEvent("reorder",this,a,b,g),a}if(c||(a=this.createComponent(a)),!(a instanceof this.acceptType))throw new Error("A Component added to the Container was not of the correct class type ('acceptType' config)");if(this.fireEvent("beforeadd",this,a)!==!1){var i=a.getParentContainer();return i&&i.remove(a,!1),a.setParentContainer(this),this.childComponents.splice(b,0,a),this.onAdd(a,b),this.fireEvent("add",this,a,b),a}return null},onAdd:d.emptyFn,onReorder:d.emptyFn,remove:function(a,c){var d;if(b.isArray(a)){d=[];for(var e=0,f=a.length;f>e;e++){var g=this.doRemove(a[e],c);g&&d.push(g)}}else d=this.doRemove(a,c);return this.doLayout(),d},removeAt:function(a){return this.remove(this.getItemAt(a))},removeAll:function(a){for(var b=this.childComponents,c=b.length-1;c>=0;c--)this.doRemove(b[c],a);this.doLayout()},doRemove:function(a,b){var c,d,e=this.childComponents,f=-1;for(b="undefined"==typeof b?this.destroyRemoved:b,c=0,d=e.length;d>c;c++)if(e[c]===a){f=c;break}return-1!==f&&this.fireEvent("beforeremove",this,a)!==!1?(a.setParentContainer(null),a.detach(),e.splice(f,1),this.onRemove(a,f),this.fireEvent("remove",this,a,f),b&&a.destroy(),a):null},onRemove:d.emptyFn,getCount:function(){return this.childComponents.length},getItems:function(){return this.childComponents},getItemAt:function(a){return this.childComponents[a]||null},getItemIndex:function(a){for(var b=this.childComponents,c=0,d=b.length;d>c;c++)if(b[c]===a)return c;return-1},has:function(a){return-1!==this.getItemIndex(a)},onShow:function(){this._super(arguments),this.deferLayout&&this.doLayout();for(var a=this.childComponents,b=0,c=a.length;c>b;b++){var d=a[b];d.isHidden()||a[b].onShow()}},doLayout:function(){this._super(arguments),this.canLayout()?(this.deferLayout=!1,this.onBeforeLayout(),this.getLayout().doLayout(),this.onLayout(),this.fireEvent("afterlayout",this)):this.deferLayout=!0},getLayoutTarget:function(){return this.getContentTarget()},onBeforeLayout:d.emptyFn,onLayout:d.emptyFn,canLayout:function(){return this.isRendered()&&!this.isHidden(!0)},getLayout:function(){if(!this.layout){var b=a("gui/layout/Auto");this.setLayout(new b)}return this.layout},setLayout:function(c){var d=a("gui/layout/Layout");if(this.layout instanceof d&&this.layout!==c){for(var e=this.childComponents,f=0,h=e.length;h>f;f++)e[f].detach();this.layout.destroy()}if(c instanceof d)this.layout=c,c.setContainer(this);else{var i,j={container:this};if("string"==typeof c)i=c;else{if("object"!=typeof c)throw new Error("Invalid layout argument provided to setLayout. See method description in docs.");i=c.type||"auto",j=b.defaults(b.clone(j),c),delete j.type}var k=g.getLayoutType(i);this.layout=new k(j)}},cascade:function(a,b,c){if(a.apply(b||this,c||[this])!==!1)for(var d=this.childComponents,e=0,f=d.length;f>e;e++)d[e].cascade?d[e].cascade(a,b,c):a.apply(b||d[e],c||[d[e]])},findById:function(a){var b=null,c=this;return this.cascade(function(d){return d!==c&&d.getId()===a?(b=d,!1):void 0}),b},findBy:function(a,b){var c=[],d=this;return this.cascade(function(e){e!==d&&a.call(b||e,e,d)===!0&&c.push(e)}),c},findByType:function(a){return"string"!=typeof a||(a=e.getType(a))?this.findBy(function(b){return c.isInstanceOf(b,a)?!0:void 0}):[]},onDestroy:function(){this.removeAll();var b=a("gui/layout/Layout");this.layout instanceof b&&this.layout.destroy(),this._super(arguments)}});return e.registerType("container",g),g}),define("gui/ComponentQuery",["lodash","Class","gui/Container","gui/ComponentManager"],function(a,b,c,d){var e=b.extend(Object,{query:function(b,d){d=[].concat(d);var e,f,g=a.flatten(d,!0);for(e=0,f=d.length;f>e;e++)d[e]instanceof c&&g.push.apply(g,this.getDescendants(d[e]));return this.filterBySelector(g,b)},is:function(a,b){var c=[a];return 1===this.filterBySelector(c,b).length},filterBySelector:function(b,c){return b="#"===c.charAt(0)?this.filterById(b,c.substr(1)):this.filterByType(b,c),a.unique(b)},filterById:function(b,c){return a.filter(b,function(a){return a.getId()===c})},filterByType:function(c,e){if(d.hasType(e)){e=d.getType(e);var f=b;return a.filter(c,function(a){return f.isInstanceOf(a,e)})}return[]},getDescendants:function(a){for(var b=a.getItems(),d=[],e=0,f=b.length;f>e;e++){var g=b[e];d.push(g),g instanceof c&&d.push.apply(d,this.getDescendants(g))}return d}});return new e}),define("gui/Image",["lodash","Class","gui/ComponentManager","gui/Component"],function(a,b,c,d){var e=b.extend(d,{src:"",elType:"img",baseCls:"gui-image",loaded:!1,errored:!1,blankImg:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",initComponent:function(){this.addEvents("load","error"),this._super(arguments)},onRender:function(){this._super(arguments),this.src&&this.setSrc(this.src)},setSrc:function(b){this.src=b,this.rendered&&(this.loaded=!1,this.errored=!1,this.$el.unbind(".uiImage"),this.$el.attr("src",this.blankImg),this.$el.bind({"load.uiImage":a.bind(this.onImageLoad,this),"error.uiImage":a.bind(this.onImageError,this)}),this.$el.attr("src",this.src))},getSrc:function(){return this.src},isLoaded:function(){return this.loaded},isErrored:function(){return this.errored},onImageLoad:function(){this.loaded=!0,this.fireEvent("load",this)},onImageError:function(){this.errored=!0,this.fireEvent("error",this)}});return c.registerType("image",e),e}),define("gui/Label",["gui/ComponentManager","gui/Component"],function(a,b){var c=b.extend({text:"",baseCls:"gui-label",onRender:function(){this._super(arguments),this.$el.append(this.text||""),delete this.text},setText:function(a){this.rendered?this.$el.html(a):this.text=a},getText:function(){return this.rendered?this.getEl().html():this.text||""}});return a.registerType("label",c),c}),define("gui/layout/HBox",["jquery","gui/Component","gui/Container","gui/layout/Layout"],function(a,b,c,d){var e=d.extend({onLayout:function(b,c){this._super(arguments);var d,e,f,g=[],h=0,i=0,j=b.length;for(d=0;j>d;d++)f=b[d],f.addCls("gui-layout-hbox-component"),this.renderComponent(f,c,{position:d}),f.isHidden()||(f.flex?(g.push(f),h+=f.flex):(f.doLayout(),i+=Math.floor(1+f.getOuterWidth(!0))));if(h>0){var k=c.width(),l=(c.height(),k-i),m=0;for(d=0,e=g.length;e>d;d++){f=g[d];var n=f.flex/h*l;m+=n%1,n=Math.floor(n),d===e-1&&(n+=Math.floor(m),n--),this.sizeComponent(f,n,void 0)}}this.$clearEl||(this.$clearEl=a('<div class="gui-layout-hbox-clear" />')),c.append(this.$clearEl)},onDestroy:function(){this.$clearEl&&this.$clearEl.remove(),this._super(arguments)}});return c.registerLayout("hbox",e),e}),define("gui/panel/Header",["lodash","gui/ComponentManager","gui/Container","gui/Label","gui/layout/HBox"],function(a,b,c,d){var e=c.extend({titlePosition:0,layout:"hbox",componentCls:"gui-panel-header",initComponent:function(){this.titleLabel=this.createTitleLabel(),this.toolButtonsCt=this.createToolButtonsCt(),this.items=this.buildItems(),this._super(arguments)},buildItems:function(){var b=this.items||[];a.isArray(b)||(b=[b]);var c=Math.min(this.titlePosition,b.length);return b.splice(c,0,this.titleLabel),b.push({type:"component",flex:1},this.toolButtonsCt),b},createTitleLabel:function(){return new d({cls:this.componentCls+"-title",text:this.title})},createToolButtonsCt:function(){return new c({cls:this.componentCls+"-toolButtons",defaultType:"toolbutton",items:this.toolButtons})},setTitle:function(a){this.titleLabel.setText(a),this.doLayout()}});return b.registerType("panelheader",e),e}),define("gui/button/Button",["jquery","lodash","gui/Component","gui/ComponentManager","gui/template/LoDash"],function(a,b,c,d,e){var f=c.extend({iconAlign:"left",text:"",tooltip:"",disabled:!1,baseCls:"gui-button",renderTpl:new e(['<span class="<%= baseCls %>-icon <%= baseCls %>-icon-left <%= leftIconElCls %>"></span>','<a id="<%= elId %>-text" class="<%= baseCls %>-text <%= textElCls %>" href="javascript:;" title="<%= tooltip %>">',"<%= text %>","</a>",'<span class="<%= baseCls %>-icon <%= baseCls %>-icon-right <%= rightIconElCls %>"></span>']),initComponent:function(){this.addEvents("click","mouseenter","mouseleave"),this._super(arguments)},getRenderAttributes:function(){var a=this._super(arguments);return this.tooltip&&(a.title=this.tooltip),a},getRenderTplData:function(){var a="",c="",d="",e=this.iconCls,f=this.baseCls+"-hiddenEl";return e?"left"===this.iconAlign?(a=e,c=f):(a=f,c=e):a=c=f,b.defaults(this._super(arguments),{text:this.text,tooltip:this.tooltip,leftIconElCls:a,rightIconElCls:c,textElCls:d})},onRender:function(){this._super(arguments),this.disabled&&this.disable(),this.$textEl=a("#"+this.elId+"-text"),this.$el.on({mouseenter:b.bind(this.onMouseEnter,this),mouseleave:b.bind(this.onMouseLeave,this),mousedown:b.bind(this.onMouseDown,this),mouseup:b.bind(this.onMouseUp,this),click:b.bind(this.onClick,this)})},setText:function(a){this.text=a,this.rendered&&this.$textEl.html(a)},disable:function(){this.disabled=!0,this.rendered&&this.$el.prop("disabled",!0)
},enable:function(){this.disabled=!1,this.rendered&&this.$el.prop("disabled",!1)},setDisabled:function(a){this[a?"disable":"enable"]()},onClick:function(){this.handler&&this.handler.call(this.scope||this,this),this.fireEvent("click",this)},onMouseEnter:function(){this.addCls(this.baseCls+"-hover"),this.fireEvent("mouseenter",this)},onMouseLeave:function(){this.removeCls(this.baseCls+"-hover"),this.fireEvent("mouseleave",this)},onMouseDown:function(){this.addCls(this.baseCls+"-active")},onMouseUp:function(){this.removeCls(this.baseCls+"-active")}});return d.registerType("button",f),f}),define("gui/panel/ToolButton",["gui/button/Button","gui/ComponentManager"],function(a,b){var c=a.extend({componentCls:"gui-panel-toolbutton",initComponent:function(){if(!this.toolType)throw new Error("'toolType' cfg required");var a=this.componentCls,b=this.toolType;this.iconCls=["gui-icon-"+b,a+"-icon",a+"-icon-"+b].join(" "),this._super(arguments)}});return b.registerType("toolbutton",c),c}),define("gui/panel/Panel",["jquery","lodash","gui/util/Css","gui/ComponentManager","gui/Container","gui/panel/Header","gui/template/LoDash","gui/panel/ToolButton"],function(a,b,c,d,e,f,g){var h=e.extend({bodyCls:"",title:"",baseCls:"gui-panel",renderTpl:new g(["<div",' id="<%= elId %>-body"',' class="<%= baseCls %>-body<% if( bodyCls ) { %> <%= bodyCls %><% } %>"','<% if( bodyStyle ) { %> style="<%= bodyStyle %>"<% } %>>',"</div>"]),initComponent:function(){this._super(arguments),this.headerCfg=this.header,delete this.header,(this.title||this.toolButtons||this.headerCfg)&&this.doCreateHeader(),this.buttons&&this.doCreateFooter()},onRender:function(){this._super(arguments),this.$bodyEl=a("#"+this.elId+"-body"),this.header&&this.header.render(this.$el,0),this.footer&&this.footer.render(this.$el)},getRenderTplData:function(){var a=c.mapToString(this.bodyStyle||{});return b.assign(this._super(arguments),{bodyCls:this.bodyCls,bodyStyle:a})},getBodyEl:function(){return this.$bodyEl},getContentTarget:function(){return this.getBodyEl()},doCreateHeader:function(){this.header=this.createHeader(b.defaults({},this.headerCfg,{type:"panelheader",componentCls:this.baseCls+"-header",title:this.title,toolButtons:this.toolButtons})),this.header.setVisible(!this.headerHidden),delete this.headerHidden,this.rendered&&this.header.render(this.$el,0)},createHeader:function(a){return d.create(a)},doCreateFooter:function(){this.footer=this.createFooter(),this.rendered&&this.footer.render(this.$el)},createFooter:function(){return new e({cls:this.baseCls+"-footer",layout:"hbox",items:[{type:"component",flex:1},{type:"container",cls:this.baseCls+"-footer-buttons",defaultType:"button",items:this.buttons}]})},getHeader:function(){return this.header||this.doCreateHeader(),this.header},setTitle:function(a){return this.header||this.doCreateHeader(),this.title=a,this.header.setTitle(a),this},getTitle:function(){return this.title},showHeader:function(){return this.header?this.header.show():this.headerHidden=!1,this},hideHeader:function(){return this.header?this.header.hide():this.headerHidden=!0,this},addBodyCls:function(a){return this.rendered?this.$bodyEl.addClass(a):this.bodyCls=c.addCls(this.bodyCls,a),this},removeBodyCls:function(a){return this.rendered?this.$bodyEl.removeClass(a):this.bodyCls=c.removeCls(this.bodyCls,a),this},hasBodyCls:function(a){return this.rendered?this.$bodyEl.hasClass(a):c.hasCls(this.bodyCls,a)},setBodyStyle:function(a,c){return this.rendered?this.$bodyEl.css(a,c):(this.bodyStyle=this.bodyStyle||{},"object"==typeof a?b.assign(this.bodyStyle,a):this.bodyStyle[a]=c),this},onDestroy:function(){this.header&&this.header.destroy(),this.footer&&this.footer.destroy(),this._super(arguments)}});return d.registerType("panel",h),h}),define("gui/Overlay",["jquery","lodash","Class","gui/Gui","gui/anim/Animation","gui/Component","gui/panel/Panel","jquery-ui/position"],function(a,b,c,d,e,f,g){var h=g.extend({autoShow:!1,constrainToViewport:!0,baseCls:"gui-overlay",initComponent:function(){this.deferredRenderTo=this.renderTo||"body",this.renderTo=void 0,this._super(arguments),this.hidden=!0,this.autoShow&&this.show()},onRender:function(){this._super(arguments),this.windowResizeHandler=b.debounce(b.bind(this.onWindowResize,this),150),a(window).on("resize",this.windowResizeHandler)},show:function(a){a=a||{};var b=a.anim;b===!1?delete a.anim:(void 0===b||b===!0)&&(a.anim=this.showAnim),this.rendered||this.render(this.deferredRenderTo),this._super([a])},onShow:function(a){if(this._super(arguments),a.anchor)this.setAnchor(a.anchor);else if(a.hasOwnProperty("x")||a.hasOwnProperty("y")){var b="undefined"!=typeof a.x?a.x:this.x,c="undefined"!=typeof a.y?a.y:this.y;this.setPosition(b,c)}else this.updatePosition()},setPosition:function(a,b){this.x=a,this.y=b,this.anchor=null,this.updatePosition()},getPosition:function(){if(this.isHidden())return{x:0,y:0,left:0,top:0,right:0,bottom:0};var b=a(window),c=this.$el.position(),d=c.left,e=c.top,f=b.width()-(c.left+this.getWidth()),g=b.height()-(c.top+this.getHeight());return{x:d,y:e,left:d,top:e,right:f,bottom:g}},setAnchor:function(a){this.anchor=a,this.updatePosition()},updatePosition:function(){if(this.isVisible()){var a,b,c,d,e=this.$el;if(this.anchor){var g=this.anchor,h=g.offset;a=g.my||"left top",b=g.at||"left bottom",h&&(a=a.split(/\s+/),h=h.split(/\s+/),a[0]+="+"+h[0],a[1]+="+"+h[1]||h[0],a=a.join(" ")),c=g.element||g.of,d=g.collision||"flipfit",c instanceof f&&(c=c.getEl())}else{var i=this.x,j=this.y,k=i,l=j,m="center",n="center";"number"==typeof i&&(k=(i>0?"left":"right")+"+"+i,m="left"),"number"==typeof j&&(l=(j>0?"top":"bottom")+"+"+j,n="top"),a=k+" "+l,b=m+" "+n,c=window,this.constrainToViewport&&(d="fit")}e.position({my:a,at:b,of:c,collision:d})}},onWindowResize:function(){this.updatePosition()},onDestroy:function(){this.rendered&&a(window).off("resize",this.windowResizeHandler),this._super(arguments)}});return h}),define("gui/layout/Fit",["Class","gui/Component","gui/Container","gui/layout/Layout"],function(a,b,c,d){var e=d.extend({browserManagedWidth:!1,browserManagedHeight:!1,lastRenderedComponent:null,onLayout:function(a,b){this._super(arguments);var c=a.length;if(c>0){for(var d=a[0],e=this.browserManagedWidth?"100%":b.width(),f=this.browserManagedHeight?"100%":b.height(),g=1;c>g;g++)a[g].detach();this.renderComponent(d,b),d!==this.lastRenderedComponent&&(this.lastRenderedSize={},this.lastRenderedComponent=d);var h=this.lastRenderedSize;(e!==h.width||f!==h.height)&&(this.sizeComponent(d,e,f),this.lastRenderedSize={width:e,height:f})}}});return c.registerLayout("fit",e),e}),define("gui/Viewport",["jquery","lodash","gui/ComponentManager","gui/Container","gui/layout/Fit"],function(a,b,c,d){var e=d.extend({layout:"fit",initComponent:function(){this._super(arguments),this.setStyle({position:"relative","overflow-x":"hidden","overflow-y":"auto"}),this.onWindowResizeDelegate=b.debounce(b.bind(this.onWindowResize,this),150),a(window).bind("resize",this.onWindowResizeDelegate)},onRender:function(){this._super(arguments),this.recalcDimensions()},recalcDimensions:function(){if(this.rendered){var a=this.$el,b=a.parent();a.css({height:b.height()})}},onWindowResize:function(){this.destroyed||this.doResize()},doResize:function(){this.recalcDimensions(),this.doLayout()},onDestroy:function(){a(window).unbind("resize",this.onWindowResizeDelegate),this._super(arguments)}});return c.registerType("viewport",e),e}),define("gui/loader/Loader",["jquery","Class"],function(a,b){var c=b.create({abstractClass:!0,load:function(a){return this.doLoad(a)},doLoad:b.abstractMethod});return c}),define("gui/loader/RequireJs",["jquery","lodash","gui/loader/Loader"],function(a,b,c){var d=c.extend({doLoad:function(b){var c=this,d=new a.Deferred;return this.require(b).then(function(a){var e=c.buildDependencyMap(b,a);d.resolve(e)}),d.promise()},require:function(c){var d=new a.Deferred;return require(c,function(){d.resolve(b.toArray(arguments))}),d.promise()},buildDependencyMap:function(a,b){for(var c={},d=0,e=a.length;e>d;d++)c[a[d]]=b[d];return c}});return d}),define("gui/app/Application",["jquery","lodash","Class","Observable","gui/loader/RequireJs"],function(a,b,c,d,e){var f=d.extend({abstractClass:!0,renderTo:"body",constructor:function(a){b.assign(this,a),this._super(arguments);var c=this;this.addEvents("initialize","destroy"),this.beforeInit(),this.loadDynamicDependencies().then(function(a){c.isDestroyed()||(c.dynamicDependencies=a,c.onDynamicDependenciesLoaded())})},loadDynamicDependencies:function(){var b=this.getDynamicDependencyList();if(0===b.length)return a.when({});var c=this.createDependencyLoader();return c.load(b)},createDependencyLoader:function(){return new e},getDynamicDependencyList:function(){return[]},onDynamicDependenciesLoaded:function(){this.createDataContainers();var b=this.viewport=this.createViewport();if(!b)throw new Error("Error: No viewport returned by createViewport() method");var c=this.controllers=this.createControllers(b);if(!c)throw new Error("Error: No Object (map) returned by the createControllers() method");this.init(),this.initialized=!0,this.fireEvent("initialize",this);var d=this;a(document).ready(function(){d.isDestroyed()||d.onDocumentReady()})},beforeInit:b.noop,createDataContainers:b.noop,createViewport:c.abstractMethod,createControllers:function(){return{}},init:b.noop,onDocumentReady:function(){this.viewport.render(this.renderTo)},getController:function(a){return this.controllers[a]||null},getDynamicDependency:function(a){var b=this.dynamicDependencies[a];if(!b)throw new Error("Error: No dependency for the path '"+a+"' was requested.");return b},isInitialized:function(){return!!this.initialized},destroy:function(){this.isDestroyed()||(this.onDestroy(),this.isInitialized()&&(b.forOwn(this.controllers,function(a){a.destroy()}),this.viewport.destroy()),this.destroyed=!0,this.fireEvent("destroy",this),this.purgeListeners())},onDestroy:b.noop,isDestroyed:function(){return!!this.destroyed}});return f}),define("gui/app/EventBus",["lodash","Class","gui/Component"],function(a,b,c){var d=b.create({fireEventPatched:!1,constructor:function(){this.callbacks=[]},subscribe:function(a,b){this.patchFireEvent(),-1===this.findCallback(a,b)&&this.callbacks.push({callback:a,scope:b})},unsubscribe:function(a,b){var c=this.findCallback(a,b);-1!==c&&this.callbacks.splice(c,1)},findCallback:function(b,c){return a.findIndex(this.callbacks,function(a){return a.callback===b&&a.scope===c})},dispatchEvent:function(a,b,c){for(var d,e=this.callbacks,f=0,g=e.length;g>f;f++){var h=e[f].callback.call(e[f].scope,a,b,c);h===!1&&(d=!1)}return d},patchFireEvent:function(){if(!this.fireEventPatched){var a=this,b=c.prototype,d=b.fireEvent;b.fireEvent=function(b){var c=d.apply(this,arguments);return c!==!1&&(c=a.dispatchEvent(this,b,Array.prototype.slice.call(arguments,1))),c},this.fireEventPatched=!0}}});return new d}),define("gui/app/Controller",["lodash","Observable","gui/Gui","gui/ComponentQuery","gui/app/EventBus"],function(a,b,c,d,e){var f=b.extend({inheritedStatics:{onClassExtended:function(b){var c=b.prototype,d=b.superclass,e=d.refs;c.refs=c.hasOwnProperty("refs")?a.assign({},e,c.refs):a.clone(e)||{}}},constructor:function(b){if(a.assign(this,b),this._super(arguments),this.addEvents("destroy"),!this.view)throw new Error("`view` cfg required");var c=this.refs;this.refs={},c&&this.addRef(c),this.listeners={},this.init()},init:c.emptyFn,addRef:function(b,c,d){if("string"==typeof b)d=d||{},this.refs[b]={selector:c,multiple:!!d.multiple,noCache:!!d.noCache};else{var e=b;e=a.forOwn(e,function(b,c,d){"string"==typeof b&&(b={selector:b}),d[c]=a.defaults(b,{multiple:!1,noCache:!1})}),a.assign(this.refs,e)}},getRef:function(a,b){var c=this.refs[a];if(!c)throw new Error("A ref with name: '"+a+"' was not defined by the `refs` config, or using addRef()");b=b||{};var e=c.cachedComponents;return(void 0===e||b.forceQuery||c.noCache)&&(c.cachedComponents=e=d.query(c.selector,this.view)),c.multiple?e:e[0]||null},listen:function(b){this.eventBusSubscribed||(e.subscribe(this.onComponentEvent,this),this.eventBusSubscribed=!0);var c=this.listeners;a.forOwn(b,function(b,d){a.forOwn(b,function(a,b){var e=c[b]=c[b]||[];e.push({selector:d,handlerFn:a})})})},onComponentEvent:function(a,b,c){var e,f=this.listeners[b];if(f)for(var g=this.view,h=0,i=f.length;i>h;h++){var j=f[h].selector;if(d.is(a,j)&&(a===g||a.isDescendantOf(g))){var k=f[h].handlerFn.apply(this,c);k===!1&&(e=!1)}}return e},destroy:function(){this.destroyed||(this.onDestroy(),this.destroyed=!0,this.fireEvent("destroy",this),this.purgeListeners(),this.eventBusSubscribed&&e.unsubscribe(this.onComponentEvent,this))},onDestroy:c.emptyFn,isDestroyed:function(){return!!this.destroyed}});return f}),define("gui/form/field/Field",["jquery","lodash","Class","gui/Component","gui/template/Template","gui/template/LoDash"],function(a,b,c,d,e,f){var g=d.extend({abstractClass:!0,label:"",labelAlign:"left",labelWidth:75,extraMsg:"",baseCls:"gui-form-field",elType:"table",labelRenderTpl:new f(['<label id="<%= elId %>-label" for="<%= inputId %>" class="<%= baseCls %>-label"><%= label %></label>']),renderTpl:new f(['<% if( labelAlign === "top" ) { %>',"<tr>",'<td id="<%= elId %>-topLabelCell" class="<%= baseCls %>-topLabelCell" colspan="2">',"<%= labelMarkup %>","</td>","</tr>","<% } %>","<tr>",'<td id="<%= elId %>-leftLabelCell" class="<%= baseCls %>-leftLabelCell" width="<%= labelWidth %>">','<% if( labelAlign === "left" ) { %>',"<%= labelMarkup %>","<% } %>","</td>",'<td id="<%= elId %>-inputCell" class="<%= baseCls %>-inputCell" width="100%">','<div id="<%= elId %>-inputContainer" class="<%= baseCls %>-inputContainer" style="position: relative;"></div>',"</td>","</tr>","<tr>","<td></td>",'<td class="<%= baseCls %>-extraMsgCell">','<div id="<%= elId %>-extraMsg" class="<%= baseCls %>-extraMsg"><%= extraMsg %></div>',"</td>","</tr>"]),initComponent:function(){this.addEvents("change","focus","blur"),this.inputId=this.elId+"-input";var a=this.labelAlign=this.labelAlign.toLowerCase(),b=this.baseCls+"-"+(this.label?a+"Label":"noLabel");this.addCls(b),this.inputName="undefined"!=typeof this.inputName?this.inputName:this.inputId,this._super(arguments)},getRenderTplData:function(){var a=this.labelAlign,c=this.labelRenderTpl instanceof e?this.labelRenderTpl:new f(this.labelRenderTpl),d=c.apply(this.getLabelRenderTplData());return b.assign(this._super(arguments),{inputId:this.inputId,inputName:this.inputName,labelAlign:a,labelWidth:this.label&&"left"===a?this.labelWidth:0,labelMarkup:d,extraMsg:this.extraMsg||""})},getLabelRenderTplData:function(){return{elId:this.elId,baseCls:this.baseCls,inputId:this.inputId,label:this.label||""}},onRender:function(){this._super(arguments);var b=this.elId;this.$labelEl=a("#"+b+"-label"),this.$inputContainerEl=a("#"+b+"-inputContainer"),this.$extraMsgEl=a("#"+b+"-extraMsg")},setLabel:function(a){return this.label=a,this.rendered&&(this.$el[a?"removeClass":"addClass"](this.baseCls+"-noLabel"),this.$labelEl.html(a)),this},getLabel:function(){return this.label},setExtraMsg:function(a){return this.extraMsg=a,this.rendered&&this.$extraMsgEl.html(a),this},getExtraMsg:function(){return this.extraMsg},getLabelEl:function(){return this.$labelEl},getInputContainerEl:function(){return this.$inputContainerEl},setValue:c.abstractMethod,getValue:c.abstractMethod,onChange:function(a){this.fireEvent("change",this,a)},focus:function(){return this.onFocus(),this},onFocus:function(){this.addCls(this.baseCls+"-focused"),this.fireEvent("focus",this)},blur:function(){return this.onBlur(),this},onBlur:function(){this.removeCls(this.baseCls+"-focused"),this.fireEvent("blur",this)}});return g}),define("gui/form/field/Checkbox",["jquery","lodash","gui/ComponentManager","gui/form/field/Field"],function(a,b,c,d){var e=d.extend({checkboxLabel:"",componentCls:"gui-form-field-checkbox",onRender:function(){this._super(arguments),this.$inputEl=a('<input type="checkbox" class="'+this.componentCls+'-input" id="'+this.inputId+'" name="'+this.inputName+'"'+(this.value?" checked":"")+" />").appendTo(this.$inputContainerEl),this.$checkboxLabelEl=a('<label for="'+this.inputId+'" class="'+this.componentCls+'-label" />&nbsp;'+(this.checkboxLabel||"")).appendTo(this.$inputContainerEl),this.$inputEl.on({change:b.bind(function(){this.onChange(this.getValue())},this)})},setValue:function(a){this.rendered?this.$inputEl.prop("checked",!!a):this.value=a},getValue:function(){return this.rendered?this.$inputEl.prop("checked"):!!this.value}});return c.registerType("checkbox",e),c.registerType("checkboxfield",e),e}),define("gui/util/OptionsStore",["lodash","Class"],function(a,b){var c=b.extend(Object,{constructor:function(a){this.setOptions(a||[])},normalizeOptions:function(b){return a.map(b,function(a){return this.normalizeOption(a)},this)},normalizeOption:function(b){return"object"==typeof b?(b=a.clone(b),void 0===b.value&&(b.value=b.text),b):{text:b,value:b}},setOptions:function(a){this.options=this.normalizeOptions(a)},addOption:function(a,b){var c=this.options;a=this.normalizeOption(a),b="undefined"!=typeof b?b:c.length,c.splice(b,0,a)},removeOptionByText:function(b){var c=this.options,d=a.findIndex(c,{text:b});-1!==d&&c.splice(d,1)},removeOptionByValue:function(b){var c=this.options,d=a.findIndex(this.options,{value:b});-1!==d&&c.splice(d,1)},getOptions:function(){return this.options},getCount:function(){return this.options.length},getAtIndex:function(a){return this.options[a]||null},getByText:function(b){return a.find(this.options,{text:b})||null},getByValue:function(b){return a.find(this.options,{value:b})||null}});return c}),define("gui/form/field/Dropdown",["jquery","lodash","gui/util/Css","gui/ComponentManager","gui/form/field/Field","gui/template/LoDash","gui/util/OptionsStore"],function(a,b,c,d,e,f,g){var h=e.extend({menuCls:"",menuCollisionStrategy:"flip",componentCls:"gui-form-field-dropdown",optionsMenuOpen:!1,statics:{dropdownRenderTpl:new f(['<input type="hidden" id="<%= inputId %>" name="<%= inputName %>" value="<%= initialValue %>" />','<div id="<%= elId %>-dropdownContainer" class="<%= componentCls %>-dropdownContainer">','<div id="<%= elId %>-selectText" class="<%= componentCls %>-selectText">','<div class="<%= optionClass %>" style="<%= optionStyles %>"><%= optionText %></div>',"</div>",'<div id="<%= elId %>-expandButton" class="<%= componentCls %>-expandButton" />',"</div>"]),optionsMenuRenderTpl:new f(['<li data-elem="gui-form-field-dropdown-menu-item" class="<%= componentCls %>-menu-item <%= menuItemCls %>" style="<%= menuItemStyle %>">',"<%= text %>","</li>"])},initComponent:function(){this._super(arguments),this.options=this.options||[],this.optionsStore=new g(this.options),this.initValue()},initValue:function(){var a=this.optionsStore,b=a.getOptions(),c=b.length;"undefined"==typeof this.value?c>0&&(this.value=b[0].value):null===a.getByValue(this.value)&&(this.value=c>0?b[0].value:void 0)},onRender:function(){this._super(arguments);var d=this.elId,e=this.inputId,f=this.$inputContainerEl,g=h.dropdownRenderTpl,i=this.getValue(),j=this.optionsStore.getByValue(i),k=g.apply({componentCls:this.componentCls,elId:d,inputId:e,inputName:this.inputName,initialValue:i,optionText:j?j.text:"",optionClass:j&&j.cls?j.cls:"",optionStyles:j&&j.style?c.mapToString(j.style):""});f.append(k),this.$inputEl=a("#"+e),this.$dropdownContainer=a("#"+d+"-dropdownContainer"),this.$selectText=a("#"+d+"-selectText"),this.$expandButton=a("#"+d+"-expandButton");var l=b.bind(this.onDropdownClick,this);this.$selectText.click(l),this.$expandButton.click(l),this.$optionsMenu=a('<ul class="'+this.componentCls+"-menu "+this.menuCls+'" />').hide().appendTo("body"),this.redrawOptions(),this.documentClickHandler=b.bind(this.onDocumentClick,this),a(document).bind("mousedown",this.documentClickHandler)},onDocumentClick:function(b){if(this.optionsMenuOpen){for(var c=a(b.target).parents().andSelf(),d=this.$dropdownContainer[0],e=this.$optionsMenu[0],f=!1,g=0,h=c.length;h>g;g++)if(c[g]===d||c[g]===e){f=!0;break}f||this.hideOptionsMenu()}},onDropdownClick:function(b){b.preventDefault(),this.toggleOptionsMenu();var c=this.$optionsMenu,d=a("li."+this.componentCls+"-menu-item-selected",c).offset().top,e=d-c.offset().top;c.animate({scrollTop:e})},onOptionClick:function(b){b.preventDefault();var c=a(b.target),d=this.getValue(),e=c.data("value");d!==e&&(this.setValue(e),this.onChange(this.getValue())),this.hideOptionsMenu()},setOptions:function(a){this.optionsStore.setOptions(a),this.onOptionsChange(),this.redrawOptions()},addOption:function(a,b){this.optionsStore.addOption(a,b),this.onOptionsChange(),this.redrawOptions()},removeOptionByValue:function(a){this.optionsStore.removeOptionByValue(a),this.onOptionsChange(),this.redrawOptions()},removeOptionByText:function(a){this.optionsStore.removeOptionByText(a),this.onOptionsChange(),this.redrawOptions()},onOptionsChange:function(){var a=this.getValue(),b=this.optionsStore;if(0===b.getCount())throw new Error("Error: no 'options' remain in the DropdownField after options modification. This is an error condition.");null===b.getByValue(a)&&this.setValue(b.getAtIndex(0).value)},getOptions:function(){return this.optionsStore.getOptions()},redrawOptions:function(){if(this.rendered){var a,d,e=this.getOptions(),f=e.length,g=this.$optionsMenu,i=h.optionsMenuRenderTpl,j=this.getValue();g.empty();var k=[];for(a=0;f>a;a++){d=e[a];var l=d.cls||"";d.value===j&&(l+=" "+this.componentCls+"-menu-item-selected"),k.push(i.apply({componentCls:this.componentCls,menuItemCls:l,menuItemStyle:d.style?c.mapToString(d.style):"",text:d.text}))}g.append(k.join(""));var m=g.find('[data-elem="gui-form-field-dropdown-menu-item"]');for(a=0;f>a;a++)m.eq(a).data("value",e[a].value);m.click(b.bind(this.onOptionClick,this))}},showOptionsMenu:function(){this.optionsMenuOpen=!0,this.$optionsMenu.show(),this.$optionsMenu.width(this.$inputContainerEl.innerWidth()),this.$optionsMenu.position({my:"left top",at:"left bottom",of:this.$inputContainerEl,collision:this.menuCollisionStrategy})},hideOptionsMenu:function(){this.optionsMenuOpen=!1,this.$optionsMenu.hide()},toggleOptionsMenu:function(){this.optionsMenuOpen?this.hideOptionsMenu():this.showOptionsMenu()},setValue:function(b){if("undefined"!=typeof b&&null!==b){var d=this.optionsStore.getByValue(b);if(d&&(this.value=b,this.rendered)){var e=a('<div class="'+d.cls+'" style="'+(d.style?c.mapToString(d.style):"")+'">'+d.text+"</div>");this.$selectText.html(e);var f=this.$optionsMenu,g=this.componentCls+"-menu-item-selected";f.find("li."+g).removeClass(g);for(var h=f.find('li[data-elem="gui-form-field-dropdown-menu-item"]'),i=0,j=h.length;j>i;i++){var k=h.eq(i);if(k.data("value")===b){k.addClass(g);break}}this.$inputEl.val(b)}}},getValue:function(){return this.value},setText:function(a){var b=this.optionsStore.getByText(a);b&&this.setValue(b.value)},getText:function(){var a=this.optionsStore.getByValue(this.getValue());return a.text},hasOptionValue:function(a){for(var b=this.getOptions(),c=0,d=b.length;d>c;c++)if(b[c].value===a)return!0;return!1},onDestroy:function(){this.rendered&&(a(document).unbind("mousedown",this.documentClickHandler),this.$optionsMenu.remove()),this._super(arguments)}});return d.registerType("dropdown",h),d.registerType("dropdownfield",h),h}),define("gui/form/field/Hidden",["jquery","lodash","gui/ComponentManager","gui/form/field/Field"],function(a,b,c,d){var e=d.extend({initComponent:function(){this.label="",this.extraMsg="",this.hidden=!0,this._super(arguments)},onRender:function(){this._super(arguments),this.$inputEl=a('<input type="hidden" id="'+this.inputId+'" name="'+this.inputName+'" value="'+(this.value||"")+'" />').appendTo(this.$inputContainerEl)},setValue:function(a){this.rendered?this.$inputEl.val(a):this.value=a},getValue:function(){return this.rendered?this.$inputEl.val():this.value}});return c.registerType("hidden",e),c.registerType("hiddenfield",e),e}),define("gui/form/field/Radio",["jquery","lodash","gui/ComponentManager","gui/form/field/Field","gui/template/LoDash","gui/util/OptionsStore"],function(a,b,c,d,e,f){var g=d.extend({stacked:!1,componentCls:"gui-form-field-radio",radioTpl:new e(['<input type="radio" id="<%= name %>-<%= num %>" name="<%= name %>" class="<%= componentCls %>-input" value="<%= inputValue %>" <% if( checked ) { %>checked<% } %>>','<label for="<%= name %>-<%= num %>" class="<%= componentCls %>-label"><%= text %></label>']),initComponent:function(){if(this.optionsStore=new f(this.options),0===this.optionsStore.getOptions().length)throw new Error("Error: The ButtonSet's 'options' was not configured.");if("undefined"==typeof this.value?this.value=this.optionsStore.getOptions()[0].value:null===this.optionsStore.getByValue(this.value)&&(this.value=this.optionsStore.getOptions()[0].value),this._super(arguments),!this.inputName)throw new Error("Error: RadioField must have a valid `inputName`. Make sure that the `inputName` has not been set to an empty string or other falsy value.")},onRender:function(){this._super(arguments);for(var a=this.optionsStore.getOptions(),c=this.radioTpl,d=this.inputName,e=this.$inputContainerEl,f=this.stacked,g=this.value,h=[],i=0,j=a.length;j>i;i++){var k=a[i];h.push(c.apply({componentCls:this.componentCls,name:d,num:i,inputValue:k.value,text:k.text,checked:g===k.value})),f&&h.push("<br />")}e.append(h.join("")),e.on({change:b.bind(function(){this.onChange(this.getValue())},this)})},setValue:function(a){var b=this.optionsStore.getByValue(a);null!==b&&(this.rendered?this.$inputContainerEl.find(":radio[value="+a+"]").prop("checked",!0):this.value=a)},getValue:function(){return this.rendered?this.$inputContainerEl.find(":radio:checked").val():this.value}});return c.registerType("radio",g),c.registerType("radiofield",g),g}),define("gui/form/field/Text",["jquery","lodash","gui/util/Html","gui/ComponentManager","gui/form/field/Field"],function(a,b,c,d,e){var f=e.extend({selectOnFocus:!1,emptyText:"",componentCls:"gui-form-field-text",focused:!1,initComponent:function(){this._super(arguments),this.addEvents("keydown","keyup","keypress"),this.value=this.normalizeValue(this.value)},onRender:function(){this._super(arguments);var c=this.$inputEl=this.createInputEl().appendTo(this.$inputContainerEl);c.on({change:b.bind(function(){this.onChange(this.getValue())},this),focus:b.bind(this.onFocus,this),blur:b.bind(this.onBlur,this),keydown:b.bind(this.onKeyDown,this),keyup:b.bind(this.onKeyUp,this),keypress:b.bind(this.onKeyPress,this)}),this.$emptyTextEl=a('<div class="'+this.componentCls+'-emptyText">'+this.emptyText+"</div>").on("click",function(){c.focus()}).appendTo(this.$inputContainerEl),this.handleEmptyText()},createInputEl:function(){var b=c.encode(this.value||"");return a(['<input type="text"',' id="'+this.inputId+'"',' name="'+this.inputName+'"',' class="'+this.componentCls+'-input"',' value="'+b+'"',this.readOnly?' readonly="readonly"':"","/>"].join(""))},getInputEl:function(){return this.$inputEl||null},normalizeValue:function(a){return"undefined"==typeof a||null===a?"":"string"!=typeof a?a.toString():a},setValue:function(a){a=this.normalizeValue(a),this.rendered?this.$inputEl.val(a):this.value=a,this.onChange(a)},getValue:function(){return this.rendered?this.$inputEl.val():this.value},setEmptyText:function(a){this.emptyText=a,this.rendered&&this.$emptyTextEl.html(a)},getEmptyText:function(){return this.emptyText},select:function(){this.$inputEl.select()},onChange:function(){this.handleEmptyText(),this._super(arguments)},focus:function(){return this.$inputEl.focus(),this._super(arguments)},blur:function(){return this.$inputEl.blur(),this._super(arguments)},onFocus:function(){this.focused=!0,this.handleEmptyText(),this.selectOnFocus&&this.select(),this._super(arguments)},onBlur:function(){this.focused=!1,this.handleEmptyText(),this._super(arguments)},isFocused:function(){return this.focused},onKeyDown:function(a){this.fireEvent("keydown",this,a)},onKeyUp:function(a){this.fireEvent("keyup",this,a)},onKeyPress:function(a){this.fireEvent("keypress",this,a)},handleEmptyText:function(){this.rendered&&this.$emptyTextEl[this.focused||""!==this.getValue()?"hide":"show"]()}});return d.registerType("textfield",f),f}),define("gui/form/field/TextArea",["jquery","lodash","gui/util/Css","gui/ComponentManager","gui/form/field/Text"],function(a,b,c,d,e){var f=e.extend({autoGrow:!1,componentCls:"gui-form-field-textarea",autoGrowMimicStyles:["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight"],onRender:function(){if(this._super(arguments),"height"in this){var d=this.height;"top"===this.labelAlign&&(d-=this.$labelEl.outerHeight(!0)),d-=c.getMargin(this.$inputContainerEl,"tb")+c.getPadding(this.$inputContainerEl,"tb"),d-=c.getMargin(this.$inputEl,"tb")+c.getPadding(this.$inputEl,"tb"),this.extraMsg&&(d-=this.$extraMsgEl.outerHeight(!0)),this.$inputEl.css("height",d+"px")}if(this.autoGrow){var e=this.autoGrowMimicStyles,f=this.$inputEl,g=a("<div />").css({position:"absolute",display:"none","word-wrap":"break-word"}),h=parseInt(f.css("line-height"),10)||parseInt(f.css("font-size"),10),i=parseInt(f.css("height"),10)||3*h,j=parseInt(f.css("max-height"),10)||Number.MAX_VALUE;0>j&&(j=Number.MAX_VALUE),f.css("resize","none"),this.autoGrowComputedStyles={lineHeight:h,minHeight:i,maxHeight:j},g.appendTo(f.parent());for(var k=e.length;k--;)g.css(e[k],f.css(e[k]));f.css("minHeight",i),f.css("overflow","hidden"),f.on("cut paste",b.bind(function(){this.updateAutoGrowHeight()},this));var l=this;this.autoGrowPasteHandler=function(){setTimeout(function(){l.updateAutoGrowHeight()},250)},f.on("paste input",this.autoGrowPasteHandler),this.$autoGrowTwinDiv=g,this.updateAutoGrowHeight()}},createInputEl:function(){return a(["<textarea",' id="'+this.inputId+'"',' name="'+this.inputName+'"',' class="'+this.componentCls+'-input"',this.readOnly?' readonly="readonly"':"",">",this.value||"","</textarea>"].join(""))},setHeightAndOverflow:function(a,b){var c=this.$inputEl,d=Math.floor(parseInt(a,10));c.height()!==d&&c.css({height:d+"px",overflow:b})},updateAutoGrowHeight:function(){if(this.rendered){var a=this.$inputEl,b=this.$autoGrowTwinDiv,c=this.autoGrowComputedStyles,d=a.val().replace(/&/g,"&amp;").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),e=b.html().replace(/<br>/gi,"<br />");if(d+"&nbsp;"!==e&&(b.html(d+"&nbsp;"),Math.abs(b.height()+c.lineHeight-a.height())>3)){var f=b.height()+c.lineHeight;f>=c.maxHeight?this.setHeightAndOverflow(c.maxHeight,"auto"):f<=c.minHeight?this.setHeightAndOverflow(c.minHeight,"hidden"):this.setHeightAndOverflow(f,"hidden")}}},setValue:function(){this._super(arguments),this.autoGrow&&this.updateAutoGrowHeight()},onChange:function(){this._super(arguments),this.autoGrow&&this.updateAutoGrowHeight()},onKeyUp:function(){this._super(arguments),this.autoGrow&&this.updateAutoGrowHeight()},onBlur:function(){if(this._super(arguments),this.autoGrow){var a=this.$inputEl,b=this.$autoGrowTwinDiv,c=this.autoGrowComputedStyles;b.height()<c.maxHeight&&(b.height()>c.minHeight?a.height(b.height()):a.height(c.minHeight))}},onDestroy:function(){this.autoGrow&&this.rendered&&this.$autoGrowTwinDiv.remove(),this._super(arguments)}});return d.registerType("textarea",f),d.registerType("textareafield",f),f}),define("gui/layout/Card.Transition",["Class","gui/Gui"],function(a,b){var c=a.extend(Object,{abstractClass:!0,setActiveItem:a.abstractMethod,destroy:function(){this.onDestroy()},onDestroy:b.emptyFn});return c}),define("gui/layout/Card.SwitchTransition",["gui/Container","gui/layout/Card.Transition"],function(a,b){var c=b.extend({setActiveItem:function(b,c,d){c&&c.hide(),d&&(d.show(),d instanceof a&&d.doLayout())}});return c}),define("gui/layout/Card",["gui/Component","gui/Container","gui/layout/Layout","gui/layout/Card.SwitchTransition"],function(a,b,c,d){var e=c.extend({activeItem:0,fit:!1,deferredRender:!0,initLayout:function(){this.addEvents("cardchange"),this.componentSizeCache={},this.transition||(this.transition=new d),this._super(arguments)
},onLayout:function(a,b){this._super(arguments),"number"==typeof this.activeItem&&(this.activeItem=this.getContainer().getItemAt(this.activeItem));var c=b.width(),d=b.height();if(this.deferredRender)null!==this.activeItem&&this.renderAndSizeCard(this.activeItem,b,c,d);else for(var e=0,f=a.length;f>e;e++)this.renderAndSizeCard(a[e],b,c,d),this.activeItem!==a[e]&&a[e].hide()},renderAndSizeCard:function(a,b,c,d){if(this.renderComponent(a,b),this.fit){var e=a.getUuid(),f=this.componentSizeCache,g=f[e]||{};d!==g.height&&(this.sizeComponent(a,void 0,d),f[e]={height:d})}},setActiveItem:function(b,c){"number"==typeof b?b=this.container.getItemAt(b):b instanceof a&&!this.container.has(b)&&(b=null);var d;if(this.container.isRendered()){if(!b||this.activeItem!==b||!b.isRendered()||b.isHidden()){if(d=this.activeItem,d instanceof a||(d=null),null!==b){var e=this.container.getLayoutTarget();this.renderAndSizeCard(b,e,e.width(),e.height())}this.transition.setActiveItem(this,d,b,c),this.activeItem=b,this.fireEvent("cardchange",this,b,d)}}else this.activeItem!==b&&(d=this.activeItem,this.activeItem=b,this.fireEvent("cardchange",this,b,d))},getActiveItem:function(){var b=this.activeItem;return b instanceof a||null===b?b:this.container.getItemAt(b)},getActiveItemIndex:function(){var b=this.activeItem;return null===b?-1:b instanceof a?this.container.getItemIndex(b):b},onDestroy:function(){this.transition.destroy(),this._super(arguments)}});return b.registerLayout("card",e),e}),define("gui/layout/Column",["Class","gui/Component","gui/Container","gui/layout/Layout"],function(a,b,c,d){var e=d.extend({onLayout:function(a,b){this._super(arguments),this.columnsLayoutInitialized?this.updateColumnsLayout(a,b):(this.initColumnsLayout(a,b),this.columnsLayoutInitialized=!0)},initColumnsLayout:function(a,b){var c,d="",e=a.length;for(c=0;e>c;c++){var f=a[c].columnWidth;"undefined"!=typeof f?-1===String(f).lastIndexOf("%")&&(f+="px"):f="auto",d+='<div style="float: left; width: '+f+'" />'}d+='<div style="clear: both;" />',b.append(d);var g=this.$columnDivEls=b.find("div");for(c=0;e>c;c++)this.renderComponent(a[c],g[c])},updateColumnsLayout:function(){},onDestroy:function(){this.columnsLayoutInitialized&&this.$columnDivEls.remove(),this._super(arguments)}});return c.registerLayout("column",e),e}),define("gui/layout/VBox",["gui/Container","gui/layout/Layout"],function(a,b){var c=b.extend({onLayout:function(a,b){this._super(arguments);var c,d,e,f=[],g=0,h=0,i=a.length;for(c=0;i>c;c++)e=a[c],this.renderComponent(e,b,{position:c}),e.isHidden()||(e.flex?(f.push(e),g+=e.flex):(e.doLayout(),h+=e.getOuterHeight(!0)));if(g>0){var j="100%",k=b.height(),l=k-h,m=0;for(c=0,d=f.length;d>c;c++){e=f[c];var n=e.flex/g*l;m+=n%1,n=Math.floor(n),c===d-1&&(n+=Math.floor(m)),this.sizeComponent(e,j,n)}}}});return a.registerLayout("vbox",c),c}),define("gui/tab/Tab",["jquery","lodash","gui/ComponentManager","gui/button/Button","gui/template/LoDash"],function(a,b,c,d){var e=d.extend({componentCls:"gui-tabPanel-tab",active:!1,initComponent:function(){if(!this.correspondingPanel)throw new Error("`correspondingPanel` cfg required");this._super(arguments)},getCorrespondingPanel:function(){return this.correspondingPanel},setActive:function(){return this.active||(this.active=!0,this.addCls(this.componentCls+"-active")),this},setInactive:function(){return this.active&&(this.active=!1,this.removeCls(this.componentCls+"-active")),this},isActive:function(){return this.active}});return c.registerType("tab",e),e}),define("gui/tab/Bar",["gui/ComponentManager","gui/Container","gui/tab/Tab"],function(a,b){var c=b.extend({defaultType:"tab",componentCls:"gui-tabPanel-bar",setActiveTab:function(a){for(var b,c=this.getItems(),d=0,e=c.length;e>d;d++)b=c[d],b[b.getCorrespondingPanel()===a?"setActive":"setInactive"]();return this}});return a.registerType("tabbar",c),c}),define("gui/tab/Panel",["jquery","lodash","gui/ComponentManager","gui/Component","gui/Container","gui/panel/Panel","gui/tab/Bar","gui/tab/Tab","gui/template/LoDash","gui/layout/Card"],function(a,b,c,d,e,f,g,h){var i=f.extend({activeTab:0,hideChildPanelHeaders:!0,defaultType:"panel",acceptType:f,layout:"card",baseCls:"gui-tabPanel",childPanelCls:"gui-tabPanel-childPanel",initComponent:function(){this.addEvents("beforetabchange","tabchange"),this.tabBar=this.createTabBar(),this._super(arguments),this.setActiveTab(this.activeTab),this.layout.on("cardchange",this.onTabChange,this)},onRender:function(){this._super(arguments),this.tabBar.render(this.$el,this.$bodyEl)},createTabBar:function(){return new g},getTabBar:function(){return this.tabBar},createTab:function(a){return new h({text:a.getTitle(),correspondingPanel:a})},onAdd:function(a,b){this._super(arguments);var c=this.createTab(a);c.on("click",this.onTabClick,this),this.tabBar.insert(c,b),a.addCls(this.childPanelCls),a.addBodyCls(this.childPanelCls+"-body"),this.hideChildPanelHeaders&&a.hideHeader()},onRemove:function(a,b){this.tabBar.removeAt(b),a.removeCls(this.childPanelCls),a.removeBodyCls(this.childPanelCls+"-body"),this._super(arguments)},onReorder:function(a,b,c){this._super(arguments);var d=this.tabBar,e=d.getItemAt(c);d.insert(e,b)},setActiveTab:function(a){"number"==typeof a&&(a=this.getItemAt(a));var b=this.getActiveTab();this.fireEvent("beforetabchange",this,a,b)!==!1&&(this.layout.setActiveItem(a),this.tabBar.setActiveTab(a))},getActiveTab:function(){return this.layout.getActiveItem()},getActiveTabIndex:function(){return this.layout.getActiveItemIndex()},onTabClick:function(a){this.setActiveTab(a.getCorrespondingPanel())},onTabChange:function(a,b,c){this.fireEvent("tabchange",this,b,c)},onDestroy:function(){this.tabBar.destroy(),this._super(arguments)}});return c.registerType("tabpanel",i),i}),define("gui/util/CallbackList",["lodash","Class"],function(a,b){var c=b.create({constructor:function(){this.callbacks=[]},add:function(a,b){this.contains(a,b)||this.callbacks.push({callback:a,scope:b})},getAll:function(){return this.callbacks},contains:function(a,b){return-1!==this.indexOf(a,b)},indexOf:function(b,c){return a.findIndex(this.callbacks,function(a){return a.callback===b&&a.scope===c})},callAll:function(){this.applyAll(arguments)},applyAll:function(a){for(var b=this.callbacks,c=0,d=b.length;d>c;c++)b[c].callback.apply(b[c].scope||window,a)},remove:function(a,b){var c=this.indexOf(a,b);-1!==c&&this.callbacks.splice(c,1)},removeAll:function(){this.callbacks.length=0}});return c}),define("gui/util/CollectionBindable",["lodash","Class","gui/Gui"],function(a,b,c){var d=b.create({collectionProp:"collection",bindCollection:function(a){var b=this.collectionProp,c=this[b]||null;if(c!==a||!this.firstCollectionBindComplete&&a){c&&this.unbindCollectionListeners(),this[b]=a,a&&this.bindCollectionListeners(),this.firstCollectionBindComplete=!0;var d=c===a?null:c||null;this.onCollectionBind(a,d)}},unbindCollection:function(){var a=this.collectionProp,b=this[a];b&&(this.unbindCollectionListeners(),this[a]=null,this.onCollectionBind(null,b))},onCollectionBind:c.emptyFn,getCollection:function(){return this[this.collectionProp]||null},bindCollectionListeners:function(){var b=this[this.collectionProp],c=a.clone(this.getCollectionListeners(b));b.on(c),this.collectionListeners=c},getCollectionListeners:function(){return{}},unbindCollectionListeners:function(){var a=this[this.collectionProp];a&&this.collectionListeners&&a.un(this.collectionListeners)}});return d}),define("gui/util/ModelBindable",["lodash","Class","gui/Gui"],function(a,b,c){var d=b.create({modelProp:"model",bindModel:function(a){var b=this.modelProp,c=this[b]||null;if(c!==a||!this.firstModelBindComplete&&a){c&&this.unbindModelListeners(),this[b]=a,a&&this.bindModelListeners(),this.firstModelBindComplete=!0;var d=c===a?null:c||null;this.onModelBind(a,d)}},unbindModel:function(){var a=this.modelProp,b=this[a];b&&(this.unbindModelListeners(),this[a]=null,this.onModelBind(null,b))},onModelBind:c.emptyFn,getModel:function(){return this[this.modelProp]||null},bindModelListeners:function(){var b=this[this.modelProp],c=a.clone(this.getModelListeners(b));b.on(c),this.modelListeners=c},getModelListeners:function(){return{}},unbindModelListeners:function(){var a=this[this.modelProp];a&&this.modelListeners&&a.un(this.modelListeners)}});return d}),define("gui/view/DataBound",["jquery","lodash","Class","gui/Component"],function(a,b,c,d){var e=d.extend({abstractClass:!0,maskOnLoad:!0,initComponent:function(){if(this._super(arguments),!this.tpl)throw new Error("`tpl` config required");this.maskConfig=this.maskConfig||{spinner:!0,msg:"Loading..."}},onAfterRender:function(){this._super(arguments);var a=this.getDataComponent();a&&this.maskOnLoad&&a.isLoading()&&this.applyLoadingHeight()},getDataComponent:c.abstractMethod,unbindDataComponent:c.abstractMethod,onLoadBegin:function(){this.maskOnLoad&&(this.mask(),this.applyLoadingHeight())},onLoadComplete:function(){this.maskOnLoad&&(this.unMask(),this.removeLoadingHeight())},applyLoadingHeight:function(){if(this.rendered){var a=this.loadingHeight,b=this.$el;a>this.getHeight()&&(this.hasLoadingHeight=!0,b.css("min-height",a+"px"))}},removeLoadingHeight:function(){if(this.hasLoadingHeight){var a=this.minHeight?this.minHeight+"px":"";this.$el.css("min-height",a),this.hasLoadingHeight=!1}},onDestroy:function(){this.unbindDataComponent(),this._super(arguments)}});return e}),define("gui/view/Collection",["jquery","lodash","gui/ComponentManager","gui/view/DataBound","gui/util/CollectionBindable"],function(a,b,c,d,e){var f=d.extend({mixins:[e],modelsVar:"models",maskOnLoad:!0,initComponent:function(){if(e.call(this),this._super(arguments),!this.modelSelector)throw new Error("`modelSelector` config required");this.modelElCache={},this.collection?this.bindCollection(this.collection):this.refresh()},onAfterRender:function(){this._super(arguments),this.collection&&this.collectModelElements(this.collectModels())},getDataComponent:function(){return this.getCollection()},unbindDataComponent:function(){this.unbindCollection()},getCollectionListeners:function(){return{loadbegin:this.onLoadBegin,load:this.onLoadComplete,addset:this.refresh,removeset:this.refresh,reorder:this.refresh,changeset:this.refresh,scope:this}},onCollectionBind:function(a){this.maskOnLoad&&this[a&&a.isLoading()?"mask":"unMask"](),this.refresh()},refresh:function(){if(this.collection){var a=this.collectModels();this.update(this.prepareTplData(a)),this.rendered&&this.collectModelElements(a)}else this.update("")},prepareTplData:function(a){var b={};return b[this.modelsVar]=a,b},collectModels:function(){return this.collection?this.collection.getModels():[]},collectModelElements:function(a){for(var b=this.modelElCache={},c=this.getContentTarget().find(this.modelSelector),d=0,e=c.length;e>d;d++){var f=c.eq(d),g=a[d].getClientId();f.attr("data-CollectionView-clientId",g),b[g]=f}},getModelFromElement:function(a){var b=this.getModelParentElement(a);return this.collection.getByClientId(b?b.attr("data-CollectionView-clientId"):-1)},getModelParentElement:function(b){var c=a(b).closest(this.modelSelector);return c.length>0?c:null},getElementFromModel:function(a){return this.rendered?this.modelElCache[a.getClientId()]||null:null}});return c.registerType("collectionview",f),f}),define("gui/view/Model",["jquery","lodash","gui/ComponentManager","gui/view/DataBound","gui/util/ModelBindable"],function(a,b,c,d,e){var f=d.extend({mixins:[e],modelVar:"model",initComponent:function(){e.call(this),this._super(arguments),this.model?this.bindModel(this.model):this.refresh()},getDataComponent:function(){return this.getModel()},unbindDataComponent:function(){this.unbindModel()},getModelListeners:function(){return{loadbegin:this.onLoadBegin,load:this.onLoadComplete,changeset:this.refresh,rollback:this.refresh,scope:this}},onModelBind:function(a){this.maskOnLoad&&this[a&&a.isLoading()?"mask":"unMask"](),this.refresh()},refresh:function(){this.model?this.update(this.prepareTplData(this.model)):this.update("")},prepareTplData:function(a){var b={};return b[this.modelVar]=a,b}});return c.registerType("modelview",f),f}),define("gui/window/Window",["jquery","lodash","gui/ComponentManager","gui/Overlay"],function(a,b,c,d){var e=d.extend({closeButton:!0,modal:!1,closeAction:"destroy",closeOnEscape:!0,baseCls:"gui-window",x:"center",y:"center",initComponent:function(){this.closeButton&&(this.toolButtons=(this.toolButtons||[]).concat({toolType:"close",handler:this.doClose,scope:this})),this._super(arguments)},onRender:function(){if(this._super(arguments),this.closeOnEscape){var c=this;this.$el.keyup(function(a){27===a.keyCode&&c.closeOnEscape&&c.doClose()})}this.modal&&(this.maskResizeHandler=b.debounce(b.bind(this.resizeModalMask,this),100,{maxWait:300}),a(window).on("resize",this.maskResizeHandler))},onShow:function(){if(this._super(arguments),this.modal){var a=this.$modalMaskEl;a||(a=this.$modalMaskEl=this.createModalMaskEl()),a.appendTo("body"),this.resizeModalMask(),a.show()}},resizeModalMask:function(){var b=this.$modalMaskEl;if(this.isVisible()&&b){var c=a(window);this.$modalMaskEl.css({width:c.width(),height:c.height()})}},onHide:function(){this.modal&&this.$modalMaskEl.detach(),this._super(arguments)},createModalMaskEl:function(){return a('<div class="'+this.baseCls+'-modalMask" />')},doClose:function(){this.hide(),"destroy"===this.closeAction&&(this.hiding?this.on("afterhide",function(){this.destroy()},this):this.destroy())},onDestroy:function(){this.$modalMaskEl&&this.$modalMaskEl.remove(),this.maskResizeHandler&&a(window).off("resize",this.maskResizeHandler),this._super(arguments)}});return c.registerType("window",e),e}),require(["gui/Anchor","gui/Component","gui/ComponentManager","gui/ComponentQuery","gui/Container","gui/Gui","gui/Image","gui/Label","gui/Mask","gui/Overlay","gui/Viewport","gui/anim/Animation","gui/app/Application","gui/app/Controller","gui/app/EventBus","gui/button/Button","gui/form/field/Checkbox","gui/form/field/Dropdown","gui/form/field/Field","gui/form/field/Hidden","gui/form/field/Radio","gui/form/field/Text","gui/form/field/TextArea","gui/layout/Auto","gui/layout/Card.SwitchTransition","gui/layout/Card.Transition","gui/layout/Card","gui/layout/Column","gui/layout/Fit","gui/layout/HBox","gui/layout/Layout","gui/layout/VBox","gui/loader/Loader","gui/loader/RequireJs","gui/panel/Header","gui/panel/Panel","gui/panel/ToolButton","gui/plugin/Plugin","gui/tab/Bar","gui/tab/Panel","gui/tab/Tab","gui/template/LoDash","gui/template/Template","gui/util/CallbackList","gui/util/CollectionBindable","gui/util/Css","gui/util/Html","gui/util/ModelBindable","gui/util/OptionsStore","gui/view/Collection","gui/view/DataBound","gui/view/Model","gui/window/Window"]);